<!DOCTYPE html>

<html lang="en" data-content_root="../../../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>ADRV9009, ADRV9008-1, ADRV9008-2 &#8212; System Level Documentation  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css?v=8e8a900e" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/app.min.css?v=c218d0f6" />
    <script defer="" src="../../../../_static/app.umd.js?v=057c4fc5"></script>
    <link rel="icon" href="../../../../_static/icon.svg"/>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="ADRV9009/ADRV9008 Device Driver Customization" href="customization.html" />
    <link rel="prev" title="IIO Transceivers" href="../index.html" />
   
  
  <meta name="repository" content="documentation">
  <meta name="version" content="">
  


<style>
  body {
    
  }

  body.dark {
    
  }

  @media (prefers-color-scheme: dark) {
    body:not(.light) {
      
    }
  }
</style>
  </head><body>
  <input type="checkbox" id="input-show-toc">
  <input type="checkbox" id="input-show-localtoc">
  <input type="checkbox" id="input-show-repotoc">

  
  <div class="search-area">
    <form action="" method="get">
      <input type="text" name="q" aria-labelledby="search-documentation" value="" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="search" placeholder="Search"/>
      <button class="icon"></button>
    </form>
  </div>
  

  <header>
    <div id="left">
      <label id="show-sidebar" class="icon" for="input-show-toc" title="Show/hide index"></label>
    </div>
    <div id="right">
      <span>
        <a id="logo-org" href="https://analog.com"></a>
        <div class="vertical-divider"></div>
        <label id="show-repotoc" for="input-show-repotoc" title="Show/hide docs" tabindex="0">Docs</label>
        <a id="logo" href="../../../../index.html">
          <div>System Level</div>
        </a>
      </span>
      <span class="reverse">
        <label id="show-localtoc" class="icon" for="input-show-localtoc" title="Show/hide contents"></label>
      </span>
    </div>
  </header>


  <div class="repotoc-tree overlay">
    <root>
  <a href="../../../../index.html" class="current">System Level</a>
</root>

  </div>
    <div class="localtoc">
      <div class="tocwrapper">
        <div>
          <div class="localtoc-header"></div>
          <a id="scroll-up" href="#top-anchor" title="Back to top"></a>
        </div>
        <nav>
          <ul>
<li><a class="reference internal" href="#">ADRV9009, ADRV9008-1, ADRV9008-2</a><ul>
<li><a class="reference internal" href="#supported-devices">Supported Devices</a></li>
<li><a class="reference internal" href="#evaluation-boards">Evaluation Boards</a></li>
<li><a class="reference internal" href="#description">Description</a></li>
<li><a class="reference internal" href="#source-code">Source Code</a><ul>
<li><a class="reference internal" href="#status">Status</a></li>
<li><a class="reference internal" href="#files">Files</a><ul>
<li><a class="reference internal" href="#interrelated-device-drivers">Interrelated Device Drivers</a><ul>
<li><a class="reference internal" href="#receive-axi-adc-driver">Receive AXI-ADC driver</a></li>
<li><a class="reference internal" href="#transmit-axi-dac-dds-driver">Transmit AXI-DAC / DDS driver</a></li>
<li><a class="reference internal" href="#axi-jesd204b-hdl-driver">AXI JESD204B HDL driver</a></li>
<li><a class="reference internal" href="#axi-jesd204b-gt-gigabit-tranceiver-hdl-driver-amd-xilinx-altera-intel">AXI JESD204B GT (Gigabit Tranceiver) HDL driver (AMD XILINX/ALTERA-INTEL)</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#device-driver-customization">Device Driver Customization</a></li>
<li><a class="reference internal" href="#stream-processor-configuration">Stream Processor Configuration</a></li>
<li><a class="reference internal" href="#example-linux-device-tree-initialization">Example Linux Device-Tree Initialization</a></li>
<li><a class="reference internal" href="#enabling-linux-driver-support">Enabling Linux driver support</a></li>
<li><a class="reference internal" href="#adding-linux-driver-support">Adding Linux driver support</a></li>
<li><a class="reference internal" href="#hardware-configuration">Hardware configuration</a></li>
<li><a class="reference internal" href="#driver-testing-api">Driver testing / API</a><ul>
<li><a class="reference internal" href="#show-device-name">Show device name</a></li>
<li><a class="reference internal" href="#enable-state-machine-controls">Enable State Machine Controls</a></li>
<li><a class="reference internal" href="#channel-enable-powerdown-controls">Channel Enable/Powerdown Controls</a></li>
<li><a class="reference internal" href="#local-oscillator-control-lo">Local Oscillator Control (LO)</a><ul>
<li><a class="reference internal" href="#frequency-hopping-mode">Frequency Hopping Mode</a><ul>
<li><a class="reference internal" href="#next-hop-frequency">Next Hop Frequency</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#filter-and-signal-path-configuration">Filter and Signal Path Configuration</a><ul>
<li><a class="reference internal" href="#profiles">Profiles</a><ul>
<li><a class="reference internal" href="#loading-a-profile">Loading a Profile</a></li>
</ul>
</li>
<li><a class="reference internal" href="#rx-signal-path">RX Signal Path</a><ul>
<li><a class="reference internal" href="#querying-the-rx-sample-rate-and-primary-signal-bandwidth">Querying the RX Sample Rate and Primary Signal Bandwidth</a></li>
</ul>
</li>
<li><a class="reference internal" href="#observation-rx-signal-path">Observation RX Signal Path</a><ul>
<li><a class="reference internal" href="#querying-the-orx-sample-rate">Querying the ORx Sample Rate</a></li>
<li><a class="reference internal" href="#setting-the-observation-path-lo-source">Setting the Observation Path LO Source</a></li>
</ul>
</li>
<li><a class="reference internal" href="#tx-signal-path">TX Signal Path</a><ul>
<li><a class="reference internal" href="#querying-the-tx-sample-rate-and-primary-signal-bandwidth">Querying the TX Sample Rate and Primary Signal Bandwidth</a></li>
<li><a class="reference internal" href="#pa-protection">PA Protection</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#rx-gain-control">RX Gain Control</a><ul>
<li><a class="reference internal" href="#loading-a-gain-table">Loading a gain table</a></li>
<li><a class="reference internal" href="#gain-control-modes">Gain control modes</a></li>
<li><a class="reference internal" href="#querying-or-setting-a-gain-control-mode">Querying or Setting a Gain Control Mode</a></li>
<li><a class="reference internal" href="#reading-the-current-gain">Reading the current Gain</a></li>
<li><a class="reference internal" href="#mgc-setting-the-current-gain">MGC setting the current Gain</a></li>
<li><a class="reference internal" href="#mgc-controlling-the-gain-using-pin-control">MGC controlling the gain using pin control</a></li>
</ul>
</li>
<li><a class="reference internal" href="#tx-attenuation-control">Tx Attenuation Control</a><ul>
<li><a class="reference internal" href="#tx-attenuation-pin-control">Tx Attenuation Pin Control</a></li>
</ul>
</li>
<li><a class="reference internal" href="#received-strength-signal-indicator-rssi">Received Strength Signal Indicator (RSSI)</a></li>
<li><a class="reference internal" href="#calibration-tracking-controls">Calibration Tracking Controls</a></li>
<li><a class="reference internal" href="#arm-calibrations">ARM Calibrations</a></li>
<li><a class="reference internal" href="#auxadc-reading">AuxADC Reading</a></li>
<li><a class="reference internal" href="#auxdac-writing">AuxDAC Writing</a></li>
</ul>
</li>
<li><a class="reference internal" href="#advanced-debug-facilities">Advanced Debug Facilities</a><ul>
<li><a class="reference internal" href="#runtime-device-driver-customization">Runtime Device Driver Customization</a><ul>
<li><a class="reference internal" href="#example-to-change-from-internal-to-external-tx-lo">Example to change from internal to external TX LO</a></li>
</ul>
</li>
<li><a class="reference internal" href="#build-in-self-test-bist">Build-In Self-Test (BIST)</a><ul>
<li><a class="reference internal" href="#bist-tone">BIST Tone</a></li>
<li><a class="reference internal" href="#prbs">PRBS</a></li>
<li><a class="reference internal" href="#loopback">Loopback</a></li>
</ul>
</li>
<li><a class="reference internal" href="#gpio-3v3-controls">GPIO 3v3 Controls</a></li>
</ul>
</li>
<li><a class="reference internal" href="#low-level-register-access-via-debugfs-direct-reg-access">Low level register access via debugfs (direct_reg_access)</a></li>
</ul>
</li>
</ul>

        </nav>
      </div>
    </div>

  
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
    <a id="no-logo" href="../../../../index.html">
      System Level Documentation
    </a><input id="input-switch-toc" type="checkbox">
<label id="show-repotoc" for="input-switch-toc">
All content
</label>
<label id="show-toc" for="input-switch-toc">
Content on this topic
</label>
<div class="repotoc-tree">
  <root>
  <a href="../../../../index.html" class="current">System Level</a>
</root>

</div>
<div class="toc-tree">
  <html>
  <body><p class="caption" role="heading"><span class="caption-text">Kuiper &amp; Linux Kernel</span></p>
<ul class="current">
<li class="toctree-l1 current"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-1" id="toctree-collapse-1" checked=""/><div class="collapse"><a class="reference internal" href="../../index.html">Linux drivers</a><label for="toctree-collapse-1"><div class="icon"></div></label></div><ul class="current">
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-1-1" id="toctree-collapse-1-1"/><div class="collapse"><a class="reference internal" href="../../iio-adc/index.html">IIO ADC</a><label for="toctree-collapse-1-1"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../iio-adc/ad4052/index.html">AD4052</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../iio-adc/ad9084/index.html">AD9084/AD9088</a></li>
</ul>
</li>
<li class="toctree-l2 current"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-1-2" id="toctree-collapse-1-2" checked=""/><div class="collapse"><a class="reference internal" href="../index.html">IIO Transceivers</a><label for="toctree-collapse-1-2"><div class="icon"></div></label></div><ul class="current">
<li class="toctree-l3 current"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-1-2-1" id="toctree-collapse-1-2-1" checked=""/><div class="collapse"><a class="current reference internal" href="#">ADRV9009, ADRV9008-1, ADRV9008-2</a><label for="toctree-collapse-1-2-1"><div class="icon"></div></label></div><ul>
<li class="toctree-l4"><a class="reference internal" href="customization.html">Customization</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-1-3" id="toctree-collapse-1-3"/><div class="collapse"><a class="reference internal" href="../../iio/index.html">Linux Industrial I/O Subsystem</a><label for="toctree-collapse-1-3"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../iio/iio-trig-sysfs.html">iio-trig-sysfs driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../iio/iio-trig-bfin-timer.html">iio-trig-bfin-timer driver</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-2" id="toctree-collapse-2"/><div class="collapse"><a class="reference internal" href="../../../kernel/index.html">Kernel and devicetrees</a><label for="toctree-collapse-2"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../kernel/zynq.html">Build Zynq</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../kernel/zynqmp.html">Build ZynqMP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../kernel/microblaze.html">Build MicroBlaze</a></li>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-2-1" id="toctree-collapse-2-1"/><div class="collapse"><a class="reference internal" href="../../../kernel/petalinux.html">Build with Petalinux</a><label for="toctree-collapse-2-1"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-2-1-1" id="toctree-collapse-2-1-1"/><div class="collapse"><a class="reference internal" href="../../../kernel/petalinux-dts/index.html">Petalinux Device Trees</a><label for="toctree-collapse-2-1-1"><div class="icon"></div></label></div><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../kernel/petalinux-dts/petalinux-custom-dts.html">Custom Device Trees with meta-adi</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../kernel/petalinux-dts/petalinux-meta-adi-bypass.html">Custom Device Trees with DTG (meta-adi Bypass)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../kernel/petalinux-dts/petalinux-system-user.html">Device Tree Modifications with system-user.dtsi</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-3" id="toctree-collapse-3"/><div class="collapse"><a class="reference internal" href="../../../kuiper/index.html">Kuiper Linux</a><label for="toctree-collapse-3"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../kuiper/release-notes.html">Release notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../kuiper/sdcard/index.html">SD Card flashing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../kuiper/project-list.html">Project list</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../kuiper/update.html">Updating</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Software</span></p>
<ul>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-4" id="toctree-collapse-4"/><div class="collapse"><a class="reference internal" href="../../../../software/iio-oscilloscope/index.html">IIO Oscilloscope</a><label for="toctree-collapse-4"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-4-1" id="toctree-collapse-4-1"/><div class="collapse"><a class="reference internal" href="../../../../software/iio-oscilloscope/adrv9009/index.html">ADRV9009</a><label for="toctree-collapse-4-1"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../software/iio-oscilloscope/adrv9009/plugin.html">Standard Plugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../software/iio-oscilloscope/adrv9009/advanced-plugin.html">Advanced plugin</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-5" id="toctree-collapse-5"/><div class="collapse"><a class="reference internal" href="../../../../software/libiio/index.html">Libiio</a><label for="toctree-collapse-5"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../software/libiio/internals.html">About libiio</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../software/libiio/cli.html">Command line utility</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../software/libiio/tips-tricks.html">Tips &amp; Tricks</a></li>
</ul>
</li>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-6" id="toctree-collapse-6"/><div class="collapse"><a class="reference internal" href="../../../../software/libm2k/index.html">Libm2k</a><label for="toctree-collapse-6"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../software/libm2k/calibration.html">Calibration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../software/libm2k/digital_communication.html">Digital communication</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../software/libm2k/m2kcli.html">Command line utility</a></li>
</ul>
</li>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-7" id="toctree-collapse-7"/><div class="collapse"><a class="reference internal" href="../../../../software/matlab/index.html">MATLAB &amp; Simulink Toolboxes</a><label for="toctree-collapse-7"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../software/matlab/hsx-toolbox/index.html">High Speed Converter Toolbox</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../software/matlab/transceiver-toolbox/index.html">Transceiver Toolbox</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../software/matlab/bsp-extend.html">Extending Device Interfaces</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../software/pyadi-iio/index.html">PyADI-IIO</a></li>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-8" id="toctree-collapse-8"/><div class="collapse"><a class="reference internal" href="../../../../software/zephyr/index.html">Zephyr RTOS</a><label for="toctree-collapse-8"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../software/zephyr/zephyr-devicetree.html">Intro to Devicetree</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../software/zephyr/kconfig/zephyr-kconfig.html">Introduction to Kconfig</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../software/zephyr/using-zephyr-codefusion-fs/zephyr_codefusion_fs.html">Using Zephyr &amp; Codefusion Studio to Partition a Flash Filesystem</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Evaluation Boards</span></p>
<ul>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-9" id="toctree-collapse-9"/><div class="collapse"><a class="reference internal" href="../../../../eval/user-guide/index.html">User guides</a><label for="toctree-collapse-9"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-9-1" id="toctree-collapse-9-1"/><div class="collapse"><a class="reference internal" href="../../../../eval/user-guide/adc/ad4052-ardz/index.html">EVAL-AD4050/AD4052-ARDZ</a><label for="toctree-collapse-9-1"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../eval/user-guide/adc/ad4052-ardz/user-guide.html">Evaluating the device</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../eval/user-guide/adc/ad9084-ebz/index.html">EVAL-AD9084-EBZ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../eval/user-guide/mem/adxl355-pmdz/index.html">EVAL-ADXL355-PMDZ</a></li>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-9-2" id="toctree-collapse-9-2"/><div class="collapse"><a class="reference internal" href="../../../../eval/user-guide/transceiver/adrv9009/index.html">ADRV9009 &amp; ADRV9008</a><label for="toctree-collapse-9-2"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../eval/user-guide/transceiver/adrv9009/prerequisites.html">Prerequisites</a></li>
<li class="toctree-l3"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-9-2-1" id="toctree-collapse-9-2-1"/><div class="collapse"><a class="reference internal" href="../../../../eval/user-guide/transceiver/adrv9009/quickstart/index.html">Quickstart</a><label for="toctree-collapse-9-2-1"><div class="icon"></div></label></div><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../eval/user-guide/transceiver/adrv9009/quickstart/zynqmp.html">ZCU102</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../eval/user-guide/transceiver/adrv9009/basic-iq-datafiles.html">Basic IQ Datafiles</a></li>
</ul>
</li>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-9-3" id="toctree-collapse-9-3"/><div class="collapse"><a class="reference internal" href="../../../../eval/user-guide/transceiver/adrv9026/index.html">ADRV9026 &amp; ADRV9029</a><label for="toctree-collapse-9-3"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../eval/user-guide/transceiver/adrv9026/prerequisites.html">Prerequisites</a></li>
<li class="toctree-l3"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-9-3-1" id="toctree-collapse-9-3-1"/><div class="collapse"><a class="reference internal" href="../../../../eval/user-guide/transceiver/adrv9026/quickstart/index.html">Quickstart</a><label for="toctree-collapse-9-3-1"><div class="icon"></div></label></div><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../eval/user-guide/transceiver/adrv9026/quickstart/zynqmp.html">ZCU102</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../eval/user-guide/transceiver/adrv9026/quickstart/versal.html">VCK190</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Products &amp; Tools</span></p>
<ul>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-10" id="toctree-collapse-10"/><div class="collapse"><a class="reference internal" href="../../../../tools/m2k/index.html">ADALM2000</a><label for="toctree-collapse-10"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../tools/m2k/devs/index.html">For Developers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tools/m2k/users/index.html">For End Users</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tools/m2k/help_support.html">Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tools/m2k/labview.html">Using With LabVIEW</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tools/m2k/matlab.html">Using with MATLAB</a></li>
</ul>
</li>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-11" id="toctree-collapse-11"/><div class="collapse"><a class="reference internal" href="../../../../tools/pluto-m2k/index.html">Common PLUTO&amp;M2K</a><label for="toctree-collapse-11"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../tools/pluto-m2k/building_the_image.html">Building the Firmware Image</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tools/pluto-m2k/drivers.html">Installing Drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tools/pluto-m2k/firmware.html">Firmware Updates</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tools/pluto-m2k/obtaining_the_sources.html">Obtaining the Build Sources</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tools/pluto-m2k/reboot.html">Rebooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tools/pluto-m2k/usb_otg_host.html">USB OTG – HOST function Support</a></li>
</ul>
</li>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-12" id="toctree-collapse-12"/><div class="collapse"><a class="reference internal" href="../../../../tools/pluto/index.html">ADALM-PLUTO</a><label for="toctree-collapse-12"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-12-1" id="toctree-collapse-12-1"/><div class="collapse"><a class="reference internal" href="../../../../tools/pluto/devs/index.html">For Developers</a><label for="toctree-collapse-12-1"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../tools/pluto/devs/usb_otg.html">USB OTG</a></li>
</ul>
</li>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-12-2" id="toctree-collapse-12-2"/><div class="collapse"><a class="reference internal" href="../../../../tools/pluto/hacking/index.html">For Hackers</a><label for="toctree-collapse-12-2"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../tools/pluto/hacking/hardware.html">ADALM-PLUTO Hardware</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../tools/pluto/hacking/listening_to_yourself.html">Self Reception</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../tools/pluto/hacking/power_amp.html">Controlling External Devices</a></li>
</ul>
</li>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-12-3" id="toctree-collapse-12-3"/><div class="collapse"><a class="reference internal" href="../../../../tools/pluto/users/index.html">For End Users</a><label for="toctree-collapse-12-3"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../tools/pluto/users/antennas.html">Antennas</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tools/pluto/help_support.html">Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tools/pluto/prerequisites.html">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tools/pluto/transceiver_transferring_data.html">Controlling the transceiver and transferring data</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../tools/uartjtag/index.html">ADALM-UARTJTAG</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Apps &amp; Solutions</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../solutions/application-software/index.html">Application Software</a></li>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-13" id="toctree-collapse-13"/><div class="collapse"><a class="reference internal" href="../../../../solutions/reference-designs/index.html">Reference Designs</a><label for="toctree-collapse-13"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-13-1" id="toctree-collapse-13-1"/><div class="collapse"><a class="reference internal" href="../../../../solutions/reference-designs/ad-amr-bms-sl/index.html">AD-AMR-BMS-SL (partno TBD)</a><label for="toctree-collapse-13-1"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../solutions/reference-designs/ad-amr-bms-sl/od.html">AD-AMR-BMS-SL CANopen Object Dictionary</a></li>
</ul>
</li>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-13-2" id="toctree-collapse-13-2"/><div class="collapse"><a class="reference internal" href="../../../../solutions/reference-designs/ad-amr-drv-sl/index.html">AD-AMR-DRV-SL (partno TBD)</a><label for="toctree-collapse-13-2"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../solutions/reference-designs/ad-amr-drv-sl/od.html">AD-AMR-DRV-SL CANopen Object Dictionary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../solutions/reference-designs/ad-amr-loc-rpiz/index.html">AD-AMR-LOC-RPIZ</a></li>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-13-3" id="toctree-collapse-13-3"/><div class="collapse"><a class="reference internal" href="../../../../solutions/reference-designs/ad-apard32690-sl/index.html">AD-APARD32690-SL</a><label for="toctree-collapse-13-3"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../solutions/reference-designs/ad-apard32690-sl/ad-t1lusb-ebz/index.html">AD-T1LUSB2.0-EBZ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../solutions/reference-designs/ad-apard32690-sl/nina-w102/index.html">NINA-W102 Networking Support</a></li>
</ul>
</li>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-13-4" id="toctree-collapse-13-4"/><div class="collapse"><a class="reference internal" href="../../../../solutions/reference-designs/ad-bmse2e3w-sl/index.html">AD-BMSE2E3W-SL</a><label for="toctree-collapse-13-4"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../solutions/reference-designs/ad-bmse2e3w-sl/sample_application/index.html">Sample Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../solutions/reference-designs/ad-bmse2e3w-sl/software_guide/index.html">Software User Guide</a></li>
</ul>
</li>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-13-5" id="toctree-collapse-13-5"/><div class="collapse"><a class="reference internal" href="../../../../solutions/reference-designs/ad-cellpackbm-sl/index.html">AD-CELLPACKBM-SL</a><label for="toctree-collapse-13-5"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../solutions/reference-designs/ad-cellpackbm-sl/hardware_guide/index.html">Hardware User Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../solutions/reference-designs/ad-cellpackbm-sl/software_guide/index.html">Software User Guide</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../solutions/reference-designs/ad-gmsl-d-e-adp/index.html">AD-GMSL-D-E-ADP#</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../solutions/reference-designs/ad-gmsl2eth-sl/index.html">AD-GMSL2ETH-SL</a></li>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-13-6" id="toctree-collapse-13-6"/><div class="collapse"><a class="reference internal" href="../../../../solutions/reference-designs/ad-gmsl522-sl/index.html">AD-GMSL522-SL</a><label for="toctree-collapse-13-6"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../solutions/reference-designs/ad-gmsl522-sl/hardware-guide/index.html">Hardware Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../solutions/reference-designs/ad-gmsl522-sl/software-guide/index.html">Software Guide</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../solutions/reference-designs/ad-gmsl717mipi-evk/index.html">AD-GMSL717MIPI-EVK</a></li>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-13-7" id="toctree-collapse-13-7"/><div class="collapse"><a class="reference internal" href="../../../../solutions/reference-designs/ad-gmslcamrpi-adp/index.html">AD-GMSLCAMRPI-ADP#</a><label for="toctree-collapse-13-7"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../solutions/reference-designs/ad-gmslcamrpi-adp/amd-kria/index.html">Using with AMD Kria</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../solutions/reference-designs/ad-gmslcamrpi-adp/nvidia-jetson/index.html">Using with Nvidia Jetson Orin Nano</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../solutions/reference-designs/ad-gmslcamrpi-adp/raspberry-pi-user-guide/index.html">Using with Raspberry Pi</a></li>
</ul>
</li>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-13-8" id="toctree-collapse-13-8"/><div class="collapse"><a class="reference internal" href="../../../../solutions/reference-designs/ad-swiot1l-sl/index.html">AD-SWIOT1L-SL</a><label for="toctree-collapse-13-8"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../solutions/reference-designs/ad-swiot1l-sl/hardware-guide/index.html">Hardware User Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../solutions/reference-designs/ad-swiot1l-sl/software-guide/index.html">Software User Guide</a></li>
</ul>
</li>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-13-9" id="toctree-collapse-13-9"/><div class="collapse"><a class="reference internal" href="../../../../solutions/reference-designs/eval-ad-amr/index.html">EVAL-AD-AMR</a><label for="toctree-collapse-13-9"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../solutions/reference-designs/eval-ad-amr/diy-setup.html">EVAL-AD-AMR Hardware Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../solutions/reference-designs/eval-ad-amr/ros2-architecture.html">EVAL-AD-AMR ROS2 architecture</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../solutions/reference-designs/eval-ad-amr/ros2-examples.html">EVAL-AD-AMR ROS2 examples</a></li>
</ul>
</li>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-13-10" id="toctree-collapse-13-10"/><div class="collapse"><a class="reference internal" href="../../../../solutions/reference-designs/eval-cn0503-ardz/index.html">EVAL-CN0503-ARDZ</a><label for="toctree-collapse-13-10"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../solutions/reference-designs/eval-cn0503-ardz/cn0503-software/index.html">Software User Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../solutions/reference-designs/eval-cn0503-ardz/fluorescence-measurement/index.html">Fluorescence Measurement Demo</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../solutions/reference-designs/eval-cn0503-ardz/nitrate-measurement/index.html">Nitrate Measurement Demo</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../solutions/reference-designs/eval-cn0503-ardz/pH-measurement/index.html">pH Measurement Demo</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../solutions/reference-designs/eval-cn0503-ardz/turbidity/index.html">Turbidity Measurement Demo</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../solutions/reference-designs/eval-cn0565-ardz/index.html">EVAL-CN0565-ARDZ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../solutions/reference-designs/eval-cn0575-rpiz/index.html">EVAL-CN0575-RPIZ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../solutions/reference-designs/eval-cn0577-fmcz/index.html">EVAL-CN0577-FMCZ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../solutions/reference-designs/eval-ess1-sys/index.html">EVAL-ESS1-SYS</a></li>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-13-11" id="toctree-collapse-13-11"/><div class="collapse"><a class="reference internal" href="../../../../solutions/reference-designs/eval-isomax/index.html">EVAL-ISOMAX</a><label for="toctree-collapse-13-11"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../solutions/reference-designs/eval-isomax/hardware_guide/index.html">Hardware User Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../solutions/reference-designs/eval-isomax/software_guide/index.html">Software User Guide</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">University Program</span></p>
<ul>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-14" id="toctree-collapse-14"/><div class="collapse"><a class="reference internal" href="../../../../university/index.html">Engineering University Program</a><label for="toctree-collapse-14"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-14-1" id="toctree-collapse-14-1"/><div class="collapse"><a class="reference internal" href="../../../../university/active_learning/index.html">Active Learning: Student-oriented Lab Exercises</a><label for="toctree-collapse-14-1"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../university/active_learning/wien_bridge_oscillator/index.html">Activity: The Wien Bridge Oscillator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../university/active_learning/efficiency_power_loss/index.html">Activity: Efficiency, Power Loss, and Thermal Management</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Learning</span></p>
<ul>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-15" id="toctree-collapse-15"/><div class="collapse"><a class="reference internal" href="../../../../learning/index.html">Learning! Tutorials, Workshops, Etc</a><label for="toctree-collapse-15"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../learning/tutorial_prec_adc/index.html">Precision ADC Tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../learning/converter_connectivity_tutorial/index.html">Converter Connectivity Tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../learning/sw_infrastructure/index.html">Software Infrastructure for designing with ADCs, DACs, and Sensors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../learning/tools_for_ls/index.html">Tools for Low Speed Mixed Signal System Design</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../learning/tools_for_prec_wb/index.html">Tools for Precision Wideband Mixed Signal System Design</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../learning/tools_for_hs/index.html">Tools for High-Speed Mixed Signal System Design</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../learning/workshop_what_sw_for_sdr/index.html">What software do I need for my SDR?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../learning/workshops_software_defined_instrumentation/index.html">Software Defined Instrumentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../learning/workshops_introduction_to_electronics/index.html">Introduction to Electronics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../learning/workshops_embedded_baremetal/index.html">Embedded Baremetal</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../learning/workshops_embedded_linux/index.html">Embedded Linux</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Contributing and Guidelines</span></p>
<ul>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-16" id="toctree-collapse-16"/><div class="collapse"><a class="reference internal" href="../../../../contributing/creating_new_pages.html">Creating new pages</a><label for="toctree-collapse-16"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../contributing/template/eval.html">Evaluation Boards</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../contributing/docs_guidelines.html">Documentation guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../contributing/forking_publishing.html">Forking and publishing</a></li>
</ul>
</body>
</html>

</div>
        </div>
      </div>

  <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper" id="top-anchor">
          <div class="body-header">
    <nav class="breadcrumb">
        <ol>
          <li><a href="../../index.html">Linux drivers</a></li>
          <li><a href="../index.html">IIO Transceivers</a></li>
          </ol>
    </nav>
  </div>

          <div class="body" role="main">
            
  <section id="adrv9009-adrv9008-1-adrv9008-2">
<span id="iio-transceiver-adrv9009"></span><h1>ADRV9009, ADRV9008-1, ADRV9008-2<a class="headerlink" href="#adrv9009-adrv9008-1-adrv9008-2" title="Link to this heading"></a></h1>
<a class="reference internal image-reference" href="../../../../_images/adrv9009-bc.jpg"><img alt="../../../../_images/adrv9009-bc.jpg" class="align-right" src="../../../../_images/adrv9009-bc.jpg" style="width: 200px;" />
</a>
<p>The <a class="icon adi reference external" href="https://www.analog.com/ADRV9009">ADRV9009</a> is a highly integrated, radio frequency (RF)
agile transceiver offering dual transmitters and receivers, integrated
synthesizers, and digital signal processing functions. The IC delivers a
versatile combination of the high performance and low power consumption demanded
by 3G and 4G macro cell TDD base station applications. The receive path consists
of two independent, wide bandwidth, direct conversion receivers with
state-of-the-art dynamic range. The part also supports a wide-bandwidth
time-shared observation path receiver for use in TDD applications. The complete
receive subsystem includes automatic and manual attenuation control, dc offset
correction, quadrature error correction (QEC), and digital filtering, thus
eliminating the need for these functions in the digital baseband. Several
auxiliary functions such as ADCs, DACs, and GPIOs for PA and RF-front-end
control are also integrated. In addition to the autonomous AGC, it also has
flexible external gain control modes, allowing significant flexibility in
setting system level gain dynamically.</p>
<section id="supported-devices">
<h2>Supported Devices<a class="headerlink" href="#supported-devices" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p><a class="icon adi reference external" href="https://www.analog.com/ADRV9009">ADRV9009</a></p></li>
<li><p><a class="icon adi reference external" href="https://www.analog.com/ADRV9008-1">ADRV9008-1</a></p></li>
<li><p><a class="icon adi reference external" href="https://www.analog.com/ADRV9008-2">ADRV9008-2</a></p></li>
</ul>
</section>
<section id="evaluation-boards">
<h2>Evaluation Boards<a class="headerlink" href="#evaluation-boards" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p><a class="icon adi reference external" href="https://www.analog.com/en/design-center/evaluation-hardware-and-software/evaluation-boards-kits/EVAL-ADRV9008-9009.html">ADRV9009-W/PCBZ</a></p></li>
<li><p><a class="icon adi reference external" href="https://www.analog.com/en/design-center/evaluation-hardware-and-software/evaluation-boards-kits/EVAL-ADRV9008-9009.html">ADRV9008-1W/PCBZ</a></p></li>
<li><p><a class="icon adi reference external" href="https://www.analog.com/en/design-center/evaluation-hardware-and-software/evaluation-boards-kits/EVAL-ADRV9008-9009.html">ADRV9008-2W/PCBZ</a></p></li>
</ul>
</section>
<section id="description">
<h2>Description<a class="headerlink" href="#description" title="Link to this heading"></a></h2>
<p>This is a Linux industrial I/O (<a class="reference internal" href="../../iio/index.html#iio"><span class="std std-ref">IIO</span></a>)
subsystem driver, targeting RF Transceivers. The industrial I/O subsystem
provides a unified framework for drivers for many different types of converters
and sensors using a number of different physical interfaces (i2c, spi, etc). See
<a class="reference internal" href="../../iio/index.html#iio"><span class="std std-ref">IIO</span></a> for more information.</p>
</section>
<section id="source-code">
<h2>Source Code<a class="headerlink" href="#source-code" title="Link to this heading"></a></h2>
<section id="status">
<h3>Status<a class="headerlink" href="#status" title="Link to this heading"></a></h3>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Source</p></th>
<th class="head"><p>Mainlined?</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>driver</p></td>
<td><p><a class="icon git reference external" href="https://github.com/analogdevicesinc/linux/tree/main/drivers/iio/adc/adrv9009.c">drivers/iio/adc/adrv9009.c</a></p></td>
</tr>
<tr class="row-odd"><td><p>driver</p></td>
<td><p><a class="icon git reference external" href="https://github.com/analogdevicesinc/linux/tree/main/drivers/iio/adc/adrv9009_conv.c">drivers/iio/adc/adrv9009_conv.c</a></p></td>
</tr>
<tr class="row-even"><td><p>include</p></td>
<td><p><a class="icon git reference external" href="https://github.com/analogdevicesinc/linux/tree/main/drivers/iio/adc/adrv9009.h">drivers/iio/adc/adrv9009.h</a></p></td>
</tr>
<tr class="row-odd"><td><p>Talise API driver</p></td>
<td><p><a class="icon git reference external" href="https://github.com/analogdevicesinc/linux/tree/main/drivers/iio/adc/talise">drivers/iio/adc/talise</a></p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="files">
<h3>Files<a class="headerlink" href="#files" title="Link to this heading"></a></h3>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Function</p></th>
<th class="head"><p>File</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>driver</p></td>
<td><p><a class="icon git reference external" href="https://github.com/analogdevicesinc/linux/tree/main/drivers/iio/adc/adrv9009.c">drivers/iio/adc/adrv9009.c</a></p></td>
</tr>
<tr class="row-odd"><td><p>driver</p></td>
<td><p><a class="icon git reference external" href="https://github.com/analogdevicesinc/linux/tree/main/drivers/iio/adc/adrv9009_conv.c">drivers/iio/adc/adrv9009_conv.c</a></p></td>
</tr>
<tr class="row-even"><td><p>include</p></td>
<td><p><a class="icon git reference external" href="https://github.com/analogdevicesinc/linux/tree/main/drivers/iio/adc/adrv9009.h">drivers/iio/adc/adrv9009.h</a></p></td>
</tr>
<tr class="row-odd"><td><p>Talise API driver</p></td>
<td><p><a class="icon git reference external" href="https://github.com/analogdevicesinc/linux/tree/main/drivers/iio/adc/talise">drivers/iio/adc/talise</a></p></td>
</tr>
</tbody>
</table>
</div>
<section id="interrelated-device-drivers">
<h4>Interrelated Device Drivers<a class="headerlink" href="#interrelated-device-drivers" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p><a class="reference external" href="https://wiki.analog.com/resources/tools-software/linux-drivers/jesd204/jesd204-fsm-framework">JESD204 (FSM) Interface Linux Kernel Framework</a></p></li>
<li><p><a class="reference external" href="https://wiki.analog.com/resources/fpga/peripherals/jesd204">JESD204 Interface Framework</a></p></li>
</ul>
<section id="receive-axi-adc-driver">
<h5>Receive AXI-ADC driver<a class="headerlink" href="#receive-axi-adc-driver" title="Link to this heading"></a></h5>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Function</p></th>
<th class="head"><p>File</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>driver</p></td>
<td><p><a class="icon git reference external" href="https://github.com/analogdevicesinc/linux/tree/main/drivers/iio/adc/cf_axi_adc_core.c">drivers/iio/adc/cf_axi_adc_core.c</a></p></td>
</tr>
<tr class="row-odd"><td><p>driver</p></td>
<td><p><a class="icon git reference external" href="https://github.com/analogdevicesinc/linux/tree/main/drivers/iio/adc/cf_axi_adc_ring_stream.c">drivers/iio/adc/cf_axi_adc_ring_stream.c</a></p></td>
</tr>
<tr class="row-even"><td><p>include</p></td>
<td><p><a class="icon git reference external" href="https://github.com/analogdevicesinc/linux/tree/main/drivers/iio/adc/cf_axi_adc.h">drivers/iio/adc/cf_axi_adc.h</a></p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="transmit-axi-dac-dds-driver">
<h5>Transmit AXI-DAC / DDS driver<a class="headerlink" href="#transmit-axi-dac-dds-driver" title="Link to this heading"></a></h5>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Function</p></th>
<th class="head"><p>File</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>driver</p></td>
<td><p><a class="icon git reference external" href="https://github.com/analogdevicesinc/linux/tree/main/drivers/iio/frequency/cf_axi_dds.c">drivers/iio/frequency/cf_axi_dds.c</a></p></td>
</tr>
<tr class="row-odd"><td><p>include</p></td>
<td><p><a class="icon git reference external" href="https://github.com/analogdevicesinc/linux/tree/main/drivers/iio/frequency/cf_axi_dds.h">drivers/iio/frequency/cf_axi_dds.h</a></p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="axi-jesd204b-hdl-driver">
<h5>AXI JESD204B HDL driver<a class="headerlink" href="#axi-jesd204b-hdl-driver" title="Link to this heading"></a></h5>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Function</p></th>
<th class="head"><p>File</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>driver</p></td>
<td><p><a class="icon git reference external" href="https://github.com/analogdevicesinc/linux/tree/main/drivers/iio/jesd204/axi_jesd204_rx.c">drivers/iio/jesd204/axi_jesd204_rx.c</a></p></td>
</tr>
<tr class="row-odd"><td><p>driver</p></td>
<td><p><a class="icon git reference external" href="https://github.com/analogdevicesinc/linux/tree/main/drivers/iio/jesd204/axi_jesd204_tx.c">drivers/iio/jesd204/axi_jesd204_tx.c</a></p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="axi-jesd204b-gt-gigabit-tranceiver-hdl-driver-amd-xilinx-altera-intel">
<h5>AXI JESD204B GT (Gigabit Tranceiver) HDL driver (AMD XILINX/ALTERA-INTEL)<a class="headerlink" href="#axi-jesd204b-gt-gigabit-tranceiver-hdl-driver-amd-xilinx-altera-intel" title="Link to this heading"></a></h5>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Function</p></th>
<th class="head"><p>File</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>driver</p></td>
<td><p><a class="icon git reference external" href="https://github.com/analogdevicesinc/linux/tree/main/drivers/iio/jesd204/axi_adxcvr.c">drivers/iio/jesd204/axi_adxcvr.c</a></p></td>
</tr>
</tbody>
</table>
</div>
</section>
</section>
</section>
</section>
<section id="device-driver-customization">
<h2>Device Driver Customization<a class="headerlink" href="#device-driver-customization" title="Link to this heading"></a></h2>
<div class="toctree-wrapper compound">
</div>
<p>For detailed options and examples see <a class="reference internal" href="customization.html"><span class="doc">ADRV9009/ADRV9008 Device Driver Customization</span></a>.</p>
</section>
<section id="stream-processor-configuration">
<h2>Stream Processor Configuration<a class="headerlink" href="#stream-processor-configuration" title="Link to this heading"></a></h2>
<p><strong>What is a stream processor and what is the purpose of that?</strong></p>
<p>The stream processor is a processor within the Talise device tasked with
performing a series of configuration tasks upon an external request. Upon a
request from the user, the stream processor performs a series of defined actions
defined in the image loaded into the stream during device initialization. The
stream processor therefore has “streams” (series of tasks) for:</p>
<ul class="simple">
<li><p>Tx1 Enable/Tx1 Disable, Tx2 Enable/Tx2 Disable</p></li>
<li><p>Rx1 Enable/Rx1 Disable, Rx2 Enable/Rx2 Disable</p></li>
<li><p>ORx1 Enable/ORx1 Disable, ORx2 Enable/ORx2 Disable</p></li>
</ul>
<p>The stream is not limited to path enabling events and can also react to other
events such as a GPIO input signal. The stream processor image needs to be
changed with every different configuration. It is recommended to use TES GUI and
generate stream file for required configuration.</p>
<p>This was added to make sure the signal path is not disrupted when ARM crashes
and still the link is available with reduced performance as tracking
calibrations are not running.</p>
<p>The stream binary <code class="docutils literal notranslate"><span class="pre">TaliseStream.bin</span></code> must be stored in the /lib/firmware
folder, or compiled into the kernel using the CONFIG_FIRMWARE_IN_KERNEL,
CONFIG_EXTRA_FIRMWARE config options. Multiple stream binaries can be added.
However a unique name must be given. The stream binary loaded during driver
probe can be specified using following device tree property:</p>
<p>stream-firmware-name = “TaliseStreamXYZ.bin”;</p>
<p>In case no stream is specified or loaded, the driver will continue to use the
standard <code class="docutils literal notranslate"><span class="pre">TaliseStream.bin</span></code> file.</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Function</p></th>
<th class="head"><p>File</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Steam</p></td>
<td><p><a class="icon git reference external" href="https://github.com/analogdevicesinc/linux/tree/main/firmware/TaliseStream.bin">firmware/TaliseStream.bin</a></p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="example-linux-device-tree-initialization">
<span id="iio-transceiver-adrv9009-devicetree"></span><h2>Example Linux Device-Tree Initialization<a class="headerlink" href="#example-linux-device-tree-initialization" title="Link to this heading"></a></h2>
<p>The ADRV9009 driver is a spi-bus driver and can currently only be instantiated
via device tree.</p>
<p>Required devicetree properties:</p>
<ul class="simple">
<li><p>compatible: Should always be either “adrv9009”, “adrv9008-1” or “adrv9008-2”</p></li>
<li><p>reg: SPI slave select number</p></li>
</ul>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Function</p></th>
<th class="head"><p>File</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>ADRV9009 Device Tree</p></td>
<td><p><a class="icon git reference external" href="https://github.com/analogdevicesinc/linux/tree/main/arch/arm64/boot/dts/xilinx/adi-adrv9009.dtsi">arch/arm64/boot/dts/xilinx/adi-adrv9009.dtsi</a></p></td>
</tr>
<tr class="row-odd"><td><p>ADRV9009 Device Tree</p></td>
<td><p><a class="icon git reference external" href="https://github.com/analogdevicesinc/linux/tree/main/arch/arm64/boot/dts/xilinx/zynqmp-zcu102-rev10-adrv9009.dts">arch/arm64/boot/dts/xilinx/zynqmp-zcu102-rev10-adrv9009.dts</a></p></td>
</tr>
<tr class="row-even"><td><p>ADRV9008-1 Device Tree</p></td>
<td><p><a class="icon git reference external" href="https://github.com/analogdevicesinc/linux/tree/main/arch/arm64/boot/dts/xilinx/zynqmp-zcu102-rev10-adrv9008-1.dts">arch/arm64/boot/dts/xilinx/zynqmp-zcu102-rev10-adrv9008-1.dts</a></p></td>
</tr>
<tr class="row-odd"><td><p>ADRV9008-2 Device Tree</p></td>
<td><p><a class="icon git reference external" href="https://github.com/analogdevicesinc/linux/tree/main/arch/arm64/boot/dts/xilinx/zynqmp-zcu102-rev10-adrv9008-2.dts">arch/arm64/boot/dts/xilinx/zynqmp-zcu102-rev10-adrv9008-2.dts</a></p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="enabling-linux-driver-support">
<h2>Enabling Linux driver support<a class="headerlink" href="#enabling-linux-driver-support" title="Link to this heading"></a></h2>
<p>Configure kernel with “make menuconfig” (alternatively use “make xconfig” or
“make qconfig”)</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The ADRV9009 driver depends on <strong>CONFIG_SPI</strong>.</p>
</div>
</section>
<section id="adding-linux-driver-support">
<h2>Adding Linux driver support<a class="headerlink" href="#adding-linux-driver-support" title="Link to this heading"></a></h2>
<p>Configure kernel with “make menuconfig” (alternatively use “make xconfig” or
“make qconfig”)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Linux</span> <span class="n">Kernel</span> <span class="n">Configuration</span>
    <span class="n">Device</span> <span class="n">Drivers</span>  <span class="o">---&gt;</span>
    <span class="o">&lt;*&gt;</span>     <span class="n">Industrial</span> <span class="n">I</span><span class="o">/</span><span class="n">O</span> <span class="n">support</span> <span class="o">---&gt;</span>
        <span class="o">---</span> <span class="n">Industrial</span> <span class="n">I</span><span class="o">/</span><span class="n">O</span> <span class="n">support</span>
        <span class="o">-*-</span>   <span class="n">Enable</span> <span class="n">ring</span> <span class="n">buffer</span> <span class="n">support</span> <span class="n">within</span> <span class="n">IIO</span>
        <span class="o">-*-</span>     <span class="n">Industrial</span> <span class="n">I</span><span class="o">/</span><span class="n">O</span> <span class="n">lock</span> <span class="n">free</span> <span class="n">software</span> <span class="n">ring</span>
        <span class="o">-*-</span>   <span class="n">Enable</span> <span class="n">triggered</span> <span class="n">sampling</span> <span class="n">support</span>

              <span class="o">***</span> <span class="n">Analog</span> <span class="n">to</span> <span class="n">digital</span> <span class="n">converters</span> <span class="o">***</span>
        <span class="p">[</span><span class="o">--</span><span class="n">snip</span><span class="o">--</span><span class="p">]</span>

        <span class="o">-*-</span> <span class="n">Analog</span> <span class="n">Devices</span> <span class="n">High</span><span class="o">-</span><span class="n">Speed</span> <span class="n">AXI</span> <span class="n">ADC</span> <span class="n">driver</span> <span class="n">core</span>
        <span class="o">&lt;</span> <span class="o">&gt;</span> <span class="n">Analog</span> <span class="n">Devices</span> <span class="n">AD9361</span><span class="p">,</span> <span class="n">AD9364</span> <span class="n">RF</span> <span class="n">Agile</span> <span class="n">Transceiver</span> <span class="n">driver</span>
        <span class="o">&lt;</span> <span class="o">&gt;</span> <span class="n">Analog</span> <span class="n">Devices</span> <span class="n">AD9371</span> <span class="n">RF</span> <span class="n">Transceiver</span> <span class="n">driver</span>
        <span class="o">&lt;*&gt;</span> <span class="n">Analog</span> <span class="n">Devices</span> <span class="n">ADRV9009</span><span class="o">/</span><span class="n">ADRV9008</span> <span class="n">RF</span> <span class="n">Transceiver</span> <span class="n">driver</span>
        <span class="o">&lt;</span> <span class="o">&gt;</span> <span class="n">Analog</span> <span class="n">Devices</span> <span class="n">AD6676</span> <span class="n">Wideband</span> <span class="n">IF</span> <span class="n">Receiver</span> <span class="n">driver</span>
        <span class="o">&lt;</span> <span class="o">&gt;</span> <span class="n">Analog</span> <span class="n">Devices</span> <span class="n">AD9467</span><span class="p">,</span> <span class="n">AD9680</span><span class="p">,</span> <span class="n">etc</span><span class="o">.</span> <span class="n">high</span> <span class="n">speed</span> <span class="n">ADCs</span>
        <span class="o">&lt;</span> <span class="o">&gt;</span> <span class="n">Analog</span> <span class="n">Devices</span> <span class="n">Motor</span> <span class="n">Control</span> <span class="p">(</span><span class="n">AD</span><span class="o">-</span><span class="n">FMCMOTCON</span><span class="p">)</span> <span class="n">drivers</span>

        <span class="p">[</span><span class="o">--</span><span class="n">snip</span><span class="o">--</span><span class="p">]</span>


    <span class="n">Frequency</span> <span class="n">Synthesizers</span> <span class="n">DDS</span><span class="o">/</span><span class="n">PLL</span>  <span class="o">---&gt;</span>
            <span class="n">Direct</span> <span class="n">Digital</span> <span class="n">Synthesis</span>  <span class="o">---&gt;</span>
            <span class="o">&lt;*&gt;</span> <span class="n">Analog</span> <span class="n">Devices</span> <span class="n">CoreFPGA</span> <span class="n">AXI</span> <span class="n">DDS</span> <span class="n">driver</span>
        <span class="n">Clock</span> <span class="n">Generator</span><span class="o">/</span><span class="n">Distribution</span>  <span class="o">---&gt;</span>
            <span class="o">&lt;</span> <span class="o">&gt;</span> <span class="n">Analog</span> <span class="n">Devices</span> <span class="n">AD9508</span> <span class="n">Clock</span> <span class="n">Fanout</span> <span class="n">Buffer</span>
            <span class="o">&lt;</span> <span class="o">&gt;</span> <span class="n">Analog</span> <span class="n">Devices</span> <span class="n">AD9523</span> <span class="n">Low</span> <span class="n">Jitter</span> <span class="n">Clock</span> <span class="n">Generator</span>
            <span class="o">&lt;*&gt;</span> <span class="n">Analog</span> <span class="n">Devices</span> <span class="n">AD9528</span> <span class="n">Low</span> <span class="n">Jitter</span> <span class="n">Clock</span> <span class="n">Generator</span>
            <span class="o">&lt;</span> <span class="o">&gt;</span> <span class="n">Analog</span> <span class="n">Devices</span> <span class="n">AD9548</span> <span class="n">Network</span> <span class="n">Clock</span> <span class="n">Generator</span><span class="o">/</span><span class="n">Synchronizer</span>
            <span class="o">&lt;</span> <span class="o">&gt;</span> <span class="n">Analog</span> <span class="n">Devices</span> <span class="n">AD9517</span> <span class="mi">12</span><span class="o">-</span><span class="n">Output</span> <span class="n">Clock</span> <span class="n">Generator</span>

    <span class="o">&lt;*&gt;</span>   <span class="n">JESD204</span> <span class="n">High</span><span class="o">-</span><span class="n">Speed</span> <span class="n">Serial</span> <span class="n">Interface</span> <span class="n">Support</span>  <span class="o">---&gt;</span>
        <span class="o">---</span> <span class="n">JESD204</span> <span class="n">High</span><span class="o">-</span><span class="n">Speed</span> <span class="n">Serial</span> <span class="n">Interface</span> <span class="n">Support</span>
        <span class="o">&lt;</span> <span class="o">&gt;</span>   <span class="n">Altera</span> <span class="n">Arria10</span> <span class="n">JESD204</span> <span class="n">PHY</span> <span class="n">Support</span>
        <span class="o">&lt;*&gt;</span>   <span class="n">Analog</span> <span class="n">Devices</span> <span class="n">AXI</span> <span class="n">ADXCVR</span> <span class="n">PHY</span> <span class="n">Support</span>
        <span class="o">&lt;</span> <span class="o">&gt;</span>   <span class="n">Generic</span> <span class="n">AXI</span> <span class="n">JESD204B</span> <span class="n">configuration</span> <span class="n">driver</span>
        <span class="o">&lt;*&gt;</span>   <span class="n">Analog</span> <span class="n">Devices</span> <span class="n">AXI</span> <span class="n">JESD204B</span> <span class="n">TX</span> <span class="n">Support</span>
        <span class="o">&lt;*&gt;</span>   <span class="n">Analog</span> <span class="n">Devices</span> <span class="n">AXI</span> <span class="n">JESD204B</span> <span class="n">RX</span> <span class="n">Support</span>
</pre></div>
</div>
</section>
<section id="hardware-configuration">
<h2>Hardware configuration<a class="headerlink" href="#hardware-configuration" title="Link to this heading"></a></h2>
</section>
<section id="driver-testing-api">
<h2>Driver testing / API<a class="headerlink" href="#driver-testing-api" title="Link to this heading"></a></h2>
<p>Each and every IIO device, typically a hardware chip, has a device folder under
<em>/sys/bus/iio/devices/iio:deviceX</em>.
Where X is the IIO index of the device. Under every of these directory folders
reside a set of files, depending on the characteristics and features of the
hardware device in question.</p>
<p>These files are consistently generalized and documented in the IIO ABI
documentation. In order to determine which IIO deviceX corresponds to which
hardware device, the user can read the name file
<em>/sys/bus/iio/devices/iio:deviceX/name</em>.
In case the sequence in which the iio device drivers are loaded/registered is
constant, the numbering is constant and may be known in advance.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>An example program which uses the interface can be found here:</p>
</div>
<ul class="simple">
<li><p><a class="reference internal" href="../../../../software/iio-oscilloscope/index.html#iio-oscilloscope"><span class="std std-ref">IIO Oscilloscope</span></a></p></li>
<li><p><a class="reference internal" href="../../../../software/iio-oscilloscope/adrv9009/plugin.html#iio-oscilloscope-adrv9009-plugin"><span class="std std-ref">ADRV9009 Control IIO Scope Plugin</span></a></p></li>
</ul>
<p><strong>General attribute naming convention:</strong></p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>IIO sysfs attribute naming prefix</p></th>
<th class="head"><p>Target</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Transceiver</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>in_voltage0_[…]</p></td>
<td><p>RX1</p></td>
</tr>
<tr class="row-even"><td><p>in_voltage1_[…]</p></td>
<td><p>RX2</p></td>
</tr>
<tr class="row-odd"><td><p>in_voltage2_[…]</p></td>
<td><p>Observation RX1</p></td>
</tr>
<tr class="row-even"><td><p>in_voltage3_[…]</p></td>
<td><p>Observation RX2</p></td>
</tr>
<tr class="row-odd"><td><p>out_voltage0_[…]</p></td>
<td><p>TX1</p></td>
</tr>
<tr class="row-even"><td><p>out_voltage1_[…]</p></td>
<td><p>TX2</p></td>
</tr>
<tr class="row-odd"><td><p>out_altvoltage0_[…]</p></td>
<td><p>TRX LO</p></td>
</tr>
<tr class="row-even"><td><p>out_altvoltage1_[…]</p></td>
<td><p>AUX LO</p></td>
</tr>
<tr class="row-odd"><td><p>Auxilary Converters</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>in_voltage4_[…]</p></td>
<td><p>AUX ADC0</p></td>
</tr>
<tr class="row-odd"><td><p>in_voltage5_[…]</p></td>
<td><p>AUX ADC1</p></td>
</tr>
<tr class="row-even"><td><p>in_voltage6_[…]</p></td>
<td><p>AUX ADC2</p></td>
</tr>
<tr class="row-odd"><td><p>in_voltage7_[…]</p></td>
<td><p>AUX ADC3</p></td>
</tr>
<tr class="row-even"><td><p>out_voltage2_[…]</p></td>
<td><p>AUX DAC0</p></td>
</tr>
<tr class="row-odd"><td><p>out_voltage3_[…]</p></td>
<td><p>AUX DAC1</p></td>
</tr>
<tr class="row-even"><td><p>out_voltage4_[…]</p></td>
<td><p>AUX DAC2</p></td>
</tr>
<tr class="row-odd"><td><p>out_voltage5_[…]</p></td>
<td><p>AUX DAC3</p></td>
</tr>
<tr class="row-even"><td><p>out_voltage6_[…]</p></td>
<td><p>AUX DAC4</p></td>
</tr>
<tr class="row-odd"><td><p>out_voltage7_[…]</p></td>
<td><p>AUX DAC5</p></td>
</tr>
<tr class="row-even"><td><p>out_voltage8_[…]</p></td>
<td><p>AUX DAC6</p></td>
</tr>
<tr class="row-odd"><td><p>out_voltage9_[…]</p></td>
<td><p>AUX DAC7</p></td>
</tr>
<tr class="row-even"><td><p>out_voltage10_[…]</p></td>
<td><p>AUX DAC8</p></td>
</tr>
<tr class="row-odd"><td><p>out_voltage11_[…]</p></td>
<td><p>AUX DAC9</p></td>
</tr>
<tr class="row-even"><td><p>out_voltage12_[…]</p></td>
<td><p>AUX DAC10</p></td>
</tr>
<tr class="row-odd"><td><p>out_voltage13_[…]</p></td>
<td><p>AUX DAC11</p></td>
</tr>
</tbody>
</table>
</div>
<div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>~$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>/sys/bus/iio/devices/
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/bus/iio/devices$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ls
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select highlight-text notranslate"><div class="highlight"><pre><span></span>iio:device0  iio:device3  iio:device2  iio:device3  iio:device4  iio:device5  iio:device6
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/bus/iio/devices$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>iio:device3
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select highlight-text notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/bus/iio/devices/iio:device3$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ls<span class="w"> </span>-al
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select highlight-text notranslate"><div class="highlight"><pre><span></span>total 0
drwxr-xr-x 3 root root     0 May 16 14:21 .
drwxr-xr-x 5 root root     0 May 16 14:21 ..
-rw-rw-rw- 1 root root  4096 May 16 14:22 calibrate
-rw-rw-rw- 1 root root  4096 May 16 14:22 calibrate_frm_en
-rw-rw-rw- 1 root root  4096 May 16 14:22 calibrate_rx_phase_correction_en
-rw-rw-rw- 1 root root  4096 May 16 14:22 calibrate_rx_qec_en
-rw-rw-rw- 1 root root  4096 May 16 14:22 calibrate_tx_lol_en
-rw-rw-rw- 1 root root  4096 May 16 14:22 calibrate_tx_lol_ext_en
-rw-rw-rw- 1 root root  4096 May 16 14:22 calibrate_tx_qec_en
-rw-rw-rw- 1 root root  4096 May 16 14:22 dev
-rw-rw-rw- 1 root root  4096 May 16 14:22 ensm_mode
-rw-rw-rw- 1 root root  4096 May 16 14:22 ensm_mode_available
-rw-rw-rw- 1 root root 32768 May 16 14:22 gain_table_config
-rw-rw-rw- 1 root root  4096 May 16 14:22 in_temp0_input
-rw-rw-rw- 1 root root  4096 May 16 14:22 in_voltage0_gain_control_mode
-rw-rw-rw- 1 root root  4096 May 16 14:22 in_voltage0_gain_control_mode_available
-rw-rw-rw- 1 root root  4096 May 16 14:22 in_voltage0_gain_control_pin_mode_en
-rw-rw-rw- 1 root root  4096 May 16 14:22 in_voltage0_hardwaregain
-rw-rw-rw- 1 root root  4096 May 16 14:22 in_voltage0_hd2_tracking_en
-rw-rw-rw- 1 root root  4096 May 16 14:22 in_voltage0_powerdown
-rw-rw-rw- 1 root root  4096 May 16 14:22 in_voltage0_quadrature_tracking_en
-rw-rw-rw- 1 root root  4096 May 16 14:22 in_voltage0_rf_bandwidth
-rw-rw-rw- 1 root root  4096 May 16 14:22 in_voltage0_sampling_frequency
-rw-rw-rw- 1 root root  4096 May 16 14:22 in_voltage1_gain_control_mode
-rw-rw-rw- 1 root root  4096 May 16 14:22 in_voltage1_gain_control_mode_available
-rw-rw-rw- 1 root root  4096 May 16 14:22 in_voltage1_gain_control_pin_mode_en
-rw-rw-rw- 1 root root  4096 May 16 14:22 in_voltage1_hardwaregain
-rw-rw-rw- 1 root root  4096 May 16 14:22 in_voltage1_hd2_tracking_en
-rw-rw-rw- 1 root root  4096 May 16 14:22 in_voltage1_powerdown
-rw-rw-rw- 1 root root  4096 May 16 14:22 in_voltage1_quadrature_tracking_en
-rw-rw-rw- 1 root root  4096 May 16 14:22 in_voltage1_rf_bandwidth
-rw-rw-rw- 1 root root  4096 May 16 14:22 in_voltage1_sampling_frequency
-rw-rw-rw- 1 root root  4096 May 16 14:22 in_voltage2_hardwaregain
-rw-rw-rw- 1 root root  4096 May 16 14:22 in_voltage2_powerdown
-rw-rw-rw- 1 root root  4096 May 16 14:22 in_voltage2_quadrature_tracking_en
-rw-rw-rw- 1 root root  4096 May 16 14:22 in_voltage2_rf_bandwidth
-rw-rw-rw- 1 root root  4096 May 16 14:22 in_voltage2_rf_port_select
-rw-rw-rw- 1 root root  4096 May 16 14:22 in_voltage2_rf_port_select_available
-rw-rw-rw- 1 root root  4096 May 16 14:22 in_voltage2_sampling_frequency
-rw-rw-rw- 1 root root  4096 May 16 14:22 in_voltage3_hardwaregain
-rw-rw-rw- 1 root root  4096 May 16 14:22 in_voltage3_powerdown
-rw-rw-rw- 1 root root  4096 May 16 14:22 in_voltage3_quadrature_tracking_en
-rw-rw-rw- 1 root root  4096 May 16 14:22 in_voltage3_rf_bandwidth
-rw-rw-rw- 1 root root  4096 May 16 14:22 in_voltage3_rf_port_select
-rw-rw-rw- 1 root root  4096 May 16 14:22 in_voltage3_rf_port_select_available
-rw-rw-rw- 1 root root  4096 May 16 14:22 in_voltage3_sampling_frequency
-rw-rw-rw- 1 root root  4096 May 16 14:22 in_voltage4_offset
-rw-rw-rw- 1 root root  4096 May 16 14:22 in_voltage4_raw
-rw-rw-rw- 1 root root  4096 May 16 14:22 in_voltage4_scale
-rw-rw-rw- 1 root root  4096 May 16 14:22 in_voltage5_offset
-rw-rw-rw- 1 root root  4096 May 16 14:22 in_voltage5_raw
-rw-rw-rw- 1 root root  4096 May 16 14:22 in_voltage5_scale
-rw-rw-rw- 1 root root  4096 May 16 14:22 in_voltage6_offset
-rw-rw-rw- 1 root root  4096 May 16 14:22 in_voltage6_raw
-rw-rw-rw- 1 root root  4096 May 16 14:22 in_voltage6_scale
-rw-rw-rw- 1 root root  4096 May 16 14:22 in_voltage7_offset
-rw-rw-rw- 1 root root  4096 May 16 14:22 in_voltage7_raw
-rw-rw-rw- 1 root root  4096 May 16 14:22 in_voltage7_scale
-rw-rw-rw- 1 root root  4096 May 16 14:22 name
lrwxrwxrwx 1 root root     0 May 16 14:22 of_node -&gt; ../../../../../../../../firmware/devicetree/base/amba/spi@ff040000/adrv9009-phy@1
-rw-rw-rw- 1 root root  4096 May 16 14:22 out_altvoltage0_TRX_LO_frequency
-rw-rw-rw- 1 root root  4096 May 16 14:22 out_altvoltage0_TRX_LO_frequency_hopping_mode_enable
-rw-rw-rw- 1 root root  4096 May 16 14:22 out_altvoltage1_AUX_OBS_RX_LO_frequency
-rw-rw-rw- 1 root root  4096 May 16 14:22 out_voltage0_atten_control_pin_mode_en
-rw-rw-rw- 1 root root  4096 May 16 14:22 out_voltage0_hardwaregain
-rw-rw-rw- 1 root root  4096 May 16 14:22 out_voltage0_lo_leakage_tracking_en
-rw-rw-rw- 1 root root  4096 May 16 14:22 out_voltage0_pa_protection_en
-rw-rw-rw- 1 root root  4096 May 16 14:22 out_voltage0_powerdown
-rw-rw-rw- 1 root root  4096 May 16 14:22 out_voltage0_quadrature_tracking_en
-rw-rw-rw- 1 root root  4096 May 16 14:22 out_voltage0_rf_bandwidth
-rw-rw-rw- 1 root root  4096 May 16 14:22 out_voltage10_offset
-rw-rw-rw- 1 root root  4096 May 16 14:22 out_voltage10_raw
-rw-rw-rw- 1 root root  4096 May 16 14:22 out_voltage10_scale
-rw-rw-rw- 1 root root  4096 May 16 14:22 out_voltage11_offset
-rw-rw-rw- 1 root root  4096 May 16 14:22 out_voltage11_raw
-rw-rw-rw- 1 root root  4096 May 16 14:22 out_voltage11_scale
-rw-rw-rw- 1 root root  4096 May 16 14:22 out_voltage12_raw
-rw-rw-rw- 1 root root  4096 May 16 14:22 out_voltage12_scale
-rw-rw-rw- 1 root root  4096 May 16 14:22 out_voltage13_raw
-rw-rw-rw- 1 root root  4096 May 16 14:22 out_voltage13_scale
-rw-rw-rw- 1 root root  4096 May 16 14:22 out_voltage1_atten_control_pin_mode_en
-rw-rw-rw- 1 root root  4096 May 16 14:22 out_voltage1_hardwaregain
-rw-rw-rw- 1 root root  4096 May 16 14:22 out_voltage1_lo_leakage_tracking_en
-rw-rw-rw- 1 root root  4096 May 16 14:22 out_voltage1_pa_protection_en
-rw-rw-rw- 1 root root  4096 May 16 14:22 out_voltage1_powerdown
-rw-rw-rw- 1 root root  4096 May 16 14:22 out_voltage1_quadrature_tracking_en
-rw-rw-rw- 1 root root  4096 May 16 14:22 out_voltage1_rf_bandwidth
-rw-rw-rw- 1 root root  4096 May 16 14:22 out_voltage2_offset
-rw-rw-rw- 1 root root  4096 May 16 14:22 out_voltage2_raw
-rw-rw-rw- 1 root root  4096 May 16 14:22 out_voltage2_scale
-rw-rw-rw- 1 root root  4096 May 16 14:22 out_voltage3_offset
-rw-rw-rw- 1 root root  4096 May 16 14:22 out_voltage3_raw
-rw-rw-rw- 1 root root  4096 May 16 14:22 out_voltage3_scale
-rw-rw-rw- 1 root root  4096 May 16 14:22 out_voltage4_offset
-rw-rw-rw- 1 root root  4096 May 16 14:22 out_voltage4_raw
-rw-rw-rw- 1 root root  4096 May 16 14:22 out_voltage4_scale
-rw-rw-rw- 1 root root  4096 May 16 14:22 out_voltage5_offset
-rw-rw-rw- 1 root root  4096 May 16 14:22 out_voltage5_raw
-rw-rw-rw- 1 root root  4096 May 16 14:22 out_voltage5_scale
-rw-rw-rw- 1 root root  4096 May 16 14:22 out_voltage6_offset
-rw-rw-rw- 1 root root  4096 May 16 14:22 out_voltage6_raw
-rw-rw-rw- 1 root root  4096 May 16 14:22 out_voltage6_scale
-rw-rw-rw- 1 root root  4096 May 16 14:22 out_voltage7_offset
-rw-rw-rw- 1 root root  4096 May 16 14:22 out_voltage7_raw
-rw-rw-rw- 1 root root  4096 May 16 14:22 out_voltage7_scale
-rw-rw-rw- 1 root root  4096 May 16 14:22 out_voltage8_offset
-rw-rw-rw- 1 root root  4096 May 16 14:22 out_voltage8_raw
-rw-rw-rw- 1 root root  4096 May 16 14:22 out_voltage8_scale
-rw-rw-rw- 1 root root  4096 May 16 14:22 out_voltage9_offset
-rw-rw-rw- 1 root root  4096 May 16 14:22 out_voltage9_raw
-rw-rw-rw- 1 root root  4096 May 16 14:22 out_voltage9_scale
-rw-rw-rw- 1 root root  4096 May 16 14:22 out_voltage_sampling_frequency
drwxrwxrwx 2 root root     0 May 16 14:22 power
-rw-rw-rw- 1 root root  8192 May 16 14:22 profile_config
lrwxrwxrwx 1 root root     0 May 16 14:22 subsystem -&gt; ../../../../../../../../bus/iio
-rw-rw-rw- 1 root root  4096 May 16 14:22 uevent
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/bus/iio/devices/iio:device3$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="clear-left"></div></div></div><section id="show-device-name">
<h3>Show device name<a class="headerlink" href="#show-device-name" title="Link to this heading"></a></h3>
<div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/bus/iio/devices/iio:device3$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat<span class="w"> </span>name
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select highlight-text notranslate"><div class="highlight"><pre><span></span>adrv9009-phy
</pre></div>
</div>
<div class="clear-left"></div></div></div></section>
<section id="enable-state-machine-controls">
<span id="iio-transceiver-adrv9009-enable-state-machine-controls"></span><h3>Enable State Machine Controls<a class="headerlink" href="#enable-state-machine-controls" title="Link to this heading"></a></h3>
<p>The ADRV9009 transceiver includes an Enable State Machine (ENSM), allowing real
time control over the current state of the device. The ENSM has two possible
control methods – SPI control (writing ensm_mode), and pin control.</p>
<div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/bus/iio/devices/iio:device3$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat<span class="w"> </span>ensm_mode_available
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select highlight-text notranslate"><div class="highlight"><pre><span></span>radio_on radio_off
</pre></div>
</div>
<div class="clear-left"></div></div></div><div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/bus/iio/devices/iio:device3$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat<span class="w"> </span>ensm_mode
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select highlight-text notranslate"><div class="highlight"><pre><span></span>radio_on
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/bus/iio/devices/iio:device3$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">echo</span><span class="w"> </span>radio_off<span class="w"> </span>&gt;<span class="w"> </span>ensm_mode
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/bus/iio/devices/iio:device3$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat<span class="w"> </span>ensm_mode
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select highlight-text notranslate"><div class="highlight"><pre><span></span>radio_of
</pre></div>
</div>
<div class="clear-left"></div></div></div></section>
<section id="channel-enable-powerdown-controls">
<span id="iio-transceiver-adrv9009-channel-enablepowerdown-controls"></span><h3>Channel Enable/Powerdown Controls<a class="headerlink" href="#channel-enable-powerdown-controls" title="Link to this heading"></a></h3>
<p>For use cases where pin control mode is not used or required, these attributes
can be used to enable/disable the Rx/ORx/Tx signal paths while in the ENSM
radio_on state.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Rx and ORx channels <strong>can not</strong> be enabled at the same time,
since they share the same converter. So when stitching from RX to ORx,
first powerdown RX, then clear the powerdown controls on ORx.</p>
</div>
<p>Writing 0, N or 1, Y to the below attributes either disables or enables the
corresponding channel powerdown option.</p>
<ul class="simple">
<li><p>in_voltage0_powerdown</p></li>
<li><p>in_voltage1_powerdown</p></li>
<li><p>in_voltage2_powerdown</p></li>
<li><p>in_voltage3_powerdown</p></li>
<li><p>out_voltage0_powerdown</p></li>
<li><p>out_voltage1_powerdown</p></li>
</ul>
<div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/bus/iio/devices/iio:device3$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat<span class="w"> </span>in_voltage0_powerdown
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select highlight-text notranslate"><div class="highlight"><pre><span></span>0
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/bus/iio/devices/iio:device3$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">echo</span><span class="w"> </span><span class="m">1</span><span class="w"> </span>&gt;<span class="w"> </span>in_voltage0_powerdown
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/bus/iio/devices/iio:device3$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat<span class="w"> </span>in_voltage0_powerdown_en
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select highlight-text notranslate"><div class="highlight"><pre><span></span>1
</pre></div>
</div>
<div class="clear-left"></div></div></div></section>
<section id="local-oscillator-control-lo">
<span id="iio-transceiver-adrv9009-local-oscillator-control-lo"></span><h3>Local Oscillator Control (LO)<a class="headerlink" href="#local-oscillator-control-lo" title="Link to this heading"></a></h3>
<p>The ADRV9009 contains two fractional-N PLLs <strong>RF PLL</strong> and <strong>AUX PLL</strong>. The <strong>RF
PLL</strong> generate the RF LO used by the transmitter &amp; receiver, and observation
receiver. The LO mux controlled via <code class="docutils literal notranslate"><span class="pre">in_voltage2_rf_port_select</span></code> allows either
the <strong>RF PLL</strong> or the <strong>AUX PLL</strong> to provide the local oscillator signal source
for the observation receiver ORx1 and ORx2 mixers. The tuning range supported by
this driver covers 75MHz to 6GHz. The lower end cannot go below TxProfile or
RxProfile RFBW/2.</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>PLL Name</p></th>
<th class="head"><p>Source Target</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>out_altvoltage0_TRX_LO_frequency</p></td>
<td><p>RF PLL</p></td>
<td><p>RX1, RX2, TX1, TX2, ORX1, ORX2</p></td>
</tr>
<tr class="row-odd"><td><p>out_altvoltage1_AUX_OBS_RX_LO_frequency</p></td>
<td><p>AUX PLL</p></td>
<td><p>ORX1, ORX2</p></td>
</tr>
</tbody>
</table>
</div>
<div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/bus/iio/devices/iio:device3$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat<span class="w"> </span>out_altvoltage1_TX_LO_frequency
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select highlight-text notranslate"><div class="highlight"><pre><span></span>2400000000
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/bus/iio/devices/iio:device3$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">echo</span><span class="w"> </span><span class="m">2450000000</span><span class="w"> </span>&gt;<span class="w">  </span>out_altvoltage0_TRX_LO_frequency
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/bus/iio/devices/iio:device3$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat<span class="w"> </span>out_altvoltage0_TRX_LO_frequency
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select highlight-text notranslate"><div class="highlight"><pre><span></span>2450000000
</pre></div>
</div>
<div class="clear-left"></div></div></div><div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/bus/iio/devices/iio:device3$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat<span class="w"> </span>out_altvoltage1_TX_LO_frequency
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select highlight-text notranslate"><div class="highlight"><pre><span></span>2450000000
</pre></div>
</div>
<div class="clear-left"></div></div></div><section id="frequency-hopping-mode">
<h4>Frequency Hopping Mode<a class="headerlink" href="#frequency-hopping-mode" title="Link to this heading"></a></h4>
<p>The RF PLL in ADRV9009 has the ability to change frequency quickly to another
predetermined LO frequency set by the user via the customization interface. The
frequency hopping mode can be enabled using the
<code class="docutils literal notranslate"><span class="pre">out_altvoltage0_TRX_LO_frequency_hopping_mode_enable</span></code> channel attribute.</p>
<ul class="simple">
<li><p>out_altvoltage0_TRX_LO_frequency_hopping_mode_enable</p></li>
</ul>
<div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/bus/iio/devices/iio:device3$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat<span class="w"> </span>out_altvoltage0_TRX_LO_frequency_hopping_mode_enable
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select highlight-text notranslate"><div class="highlight"><pre><span></span>0
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/bus/iio/devices/iio:device3$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">echo</span><span class="w"> </span><span class="m">1</span><span class="w"> </span>&gt;<span class="w"> </span>out_altvoltage0_TRX_LO_frequency_hopping_mode_enable
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/bus/iio/devices/iio:device3$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat<span class="w"> </span>out_altvoltage0_TRX_LO_frequency_hopping_mode_enable
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select highlight-text notranslate"><div class="highlight"><pre><span></span>1
</pre></div>
</div>
<div class="clear-left"></div></div></div><section id="next-hop-frequency">
<h5>Next Hop Frequency<a class="headerlink" href="#next-hop-frequency" title="Link to this heading"></a></h5>
<p>The RF PLL in ADRV9009 has the ability to change frequency quickly to another
predetermined LO frequency set by the user via this attribute. There are two use
cases through which a user can control frequency hopping. <strong>GPIO</strong> mode, and
<strong>API</strong> mode. In order to use API mode device tree attribute:
<em>adi,fhm-mode-fhm-trigger-mode</em> must be set to 1, in case it’s set to 0 GPIO
mode is used and <em>adi,fhm-config-fhm-gpio-pin</em> must be in the range of 0..15.</p>
<ul class="simple">
<li><p>out_altvoltage0_TRX_LO_frequency_hopping_mode</p></li>
</ul>
<div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/bus/iio/devices/iio:device3$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat<span class="w"> </span>out_altvoltage0_TRX_LO_frequency_hopping_mode
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select highlight-text notranslate"><div class="highlight"><pre><span></span>2400000000
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/bus/iio/devices/iio:device3$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">echo</span><span class="w"> </span><span class="m">2460000000</span><span class="w"> </span>&gt;<span class="w"> </span>out_altvoltage0_TRX_LO_frequency_hopping_mode
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/bus/iio/devices/iio:device3$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat<span class="w"> </span>out_altvoltage0_TRX_LO_frequency_hopping_mode
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select highlight-text notranslate"><div class="highlight"><pre><span></span>2460000000
</pre></div>
</div>
<div class="clear-left"></div></div></div></section>
</section>
</section>
<section id="filter-and-signal-path-configuration">
<h3>Filter and Signal Path Configuration<a class="headerlink" href="#filter-and-signal-path-configuration" title="Link to this heading"></a></h3>
<section id="profiles">
<span id="iio-transceiver-adrv9009-profiles"></span><h4>Profiles<a class="headerlink" href="#profiles" title="Link to this heading"></a></h4>
<p>ADRV9009 uses profiles to designate different device configuration settings for
the Tx/Rx/ORx channels. When selecting a profile, note that Rx1 and Rx2 use the
same profile; Tx1 and Tx2 use the same profile; ORx1 and ORx2 use the same
profile. The profile dictates how the digital filters, analog filters, clock
rates, and clock dividers are configured in the device. Some specific parameters
set by profiles include the IQ data rate, ADC clock rate, analog filter corners,
FIR filter coefficients, and interpolation/decimation factors in the half band
filters. Several profiles can be examined in the ADRV9009 Transceiver Evaluation
Software for given device clock frequencies. If the desired profile exists in
the software, it is recommended to setup the desired profile in and use the data
structure values generated by the “Create Config.c File” button for the
Tx/Rx/ORx profile data structures. Custom profiles can be generated using other
ADI software tools not described here
<a class="icon adi reference external" href="https://www.analog.com/en/design-center/landing-pages/001/transceiver-evaluation-software.html">MATLAB Profile/Filter Generator for ADRV9009</a>.</p>
<section id="loading-a-profile">
<h5>Loading a Profile<a class="headerlink" href="#loading-a-profile" title="Link to this heading"></a></h5>
<div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>user@analog:~$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat<span class="w"> </span>Tx_BW200_IR245p76_Rx_BW200_OR245p76_ORx_BW200_OR245p76_DC245p76.txt<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>&gt;<span class="w"> </span>profile_config
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>user@analog:~$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="clear-left"></div></div></div></section>
</section>
<section id="rx-signal-path">
<h4>RX Signal Path<a class="headerlink" href="#rx-signal-path" title="Link to this heading"></a></h4>
<p>The ADRV9009 receiver contains all blocks necessary to receive RF signals and
convert them to digital data usable by a baseband processor (BBP). Each receiver
can be configured as a direct conversion system that supports up to 200MHz
bandwidth. Each receiver contains a programmable attenuator stage, followed by
matched in-phase (I) and quadrature (Q) mixers that down convert received
signals to baseband for digitization. Gain control can be achieved by using the
on-chip AGC or by letting the BBP make gain adjustments in a manual gain control
mode. Performance is optimized by mapping each gain control setting to specific
attenuation levels at each adjustable gain block in the receive signal path.
Additionally, each channel contains independent quadrature error correction
capability, dc offset tracking, and all circuitry necessary for self
calibration. The receivers include ADCs and adjustable sample rates that produce
data streams from the received signals. The signals can be conditioned further
by a series of decimation filters and a programmable FIR filter with additional
decimation settings. The sample rate of each digital filter block is adjustable
by changing decimation factors to produce the desired output data rate.</p>
<section id="querying-the-rx-sample-rate-and-primary-signal-bandwidth">
<h5>Querying the RX Sample Rate and Primary Signal Bandwidth<a class="headerlink" href="#querying-the-rx-sample-rate-and-primary-signal-bandwidth" title="Link to this heading"></a></h5>
<div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/bus/iio/devices/iio:device3$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat<span class="w"> </span>in_voltage0_sampling_frequency
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select highlight-text notranslate"><div class="highlight"><pre><span></span>122880000
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/bus/iio/devices/iio:device3$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat<span class="w"> </span>in_voltage0_rf_bandwidth
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select highlight-text notranslate"><div class="highlight"><pre><span></span>100000000
</pre></div>
</div>
<div class="clear-left"></div></div></div></section>
</section>
<section id="observation-rx-signal-path">
<span id="iio-transceiver-adrv9009-observation-rx-signal-path"></span><h4>Observation RX Signal Path<a class="headerlink" href="#observation-rx-signal-path" title="Link to this heading"></a></h4>
<p>The ADRV9009 contains an independent DPD observation receiver (ORx) front-end
with 2 multiplexed inputs and a common digital back-end that is shared with the
traffic receiver. The innovative configuration enables a highly efficient shared
Rx/ORx mode where the device can support fast switching between Rx and ORx mode
in TDD applications. The ORx shares the common frequency synthesizer with the
transmitter. The ORx is a direct conversion system that contains a programmable
attenuator stage, followed by matched in-phase (I) and quadrature (Q) mixers,
baseband filters and ADCs. The continuous-time sigma-delta ADCs have inherent
anti-aliasing which reduces the RF filtering requirement. The ADC outputs can be
conditioned further by a series of decimation filters and a programmable FIR
filter with additional decimation settings. The sample rate of each digital
filter block is adjustable by changing decimation factors to produce the desired
output data rate.</p>
<section id="querying-the-orx-sample-rate">
<h5>Querying the ORx Sample Rate<a class="headerlink" href="#querying-the-orx-sample-rate" title="Link to this heading"></a></h5>
<div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/bus/iio/devices/iio:device3$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat<span class="w"> </span>in_voltage2_sampling_frequency
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select highlight-text notranslate"><div class="highlight"><pre><span></span>245760000
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/bus/iio/devices/iio:device3$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat<span class="w"> </span>in_voltage2_rf_bandwidth
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select highlight-text notranslate"><div class="highlight"><pre><span></span>200000000
</pre></div>
</div>
<div class="clear-left"></div></div></div></section>
<section id="setting-the-observation-path-lo-source">
<h5>Setting the Observation Path LO Source<a class="headerlink" href="#setting-the-observation-path-lo-source" title="Link to this heading"></a></h5>
<p>This attribute sets the LO source for ORx to RFLO or AuxLO, but the setting does
not take effect until the ORx rising edge to power up the ORx channel(s). If the
LO source is changed while ORx is powered up, the LO source will not take effect
until ORx is disabled and re-enabled. This is valid when using pins to set the
LO source and control when ORx is enabled as well.</p>
<ul class="simple">
<li><p>OBS_TX_LO Selects RF PLL</p></li>
<li><p>OBS_AUX_LO Selects AUX PLL</p></li>
</ul>
<div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/bus/iio/devices/iio:device3$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat<span class="w"> </span>in_voltage_rf_port_select_available
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select highlight-text notranslate"><div class="highlight"><pre><span></span>OBS_TX_LO  OBS_AUX_LO
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/bus/iio/devices/iio:device3$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">echo</span><span class="w"> </span>OBS_TX_LO<span class="w"> </span>&gt;<span class="w"> </span>in_voltage2_rf_port_select
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/bus/iio/devices/iio:device3$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat<span class="w"> </span>in_voltage2_rf_port_select
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select highlight-text notranslate"><div class="highlight"><pre><span></span>OBS_TX_LO
</pre></div>
</div>
<div class="clear-left"></div></div></div></section>
</section>
<section id="tx-signal-path">
<span id="iio-transceiver-adrv9009-tx-signal-path"></span><h4>TX Signal Path<a class="headerlink" href="#tx-signal-path" title="Link to this heading"></a></h4>
<p>The ADRV9009 transmitter section consists of two identical and independently
controlled channels that provide all digital processing, mixed-signal, and RF
blocks necessary to implement a direct conversion system while sharing a common
frequency synthesizer. The digital data from the JESD204B lanes pass through a
fully programmable 128-tap FIR filter with variable interpolation rates. The FIR
output is sent to a series of interpolation filters that provide additional
filtering and interpolation prior to reaching the DAC. Each 14-bit DAC has an
adjustable sample rate. When converted to baseband analog signals, the I and Q
signals are filtered to remove sampling artifacts and fed to the upconversion
mixers. Each transmit chain provides a wide attenuation adjustment range with
fine granularity to help designers optimize signal-to-noise ratio (SNR).</p>
<section id="querying-the-tx-sample-rate-and-primary-signal-bandwidth">
<h5>Querying the TX Sample Rate and Primary Signal Bandwidth<a class="headerlink" href="#querying-the-tx-sample-rate-and-primary-signal-bandwidth" title="Link to this heading"></a></h5>
<div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/bus/iio/devices/iio:device3$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat<span class="w"> </span>out_voltage_sampling_frequency
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select highlight-text notranslate"><div class="highlight"><pre><span></span>245760000
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/bus/iio/devices/iio:device3$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat<span class="w"> </span>out_voltage0_rf_bandwidth
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select highlight-text notranslate"><div class="highlight"><pre><span></span>75000000
</pre></div>
</div>
<div class="clear-left"></div></div></div></section>
<section id="pa-protection">
<span id="iio-transceiver-adrv9009-pa-protection"></span><h5>PA Protection<a class="headerlink" href="#pa-protection" title="Link to this heading"></a></h5>
<div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/bus/iio/devices/iio:device3$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat<span class="w"> </span>out_voltage0_pa_protection_en
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select highlight-text notranslate"><div class="highlight"><pre><span></span>0
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/bus/iio/devices/iio:device3$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">echo</span><span class="w"> </span><span class="m">1</span><span class="w"> </span>&gt;<span class="w"> </span>out_voltage0_pa_protection_en
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/bus/iio/devices/iio:device3$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat<span class="w"> </span>out_voltage0_pa_protection_en
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select highlight-text notranslate"><div class="highlight"><pre><span></span>1
</pre></div>
</div>
<div class="clear-left"></div></div></div></section>
</section>
</section>
<section id="rx-gain-control">
<h3>RX Gain Control<a class="headerlink" href="#rx-gain-control" title="Link to this heading"></a></h3>
<p>The ADRV9009 Receivers (Rx1, Rx2) feature Automatic and Manual gain control
modes allowing for flexible gain control in a wide array of applications.
Automatic Gain Control (AGC) allows for receivers to autonomously adjust the
receiver gain depending on variations of the input signal, such as the onset of
a strong interferer that can overload the receiver data path. It controls the
gain of Talise based on the state of certain signals that are available as
inputs to the AGC block. The AGC has the ability to control Talise gain with
very fine resolution if required. The receivers are also capable of operating in
Manual Gain Control (MGC) mode where changes in gain are initiated by the
Baseband Processor (BBP). The Talise gain control blocks are configured by means
of the API data structures and several API functions exist to allow for user
interaction with the gain control mechanisms. There are three main gain control
modes available for the Talise receivers – Manual Gain Control (MGC), Automatic
Gain Control (AGC), Automatic Gain Control Fast (AGCFast).</p>
<p>The default gain tables can be found in the talise_user.c file, and are loaded
by default. Custom gain tables can be loaded automatically during driver probe
or anytime later via the write only gain_table_config sysfs attribute. Tables
must be stored in the /lib/firmware folder, or compiled into the kernel using
the CONFIG_FIRMWARE_IN_KERNEL, CONFIG_EXTRA_FIRMWARE config options. The table
loaded during driver probe can be specified using following device tree
property:</p>
<p><strong>adi,gaintable-name</strong> = “adrv9009_std_gaintable”;</p>
<p>In case no table is specified or loaded, the driver will continue to use the
provided standard gain tables.</p>
<p>Gain tables are stored in a human readable file, with the format specified
below.</p>
<p>Example: <a class="icon git reference external" href="https://github.com/analogdevicesinc/linux/tree/main/firmware/adrv9009_std_gaintable">firmware/adrv9009_std_gaintable</a></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;list&gt;
 &lt;gaintable ADRV9009 type=FULL dest=[0|1|2|3|4|5] start=FREQUENCY1_Hz end=FREQUENCY2_Hz&gt;
  gain_in_mdB, rxFeGain, extControl, adcTiaGain, digGain[, phaseOffset] /* index 255 */
  gain_in_mdB, rxFeGain, extControl, adcTiaGain, digGain[, phaseOffset] /* index 254 */
  gain_in_mdB, rxFeGain, extControl, adcTiaGain, digGain[, phaseOffset] /* index 253 */
  gain_in_mdB, rxFeGain, extControl, adcTiaGain, digGain[, phaseOffset] /* index 252 */

 …
 &lt;/gaintable&gt;

...

&lt;/list&gt;
</pre></div>
</div>
<p><strong>Assumptions:</strong>
* Gain tables must be monotonic</p>
<ul class="simple">
<li><p>The format of the columns in the Rx gain table rows are: { gain_in_mdB,
rxFeGain, extControl, adcTiaGain, digGain[, phaseOffset }</p></li>
<li><p>The format of the columns in the ORx gain table rows are: { gain_in_mdB,
rxFeGain, extControl, adcTiaGain, digGain }</p></li>
<li><p>gain_in_mdB: is the absolute Gain in mdB (signed int format)</p></li>
<li><p>end must be greater than start frequency (in Hz)</p></li>
<li><p>There must be sufficient tables provided to support the entire used tuning
range</p></li>
<li><p>dest specifies the targeted RX. (0=RX1, 1=RX2, 2=RX1 and RX2, 3=ORX1, 4=ORX2,
5=ORX1 and ORX2)</p></li>
</ul>
<section id="loading-a-gain-table">
<h4>Loading a gain table<a class="headerlink" href="#loading-a-gain-table" title="Link to this heading"></a></h4>
<div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/bus/iio/devices/iio:device3$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ls<span class="w"> </span>/lib/firmware/ad9*
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select highlight-text notranslate"><div class="highlight"><pre><span></span>adrv9009_std_gaintable
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/bus/iio/devices/iio:device3$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat<span class="w"> </span>/lib/firmware/adrv9009_std_gaintable<span class="w"> </span>&gt;<span class="w"> </span>gain_table_config
</pre></div>
</div>
<div class="clear-left"></div></div></div></section>
<section id="gain-control-modes">
<span id="iio-transceiver-adrv9009-gain-control-modes"></span><h4>Gain control modes<a class="headerlink" href="#gain-control-modes" title="Link to this heading"></a></h4>
<p>The ADRV9009 Rx supports four modes of gain control. These modes are described
in brief below:</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Mode</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Manual Gain Control (MGC)</p></td>
<td><p>Provides the user full control over the current gain index. In MGC, the
gain index can be controlled in two ways: through API commands and
through GPIO signaling.</p></td>
</tr>
<tr class="row-odd"><td><p>Automatic Gain Control (AGC)</p></td>
<td><p>The AGC will determine when gain changes should be made. There are
several configurations that can be used in AGC. Examples include the
option to reduce gain as soon as an overrange has been detected (fast
attack mode), change gain (if necessary) only at the expiry of a
variable length counter (AGC gain update counter, operating without
fast attack), synchronization of the counter to an external pulse (AGC
enable sync pulse), and others. .</p></td>
</tr>
<tr class="row-even"><td><p>Hybrid Mode</p></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Automatic Gain Control (AGC) and Hybrid Mode are only available on RX1 and
RX2</p>
<div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/bus/iio/devices/iio:device3$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat<span class="w"> </span>in_voltage_gain_control_mode_available
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select highlight-text notranslate"><div class="highlight"><pre><span></span>manual fast_attack slow_attack hybrid
</pre></div>
</div>
<div class="clear-left"></div></div></div></div>
</section>
<section id="querying-or-setting-a-gain-control-mode">
<h4>Querying or Setting a Gain Control Mode<a class="headerlink" href="#querying-or-setting-a-gain-control-mode" title="Link to this heading"></a></h4>
<div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/bus/iio/devices/iio:device3$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat<span class="w"> </span>in_voltage0_gain_control_mode
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select highlight-text notranslate"><div class="highlight"><pre><span></span>manual
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/bus/iio/devices/iio:device3$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">echo</span><span class="w"> </span>slow_attack<span class="w"> </span>&gt;<span class="w"> </span>in_voltage0_gain_control_mode
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/bus/iio/devices/iio:device3$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat<span class="w"> </span>in_voltage0_gain_control_mode
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select highlight-text notranslate"><div class="highlight"><pre><span></span>slow_attack
</pre></div>
</div>
<div class="clear-left"></div></div></div><div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/bus/iio/devices/iio:device3$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat<span class="w"> </span>in_voltage1_gain_control_mode
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select highlight-text notranslate"><div class="highlight"><pre><span></span>manual
</pre></div>
</div>
<div class="clear-left"></div></div></div></section>
<section id="reading-the-current-gain">
<h4>Reading the current Gain<a class="headerlink" href="#reading-the-current-gain" title="Link to this heading"></a></h4>
<p>Supported in all available Gain control modes</p>
<div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/bus/iio/devices/iio:device3$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat<span class="w"> </span>in_voltage0_hardwaregain
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select highlight-text notranslate"><div class="highlight"><pre><span></span>30.000000 dB
</pre></div>
</div>
<div class="clear-left"></div></div></div><div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/bus/iio/devices/iio:device3$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat<span class="w"> </span>in_voltage1_hardwaregain
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select highlight-text notranslate"><div class="highlight"><pre><span></span>30.000000 dB
</pre></div>
</div>
<div class="clear-left"></div></div></div></section>
<section id="mgc-setting-the-current-gain">
<span id="iio-transceiver-adrv9009-mgc-setting-the-current-gain"></span><h4>MGC setting the current Gain<a class="headerlink" href="#mgc-setting-the-current-gain" title="Link to this heading"></a></h4>
<p>Only available in Manual Gain Control Mode (MGC)</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Data Path</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>in_voltage0_hardwaregain</p></td>
<td><p><strong>RX1</strong></p></td>
</tr>
<tr class="row-odd"><td><p>in_voltage1_hardwaregain</p></td>
<td><p><strong>RX2</strong></p></td>
</tr>
<tr class="row-even"><td><p>in_voltage2_hardwaregain</p></td>
<td><p><strong>OBS1</strong> if <strong>in_voltage2_powerdown == 0</strong></p></td>
</tr>
<tr class="row-odd"><td><p>in_voltage3_hardwaregain</p></td>
<td><p><strong>OBS2</strong> if <strong>in_voltage3_powerdown == 0</strong></p></td>
</tr>
</tbody>
</table>
</div>
<div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/bus/iio/devices/iio:device3$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">echo</span><span class="w"> </span><span class="m">20</span><span class="w"> </span>&gt;<span class="w"> </span>in_voltage0_hardwaregain
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/bus/iio/devices/iio:device3$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat<span class="w"> </span>in_voltage0_hardwaregain
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select highlight-text notranslate"><div class="highlight"><pre><span></span>20.000000 dB
</pre></div>
</div>
<div class="clear-left"></div></div></div></section>
<section id="mgc-controlling-the-gain-using-pin-control">
<span id="iio-transceiver-adrv9009-mgc-controlling-the-gain-using-pin-control"></span><h4>MGC controlling the gain using pin control<a class="headerlink" href="#mgc-controlling-the-gain-using-pin-control" title="Link to this heading"></a></h4>
<p>These attributes configure the GPIO input pin and step size to allow the BBP to
control gain changes in Rx signal chain. A high pulse on the ‘rxGainIncPin’ in
pin control mode will increment the gain by the value set in ‘incStep’. A high
pulse on the ‘rxGainDecPin’ in pin control mode will decrement the gain by the
value set in ‘decStep’.</p>
<p>Writing 0, N or 1, Y to the below attributes either disables or enables the
corresponding channel pincontrol option.</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Data Path</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>in_voltage0_gain_control_pin_mode_en</p></td>
<td><p><strong>RX1</strong></p></td>
</tr>
<tr class="row-odd"><td><p>in_voltage1_gain_control_pin_mode_en</p></td>
<td><p><strong>RX2</strong></p></td>
</tr>
</tbody>
</table>
</div>
</section>
</section>
<section id="tx-attenuation-control">
<span id="iio-transceiver-adrv9009-tx-attenuation-control"></span><h3>Tx Attenuation Control<a class="headerlink" href="#tx-attenuation-control" title="Link to this heading"></a></h3>
<p>The TX attenuation/gain can be individually controlled for TX1 and TX2. The
range is from 0 to -41.95 dB in programmable steps sizes. The nomenclature used
here is gain instead of attenuation, so all values are expressed negative.</p>
<div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/bus/iio/devices/iio:device3$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat<span class="w"> </span>out_voltage0_hardwaregain
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select highlight-text notranslate"><div class="highlight"><pre><span></span>-10.000000 dB
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/bus/iio/devices/iio:device3$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">echo</span><span class="w"> </span>-40.25<span class="w"> </span>&gt;<span class="w"> </span>out_voltage0_hardwaregain
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/bus/iio/devices/iio:device3$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat<span class="w"> </span>out_voltage0_hardwaregain
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select highlight-text notranslate"><div class="highlight"><pre><span></span>-40.250000 dB
</pre></div>
</div>
<div class="clear-left"></div></div></div><div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/bus/iio/devices/iio:device3$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat<span class="w"> </span>out_voltage1_hardwaregain
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select highlight-text notranslate"><div class="highlight"><pre><span></span>-10.000000 dB
</pre></div>
</div>
<div class="clear-left"></div></div></div><section id="tx-attenuation-pin-control">
<span id="iio-transceiver-adrv9009-tx-attenuation-pin-control"></span><h4>Tx Attenuation Pin Control<a class="headerlink" href="#tx-attenuation-pin-control" title="Link to this heading"></a></h4>
<p>These attributes configure the GPIO input pin and step size to allow the BBP to
control attenuation changes in Tx signal chain. A high pulse on the
‘txAttenIncPin’ in pin control mode will increment the gain by the value set in
‘stepSize’. A high pulse on the ‘txAttenDecPin’ in pin control mode will
decrement the gain by the value set in ‘stepSize’.</p>
<p>Writing 0, N or 1, Y to the below attributes either disables or enables the
corresponding channel pincontrol option.</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Data Path</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>out_voltage0_atten_control_pin_mode_en</p></td>
<td><p><strong>TX1</strong></p></td>
</tr>
<tr class="row-odd"><td><p>out_voltage1_atten_control_pin_mode_en</p></td>
<td><p><strong>TX2</strong></p></td>
</tr>
</tbody>
</table>
</div>
</section>
</section>
<section id="received-strength-signal-indicator-rssi">
<span id="iio-transceiver-adrv9009-received-strength-signal-indicator-rssi"></span><h3>Received Strength Signal Indicator (RSSI)<a class="headerlink" href="#received-strength-signal-indicator-rssi" title="Link to this heading"></a></h3>
<p>This attribute will report RSSI - however currently it reports Decimated Power
instead.</p>
<div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/bus/iio/devices/iio:device3$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat<span class="w"> </span>in_voltage0_rssi
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select highlight-text notranslate"><div class="highlight"><pre><span></span>12.75 dB
</pre></div>
</div>
<div class="clear-left"></div></div></div></section>
<section id="calibration-tracking-controls">
<span id="iio-transceiver-adrv9009-calibration-tracking-controls"></span><h3>Calibration Tracking Controls<a class="headerlink" href="#calibration-tracking-controls" title="Link to this heading"></a></h3>
<p>Tracking Calibrations: The ARM processor is tasked with ensuring that Quadrature
Error Correction (QEC) and Local Oscillator Leakage (LOL) corrections are
optimal throughout device operation, i.e. over time, attenuation, and
temperature. It achieves this by performing calibrations at regular intervals.
These calibrations are termed “tracking calibrations”, and utilize normal
traffic data to update the path correction coefficients.</p>
<p>Writing 0, N or 1, Y to the below attributes either disables or enables the
corresponding tracking option.</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Data Path</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>in_voltage0_quadrature_tracking_en</p></td>
<td><p><strong>RX1</strong></p></td>
</tr>
<tr class="row-odd"><td><p>in_voltage1_quadrature_tracking_en</p></td>
<td><p><strong>RX2</strong></p></td>
</tr>
<tr class="row-even"><td><p>in_voltage2_quadrature_tracking_en</p></td>
<td><p><strong>ORX1</strong></p></td>
</tr>
<tr class="row-odd"><td><p>in_voltage3_quadrature_tracking_en</p></td>
<td><p><strong>ORX2</strong></p></td>
</tr>
<tr class="row-even"><td><p>out_voltage0_lo_leakage_tracking_en</p></td>
<td><p><strong>TX1</strong></p></td>
</tr>
<tr class="row-odd"><td><p>out_voltage0_quadrature_tracking_en</p></td>
<td><p><strong>TX1</strong></p></td>
</tr>
<tr class="row-even"><td><p>out_voltage1_lo_leakage_tracking_en</p></td>
<td><p><strong>TX2</strong></p></td>
</tr>
<tr class="row-odd"><td><p>out_voltage1_quadrature_tracking_en</p></td>
<td><p><strong>TX2</strong></p></td>
</tr>
</tbody>
</table>
</div>
<div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/bus/iio/devices/iio:device3$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat<span class="w"> </span>in_voltage_quadrature_tracking_en
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select highlight-text notranslate"><div class="highlight"><pre><span></span>1
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/bus/iio/devices/iio:device3$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">echo</span><span class="w"> </span><span class="m">0</span><span class="w"> </span>&gt;<span class="w"> </span>in_voltage0_quadrature_tracking_en
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/bus/iio/devices/iio:device3$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat<span class="w"> </span>in_voltage0_quadrature_tracking_en
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select highlight-text notranslate"><div class="highlight"><pre><span></span>0
</pre></div>
</div>
<div class="clear-left"></div></div></div></section>
<section id="arm-calibrations">
<span id="iio-transceiver-adrv9009-arm-calibrations"></span><h3>ARM Calibrations<a class="headerlink" href="#arm-calibrations" title="Link to this heading"></a></h3>
<p>Sometimes a certain calibration is not required during power-up, or some other
external condition must be met. The attributes detailed below allow the user to
reschedule a calibration. Please see <em>“SYSTEM CONSIDERATIONS FOR ARM
CALIBRATIONS”</em> section of the Talise User Guide for more information.</p>
<p>Writing 0, N or 1, Y to the below attributes either disables or enables the
corresponding init calibration. They are not run immediately, they are just
masked. In order to run them the <code class="docutils literal notranslate"><span class="pre">calibrate</span></code> attributes must be written 1 or
Y.</p>
<ul class="simple">
<li><p>calibrate_frm_en</p></li>
<li><p>calibrate_rx_phase_correction_en</p></li>
<li><p>calibrate_rx_qec_en</p></li>
<li><p>calibrate_tx_lol_en</p></li>
<li><p>calibrate_tx_lol_ext_en</p></li>
<li><p>calibrate_tx_qec_en</p></li>
<li><p>calibrate</p></li>
</ul>
<div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/bus/iio/devices/iio:device3$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat<span class="w"> </span>calibrate_tx_lol_ext_en
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select highlight-text notranslate"><div class="highlight"><pre><span></span>0
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/bus/iio/devices/iio:device3$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">echo</span><span class="w"> </span><span class="m">1</span><span class="w"> </span>&gt;<span class="w"> </span>calibrate_tx_lol_ext_en
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/bus/iio/devices/iio:device3$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat<span class="w"> </span>calibrate_tx_lol_ext_en
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select highlight-text notranslate"><div class="highlight"><pre><span></span>1
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/bus/iio/devices/iio:device3$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">echo</span><span class="w"> </span><span class="m">1</span><span class="w"> </span>&gt;<span class="w"> </span>calibrate
</pre></div>
</div>
<div class="clear-left"></div></div></div></section>
<section id="auxadc-reading">
<h3>AuxADC Reading<a class="headerlink" href="#auxadc-reading" title="Link to this heading"></a></h3>
<p>The ADRV9009 contains an auxiliary ADC that is multiplexed to 4 input pins
(AUXADC_x). The auxiliary ADC is 12 bits with an input voltage range of 0.05 V
to VDDA_3P3 – 0.05 V. When enabled, the auxiliary ADC is free running. SPI reads
provide the last value latched at the ADC output. TheAuxiliary ADCs can be read
like any other IIO ADC.</p>
<p>Attributes are:</p>
<ul class="simple">
<li><p>in_voltage[4..7]_offset</p></li>
<li><p>in_voltage[4..7]_raw</p></li>
<li><p>in_voltage[4..7]_scale</p></li>
</ul>
<p>To obtain the reading in mV calculate:
<code class="docutils literal notranslate"><span class="pre">(in_voltage4_raw</span> <span class="pre">+</span> <span class="pre">in_voltage4_offset)</span> <span class="pre">*</span> <span class="pre">in_voltage4_scale</span></code></p>
<div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/bus/iio/devices/iio:device3$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>grep<span class="w"> </span><span class="s2">&quot;&quot;</span><span class="w"> </span>in_voltage4_
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select highlight-text notranslate"><div class="highlight"><pre><span></span>in_voltage4_offset:45
in_voltage4_raw:66
in_voltage4_scale:0.775194
</pre></div>
</div>
<div class="clear-left"></div></div></div></section>
<section id="auxdac-writing">
<h3>AuxDAC Writing<a class="headerlink" href="#auxdac-writing" title="Link to this heading"></a></h3>
<p>The ADRV9009 contains ten identical auxiliary DACs (AUXDAC_0 to AUXDAC_9) that
can supply bias voltages, analog control voltages, or other system
functionality. TheAuxiliary DACs can be accessed like any other IIO DAC.</p>
<p>Attributes are:</p>
<ul class="simple">
<li><p>out_voltage[2..11]_raw</p></li>
<li><p>out_voltage[2..11]_offset</p></li>
<li><p>out_voltage[2..11]_scale</p></li>
</ul>
<div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/bus/iio/devices/iio:device3$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>grep<span class="w"> </span><span class="s2">&quot;&quot;</span><span class="w"> </span>out_voltage2
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select highlight-text notranslate"><div class="highlight"><pre><span></span>out_voltage2_offset: 2726
out_voltage2_raw:0
out_voltage2_scale: 0.782954
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/bus/iio/devices/iio:device3$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">echo</span><span class="w"> </span><span class="m">1000</span><span class="w"> </span>&gt;<span class="w"> </span>out_voltage2_raw
</pre></div>
</div>
<div class="clear-left"></div></div></div></section>
</section>
<section id="advanced-debug-facilities">
<h2>Advanced Debug Facilities<a class="headerlink" href="#advanced-debug-facilities" title="Link to this heading"></a></h2>
<p>The ADRV9009 driver supports a number of advanced debug controls via the kernel
<a class="reference external" href="https://en.wikipedia.org/wiki/debugfs">debugfs</a>. How these device
files/controls can be used is described here.
The <a class="reference internal" href="../../../../software/iio-oscilloscope/adrv9009/advanced-plugin.html#iio-oscilloscope-adrv9009-advanced-plugin"><span class="std std-ref">ADRV9009 Advanced Plugin</span></a>
directly controls these and adds a user friendly interface.</p>
<section id="runtime-device-driver-customization">
<h3>Runtime Device Driver Customization<a class="headerlink" href="#runtime-device-driver-customization" title="Link to this heading"></a></h3>
<p>There is a large number of <a class="reference internal" href="customization.html"><span class="doc">customization</span></a> options available.
Typically these are supplied via <a class="reference external" href="https://en.wikipedia.org/wiki/device_tree">Devicetree</a>.
However for debug and evaluation purposes these can be changed during runtime.
Please note that changes will be lost if the device is unbinded or the platform
is rebooted.
Changes will only take affect once the <code class="docutils literal notranslate"><span class="pre">initialize</span></code> attribute is written
<code class="docutils literal notranslate"><span class="pre">1</span></code>. It should also be noted that the ADRV9009 will take a RESET, so current
settings done via the main IIO API will be lost. Accessing
<a class="reference external" href="https://en.wikipedia.org/wiki/debugfs">debugfs</a> requires root privileges.
Only device files prefixed with <code class="docutils literal notranslate"><span class="pre">adi,</span></code> are
<a class="reference internal" href="customization.html"><span class="doc">customizable</span></a>.</p>
<p>In order to identify if the IIO device in question (adrv9009-phy) you first need
to identify the IIO device number. Therefore read the name attribute of each IIO
device</p>
<div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>root@analog:~$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>grep<span class="w"> </span><span class="s2">&quot;&quot;</span><span class="w"> </span>/sys/bus/iio/devices/iio<span class="se">\:</span>device*/name
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select highlight-text notranslate"><div class="highlight"><pre><span></span>/sys/bus/iio/devices/iio:device0/name:ams
/sys/bus/iio/devices/iio:device1/name:ad9528-1
/sys/bus/iio/devices/iio:device2/name:ad7291
/sys/bus/iio/devices/iio:device3/name:adrv9009-phy
/sys/bus/iio/devices/iio:device4/name:axi-adrv9009-rx-obs-hpc
/sys/bus/iio/devices/iio:device5/name:axi-adrv9009-tx-hpc
/sys/bus/iio/devices/iio:device6/name:axi-adrv9009-rx-hpc
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>root@analog:~$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="clear-left"></div></div></div><p>Change directory to <strong>/sys/kernel/debug</strong>/iio/ iio:deviceX.</p>
<div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>~$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>/sys/kernel/debug/iio/iio<span class="se">\:</span>device3
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/kernel/debug/iio/iio:device3$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ls
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select highlight-text notranslate"><div class="highlight"><pre><span></span>[--snip--]
adi,tx-settings-tx1-atten_md-b
adi,tx-settings-tx2-atten_md-b
adi,tx1-atten-ctrl-pin-enable
adi,tx1-atten-ctrl-pin-step-size
adi,tx1-atten-ctrl-pin-tx-atten-dec-pin
adi,tx1-atten-ctrl-pin-tx-atten-inc-pin
adi,tx2-atten-ctrl-pin-enable
adi,tx2-atten-ctrl-pin-step-size
adi,tx2-atten-ctrl-pin-tx-atten-dec-pin
adi,tx2-atten-ctrl-pin-tx-atten-inc-pin
bist_framer_a_prbs
bist_framer_b_prbs
bist_tone
direct_reg_access
initialize
</pre></div>
</div>
<div class="clear-left"></div></div></div><section id="example-to-change-from-internal-to-external-tx-lo">
<h4>Example to change from internal to external TX LO<a class="headerlink" href="#example-to-change-from-internal-to-external-tx-lo" title="Link to this heading"></a></h4>
<div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/kernel/debug/iio/iio:device3$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat<span class="w"> </span>adi,dig-clocks-rf-pll-use-external-lo
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select highlight-text notranslate"><div class="highlight"><pre><span></span>0
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/kernel/debug/iio/iio:device3$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">echo</span><span class="w"> </span><span class="m">1</span><span class="w"> </span>&gt;<span class="w"> </span>adi,dig-clocks-rf-pll-use-external-lo
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/kernel/debug/iio/iio:device3$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">echo</span><span class="w"> </span><span class="m">1</span><span class="w"> </span>&gt;<span class="w"> </span>initialize
</pre></div>
</div>
<div class="clear-left"></div></div></div></section>
</section>
<section id="build-in-self-test-bist">
<h3>Build-In Self-Test (BIST)<a class="headerlink" href="#build-in-self-test-bist" title="Link to this heading"></a></h3>
<p>Controling these attribute files directly take effect and therefore don’t
require the <code class="docutils literal notranslate"><span class="pre">initialize</span></code> sequence. Test functionality exposed here is only
meant to route or inject test patterns/data than can be used to validate the
Digital Interface or functionality of the device.</p>
<section id="bist-tone">
<h4>BIST Tone<a class="headerlink" href="#bist-tone" title="Link to this heading"></a></h4>
<p>Digital numerically controlled oscillator (NCO) to create a CW test tone on the
Tx1 and Tx2 RF outputs. The TxAttenuation is forced in this function to max
analog output power, but the digital attenuation is backed off 6dB to make sure
the digital filter does not clip and cause spurs in the tx spectrum.</p>
<p><strong>SYNTAX:</strong></p>
<p><strong>bist_tone</strong> <em>&lt;Enable&gt; &lt;TX1 Tone Frequency in kHz&gt; &lt;TX2 Tone Frequency in kHz&gt;</em></p>
<p><strong>NCO Tone frequency Valid range from -IQrate/2 to IQrate/2</strong></p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Enable</p></th>
<th class="head"></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Value</p></td>
<td><p>Function</p></td>
</tr>
<tr class="row-odd"><td><p>0</p></td>
<td><p>Disable</p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>Enable</p></td>
</tr>
</tbody>
</table>
</div>
<p><strong>Example</strong>: Inject 3MHz tone into TX1 and 5MHz into TX2</p>
<div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/kernel/debug/iio/iio:device3$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">echo</span><span class="w"> </span><span class="m">5</span><span class="w"> </span>&gt;<span class="w"> </span>bist_framer_a_prbs
</pre></div>
</div>
<div class="clear-left"></div></div></div></section>
<section id="prbs">
<h4>PRBS<a class="headerlink" href="#prbs" title="Link to this heading"></a></h4>
<p>Pseudorandom Binary Sequence
(<a class="reference external" href="https://en.wikipedia.org/wiki/Pseudorandom_binary_sequence">PRBS</a>) that can
either injected into the RX or OBS path.</p>
<p><strong>SYNTAX:</strong></p>
<div class="line-block">
<div class="line"><strong>bist_framer_a_prbs</strong> <em>&lt;Value&gt;</em></div>
<div class="line"><strong>bist_framer_b_prbs</strong> <em>&lt;Value&gt;</em></div>
<div class="line"><strong>bist_serializer_a_prbs</strong> <em>&lt;Value&gt;</em></div>
<div class="line"><strong>bist_serializer_b_prbs</strong> <em>&lt;Value&gt;</em></div>
</div>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Injection Point Framer A/B</p></th>
<th class="head"></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Value</p></td>
<td><p>Function and polynomial order</p></td>
</tr>
<tr class="row-odd"><td><p>ADC_DATA</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p>CHECKERBOARD</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-odd"><td><p>TOGGLE0_1</p></td>
<td><p>2</p></td>
</tr>
<tr class="row-even"><td><p>PRBS31</p></td>
<td><p>3</p></td>
</tr>
<tr class="row-odd"><td><p>PRBS23</p></td>
<td><p>4</p></td>
</tr>
<tr class="row-even"><td><p>PRBS15</p></td>
<td><p>5</p></td>
</tr>
<tr class="row-odd"><td><p>PRBS9</p></td>
<td><p>6</p></td>
</tr>
<tr class="row-even"><td><p>PRBS7</p></td>
<td><p>7</p></td>
</tr>
<tr class="row-odd"><td><p>RAMP</p></td>
<td><p>8</p></td>
</tr>
<tr class="row-even"><td><p>PATTERN_REPEAT</p></td>
<td><p>14</p></td>
</tr>
<tr class="row-odd"><td><p>PATTERN_ONCE</p></td>
<td><p>15</p></td>
</tr>
</tbody>
</table>
</div>
<p><strong>Example</strong>: Inject PRBS15 into RX</p>
<div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/kernel/debug/iio/iio:device3$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">echo</span><span class="w"> </span><span class="m">5</span><span class="w"> </span>&gt;<span class="w"> </span>bist_framer_a_prbs
</pre></div>
</div>
<div class="clear-left"></div></div></div></section>
<section id="loopback">
<h4>Loopback<a class="headerlink" href="#loopback" title="Link to this heading"></a></h4>
<p>Deframer framer loopback. Injects TX data back into the digital RX path, while
bypassing all the analog and converter sections.</p>
<p><strong>SYNTAX:</strong></p>
<div class="line-block">
<div class="line"><strong>bist_framer_a_loopback</strong> <em>&lt;Value&gt;</em></div>
<div class="line"><strong>bist_framer_b_loopback</strong> <em>&lt;Value&gt;</em></div>
</div>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Enable</p></th>
<th class="head"></th>
</tr>
<tr class="row-even"><th class="head"><p>Value</p></th>
<th class="head"><p>Function</p></th>
</tr>
</thead>
<tbody>
<tr class="row-odd"><td><p>0</p></td>
<td><p>Disable</p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>Enable</p></td>
</tr>
</tbody>
</table>
</div>
<p><strong>Example</strong>: Enable framer A loopback</p>
<div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/kernel/debug/iio/iio:device3$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">echo</span><span class="w"> </span><span class="m">1</span><span class="w"> </span>&gt;<span class="w"> </span>bist_framer_a_loopback
</pre></div>
</div>
<div class="clear-left"></div></div></div></section>
</section>
<section id="gpio-3v3-controls">
<h3>GPIO 3v3 Controls<a class="headerlink" href="#gpio-3v3-controls" title="Link to this heading"></a></h3>
<p>This attribute allows controlling the 12 GPIO3v3 via debugfs. In order to use
these pins, the adi,gpio3v3-source-control attribute must be set. Please refer
to the reference manual UG-1295. In addition, dedicated output pins must be
masked via adi,gpio3v3-output-enable-mask.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">adi</span><span class="p">,</span><span class="n">gpio3v3</span><span class="o">-</span><span class="n">source</span><span class="o">-</span><span class="n">control</span> <span class="o">=</span> <span class="o">&lt;</span><span class="mh">0x333</span><span class="o">&gt;</span><span class="p">;</span>
<span class="n">adi</span><span class="p">,</span><span class="n">gpio3v3</span><span class="o">-</span><span class="n">output</span><span class="o">-</span><span class="n">enable</span><span class="o">-</span><span class="n">mask</span> <span class="o">=</span> <span class="o">&lt;</span><span class="mh">0xFFF</span><span class="o">&gt;</span><span class="p">;</span>
<span class="n">adi</span><span class="p">,</span><span class="n">gpio3v3</span><span class="o">-</span><span class="n">output</span><span class="o">-</span><span class="n">level</span><span class="o">-</span><span class="n">mask</span> <span class="o">=</span> <span class="o">&lt;</span><span class="mh">0x0</span><span class="o">&gt;</span><span class="p">;</span>
</pre></div>
</div>
<p>For test purposes these attributes can be also set via debugfs.</p>
<div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>~$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>/sys/kernel/debug/iio/iio:device3
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/kernel/debug/iio/iio:device3$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">echo</span><span class="w"> </span>0x333<span class="w"> </span>&gt;<span class="w"> </span>adi,gpio3v3-source-control
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/kernel/debug/iio/iio:device3$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">echo</span><span class="w"> </span>0xFFF<span class="w"> </span>&gt;<span class="w"> </span>adi,gpio3v3-output-enable-mask
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/kernel/debug/iio/iio:device3$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">echo</span><span class="w"> </span><span class="m">1</span><span class="w"> </span>&gt;<span class="w"> </span>initialize
</pre></div>
</div>
<div class="clear-left"></div></div></div><p>The gpio3v3 debugfs control allows setting individual GPIOs by number 0…11. Or
altogether using the 0xFFF mask. GPIOs masked as inputs can also be read.</p>
<p><strong>SYNTAX</strong>:</p>
<div class="line-block">
<div class="line"><strong>gpio3v3</strong> <em>&lt;Identifier&gt;</em> <em>&lt;Value&gt;</em></div>
</div>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Enable</p></th>
<th class="head"></th>
</tr>
<tr class="row-even"><th class="head"><p>Value</p></th>
<th class="head"><p>Function</p></th>
</tr>
</thead>
<tbody>
<tr class="row-odd"><td><p>0</p></td>
<td><p>Disable</p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>Enable</p></td>
</tr>
<tr class="row-odd"><td><p>X</p></td>
<td><p>Enable Mask if Identifier=0xFFF</p></td>
</tr>
</tbody>
</table>
</div>
<p><strong>Example</strong>:</p>
<div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/kernel/debug/iio/iio:device3$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">echo</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">1</span><span class="w"> </span>&gt;<span class="w"> </span>gpio3v3
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/kernel/debug/iio/iio:device3$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">echo</span><span class="w"> </span>0xFFF<span class="w"> </span>0x123<span class="w"> </span>&gt;<span class="w"> </span>gpio3v3
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/kernel/debug/iio/iio:device3$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">echo</span><span class="w"> </span>0xFFF<span class="w"> </span>0x0<span class="w"> </span>&gt;<span class="w"> </span>gpio3v3
</pre></div>
</div>
<div class="clear-left"></div></div></div></section>
</section>
<section id="low-level-register-access-via-debugfs-direct-reg-access">
<h2>Low level register access via debugfs (direct_reg_access)<a class="headerlink" href="#low-level-register-access-via-debugfs-direct-reg-access" title="Link to this heading"></a></h2>
<p>Some IIO drivers feature an optional debug facility, allowing users to read or
write registers directly. Special care needs to be taken when using this
feature, since you can modify registers on the back of the driver.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>To simplify direct register access you may want to use the libiio
<a class="reference internal" href="../../../../software/libiio/cli.html#libiio-cli"><span class="std std-ref">Libiio command line utility</span></a>.</p>
</div>
<p>Accessing debugfs requires root privileges.</p>
<p>In order to identify if the IIO device in question feature this option you first
need to identify the IIO device number.</p>
<p>Therefore read the name attribute of each IIO device</p>
<div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>~$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>grep<span class="w"> </span><span class="s2">&quot;&quot;</span><span class="w"> </span>/sys/bus/iio/devices/iio<span class="se">\:</span>device*/name
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select highlight-text notranslate"><div class="highlight"><pre><span></span>/sys/bus/iio/devices/iio:device0/name:ad7291
/sys/bus/iio/devices/iio:device1/name:ad9361-phy
/sys/bus/iio/devices/iio:device2/name:xadc
/sys/bus/iio/devices/iio:device3/name:adf4351-udc-rx-pmod
/sys/bus/iio/devices/iio:device4/name:adf4351-udc-tx-pmod
/sys/bus/iio/devices/iio:device5/name:cf-ad9361-dds-core-lpc
/sys/bus/iio/devices/iio:device6/name:cf-ad9361-lpc
</pre></div>
</div>
<div class="clear-left"></div></div></div><p>Change directory to <strong>/sys/kernel/debug</strong>/iio/ iio:deviceX and check if the
direct_reg_access file exists.</p>
<div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>~$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>/sys/kernel/debug/iio/iio<span class="se">\:</span>device1
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/kernel/debug/iio/iio:device1$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ls<span class="w"> </span>direct_reg_access
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select highlight-text notranslate"><div class="highlight"><pre><span></span>direct_reg_access
</pre></div>
</div>
<div class="clear-left"></div></div></div><p><strong>Reading</strong></p>
<div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/kernel/debug/iio/iio:device1$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">echo</span><span class="w"> </span>0x7<span class="w"> </span>&gt;<span class="w"> </span>direct_reg_access
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/kernel/debug/iio/iio:device1$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat<span class="w"> </span>direct_reg_access
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select highlight-text notranslate"><div class="highlight"><pre><span></span>0x40
</pre></div>
</div>
<div class="clear-left"></div></div></div><p><strong>Writing</strong></p>
<div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/kernel/debug/iio/iio:device1$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">echo</span><span class="w"> </span>0x7<span class="w"> </span>0x50<span class="w">  </span>&gt;<span class="w"> </span>direct_reg_access
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/kernel/debug/iio/iio:device1$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat<span class="w"> </span>direct_reg_access
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select highlight-text notranslate"><div class="highlight"><pre><span></span>0x50
</pre></div>
</div>
<div class="clear-left"></div></div></div><p><strong>Accessing HDL CORE registers</strong></p>
<p>Special ADI device driver convention for devices that have both:</p>
<ul class="simple">
<li><p>a SPI/I2C control interface</p></li>
<li><p>and some sort of HDL Core with registers (AXI)</p></li>
</ul>
<p>In this case when accessing the HDL Core Registers always set BIT31.</p>
<p>The register map for ADI HDL cores can be found at section “Register Map”
of each <a class="reference external" href="https://analogdevicesinc.github.io/hdl/library/index.html#library" title="(in HDL)"><span>IP Cores</span></a> documentation
(<a class="reference external" href="https://analogdevicesinc.github.io/hdl/library/i3c_controller/i3c_controller_host_interface.html#i3c-controller-regmap" title="(in HDL)"><span class="xref std std-ref">example</span></a>).</p>
<div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/kernel/debug/iio/iio:device6$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">echo</span><span class="w"> </span>0x80000000<span class="w"> </span>&gt;<span class="w"> </span>direct_reg_access
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>/sys/kernel/debug/iio/iio:device6$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat<span class="w"> </span>direct_reg_access
</pre></div>
</div>
<div class="clear-left"></div></div><div><div class="no-select highlight-text notranslate"><div class="highlight"><pre><span></span>0x80062
</pre></div>
</div>
<div class="clear-left"></div></div></div></section>
</section>


          </div>
              <div class="related">
                &nbsp;
    <a href="../index.html" title="Previous document (Alt+Shift+LeftArrow)" class="prev">IIO Transceivers</a>
    <a href="customization.html" title="Next document (Alt+Shift+RightArrow)" class="next">ADRV9009/ADRV9008 Device Driver Customization</a>
              </div>
          
        </div>
      </div>
  </div>

  <label id="cancel-area-show-toc" for="input-show-toc"></label>
  <label id="cancel-area-show-localtoc" for="input-show-localtoc"></label>
    <footer>
      &#169;2024, Analog Devices, Inc.
      
      |
      Made with <a href="https://www.sphinx-doc.org/">Sphinx</a>
      &amp; <a href="https://github.com/analogdevicesinc/doctools">Doctools</a>
      
    </footer>
  </body>
</html>