<!DOCTYPE html>

<html lang="en" data-content_root="../../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Custom Device Trees with DTG (meta-adi Bypass) &#8212; System Level Documentation  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=8e8a900e" />
    <link rel="stylesheet" type="text/css" href="../../../_static/app.min.css?v=c218d0f6" />
    <script defer="" src="../../../_static/app.umd.js?v=5e042acc"></script>
    <link rel="icon" href="../../../_static/icon.svg"/>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Device Tree Modifications with system-user.dtsi" href="petalinux-system-user.html" />
    <link rel="prev" title="Custom Device Trees with meta-adi" href="petalinux-custom-dts.html" />
   
  
  <meta name="repository" content="documentation">
  <meta name="version" content="">
  
    <meta name="page_source_suffix" content=".rst">
  
  


<style>
  body {
    
  }

  body.dark {
    
  }

  @media (prefers-color-scheme: dark) {
    body:not(.light) {
      
    }
  }
</style>
  </head><body>
  <input type="checkbox" id="input-show-toc">
  <input type="checkbox" id="input-show-localtoc">
  <input type="checkbox" id="input-show-repotoc">

  
  <div class="search-area">
    <form action="" method="get">
      <input type="text" name="q" aria-labelledby="search-documentation" value="" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="search" placeholder="Search"/>
      <button class="icon"></button>
    </form>
  </div>
  

  <header>
    <div id="left">
      <label id="show-sidebar" class="icon" for="input-show-toc" title="Show/hide index"></label>
    </div>
    <div id="right">
      <span>
        <a id="logo-org" href="https://analog.com"></a>
        <div class="vertical-divider"></div>
        <label id="show-repotoc" for="input-show-repotoc" title="Show/hide docs" tabindex="0">Docs</label>
        <a id="logo" href="../../../index.html">
          <div>System Level</div>
        </a>
      </span>
      <span class="reverse">
        <label id="show-localtoc" class="icon" for="input-show-localtoc" title="Show/hide contents"></label>
      </span>
    </div>
  </header>


  <div class="repotoc-tree overlay">
    <root>
  <a href="../../../index.html" class="current">System Level</a>
</root>

  </div>
    <div class="localtoc">
      <div class="tocwrapper">
        <div>
          <div class="localtoc-header"></div>
          <a id="scroll-up" href="#top-anchor" title="Back to top"></a>
        </div>
        <nav>
          <ul>
<li><a class="reference internal" href="#">Custom Device Trees with DTG (meta-adi Bypass)</a><ul>
<li><a class="reference internal" href="#bypass-meta-adi-s-device-trees">1. Bypass meta-adi’s Device trees</a></li>
<li><a class="reference internal" href="#select-petalinux-template">2. Select Petalinux Template</a></li>
<li><a class="reference internal" href="#disabling-pl-node-generation">3. Disabling PL Node Generation</a></li>
<li><a class="reference internal" href="#adding-custom-device-trees">4. Adding Custom Device Trees</a></li>
</ul>
</li>
</ul>

        </nav>
      </div>
    </div>

  
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
    <a id="no-logo" href="../../../index.html">
      System Level Documentation
    </a><input id="input-switch-toc" type="checkbox">
<label id="show-repotoc" for="input-switch-toc">
All content
</label>
<label id="show-toc" for="input-switch-toc">
Content on this topic
</label>
<div class="repotoc-tree">
  <root>
  <a href="../../../index.html" class="current">System Level</a>
</root>

</div>
<div class="toc-tree">
  <html>
  <body><p class="caption" role="heading"><span class="caption-text">Kuiper &amp; Linux Kernel</span></p>
<ul class="current">
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-1" id="toctree-collapse-1"/><div class="collapse"><a class="reference internal" href="../../drivers/index.html">Linux drivers</a><label for="toctree-collapse-1"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-1-1" id="toctree-collapse-1-1"/><div class="collapse"><a class="reference internal" href="../../drivers/iio-adc/index.html">IIO ADC</a><label for="toctree-collapse-1-1"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../drivers/iio-adc/ad4052/index.html">AD4052</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../drivers/iio-adc/ad9084/index.html">AD9084/AD9088</a></li>
</ul>
</li>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-1-2" id="toctree-collapse-1-2"/><div class="collapse"><a class="reference internal" href="../../drivers/iio-transceiver/index.html">IIO Transceivers</a><label for="toctree-collapse-1-2"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-1-2-1" id="toctree-collapse-1-2-1"/><div class="collapse"><a class="reference internal" href="../../drivers/iio-transceiver/adrv9009/index.html">ADRV9009, ADRV9008-1, ADRV9008-2</a><label for="toctree-collapse-1-2-1"><div class="icon"></div></label></div><ul>
<li class="toctree-l4"><a class="reference internal" href="../../drivers/iio-transceiver/adrv9009/customization.html">Customization</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-1-3" id="toctree-collapse-1-3"/><div class="collapse"><a class="reference internal" href="../../drivers/iio/index.html">Linux Industrial I/O Subsystem</a><label for="toctree-collapse-1-3"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../drivers/iio/iio-trig-sysfs.html">iio-trig-sysfs driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../drivers/iio/iio-trig-bfin-timer.html">iio-trig-bfin-timer driver</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-2" id="toctree-collapse-2" checked=""/><div class="collapse"><a class="reference internal" href="../index.html">Kernel and devicetrees</a><label for="toctree-collapse-2"><div class="icon"></div></label></div><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../zynq.html">Build Zynq</a></li>
<li class="toctree-l2"><a class="reference internal" href="../zynqmp.html">Build ZynqMP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../microblaze.html">Build MicroBlaze</a></li>
<li class="toctree-l2 current"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-2-1" id="toctree-collapse-2-1" checked=""/><div class="collapse"><a class="reference internal" href="../petalinux.html">Build with Petalinux</a><label for="toctree-collapse-2-1"><div class="icon"></div></label></div><ul class="current">
<li class="toctree-l3 current"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-2-1-1" id="toctree-collapse-2-1-1" checked=""/><div class="collapse"><a class="reference internal" href="index.html">Petalinux Device Trees</a><label for="toctree-collapse-2-1-1"><div class="icon"></div></label></div><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="petalinux-custom-dts.html">Custom Device Trees with meta-adi</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Custom Device Trees with DTG (meta-adi Bypass)</a></li>
<li class="toctree-l4"><a class="reference internal" href="petalinux-system-user.html">Device Tree Modifications with system-user.dtsi</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-3" id="toctree-collapse-3"/><div class="collapse"><a class="reference internal" href="../../kuiper/index.html">Kuiper Linux</a><label for="toctree-collapse-3"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../../kuiper/release-notes.html">Release notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../kuiper/sdcard/index.html">SD Card flashing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../kuiper/project-list.html">Project list</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../kuiper/update.html">Updating</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Software</span></p>
<ul>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-4" id="toctree-collapse-4"/><div class="collapse"><a class="reference internal" href="../../../software/iio-oscilloscope/index.html">IIO Oscilloscope</a><label for="toctree-collapse-4"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-4-1" id="toctree-collapse-4-1"/><div class="collapse"><a class="reference internal" href="../../../software/iio-oscilloscope/adrv9009/index.html">ADRV9009</a><label for="toctree-collapse-4-1"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../software/iio-oscilloscope/adrv9009/plugin.html">Standard Plugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../software/iio-oscilloscope/adrv9009/advanced-plugin.html">Advanced plugin</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-5" id="toctree-collapse-5"/><div class="collapse"><a class="reference internal" href="../../../software/libiio/index.html">Libiio</a><label for="toctree-collapse-5"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../software/libiio/internals.html">About libiio</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../software/libiio/cli.html">Command line utility</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../software/libiio/tips-tricks.html">Tips &amp; Tricks</a></li>
</ul>
</li>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-6" id="toctree-collapse-6"/><div class="collapse"><a class="reference internal" href="../../../software/libm2k/index.html">Libm2k</a><label for="toctree-collapse-6"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../software/libm2k/calibration.html">Calibration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../software/libm2k/digital_communication.html">Digital communication</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../software/libm2k/m2kcli.html">Command line utility</a></li>
</ul>
</li>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-7" id="toctree-collapse-7"/><div class="collapse"><a class="reference internal" href="../../../software/matlab/index.html">MATLAB &amp; Simulink Toolboxes</a><label for="toctree-collapse-7"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../software/matlab/hsx-toolbox/index.html">High Speed Converter Toolbox</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../software/matlab/transceiver-toolbox/index.html">Transceiver Toolbox</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../software/matlab/bsp-extend.html">Extending Device Interfaces</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../software/pyadi-iio/index.html">PyADI-IIO</a></li>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-8" id="toctree-collapse-8"/><div class="collapse"><a class="reference internal" href="../../../software/zephyr/index.html">Zephyr RTOS</a><label for="toctree-collapse-8"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../software/zephyr/zephyr-devicetree.html">Intro to Devicetree</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../software/zephyr/kconfig/zephyr-kconfig.html">Introduction to Kconfig</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../software/zephyr/using-zephyr-codefusion-fs/zephyr_codefusion_fs.html">Using Zephyr &amp; Codefusion Studio to Partition a Flash Filesystem</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Evaluation Boards</span></p>
<ul>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-9" id="toctree-collapse-9"/><div class="collapse"><a class="reference internal" href="../../../eval/user-guide/index.html">User guides</a><label for="toctree-collapse-9"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-9-1" id="toctree-collapse-9-1"/><div class="collapse"><a class="reference internal" href="../../../eval/user-guide/adc/ad4052-ardz/index.html">EVAL-AD4050/AD4052-ARDZ</a><label for="toctree-collapse-9-1"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../eval/user-guide/adc/ad4052-ardz/user-guide.html">Evaluating the device</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../eval/user-guide/adc/ad9084-ebz/index.html">EVAL-AD9084-EBZ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../eval/user-guide/mem/adxl355-pmdz/index.html">EVAL-ADXL355-PMDZ</a></li>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-9-2" id="toctree-collapse-9-2"/><div class="collapse"><a class="reference internal" href="../../../eval/user-guide/transceiver/adrv9009/index.html">ADRV9009 &amp; ADRV9008</a><label for="toctree-collapse-9-2"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../eval/user-guide/transceiver/adrv9009/prerequisites.html">Prerequisites</a></li>
<li class="toctree-l3"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-9-2-1" id="toctree-collapse-9-2-1"/><div class="collapse"><a class="reference internal" href="../../../eval/user-guide/transceiver/adrv9009/quickstart/index.html">Quickstart</a><label for="toctree-collapse-9-2-1"><div class="icon"></div></label></div><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../eval/user-guide/transceiver/adrv9009/quickstart/zynqmp.html">ZCU102</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../eval/user-guide/transceiver/adrv9009/basic-iq-datafiles.html">Basic IQ Datafiles</a></li>
</ul>
</li>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-9-3" id="toctree-collapse-9-3"/><div class="collapse"><a class="reference internal" href="../../../eval/user-guide/transceiver/adrv9026/index.html">ADRV9026 &amp; ADRV9029</a><label for="toctree-collapse-9-3"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../eval/user-guide/transceiver/adrv9026/prerequisites.html">Prerequisites</a></li>
<li class="toctree-l3"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-9-3-1" id="toctree-collapse-9-3-1"/><div class="collapse"><a class="reference internal" href="../../../eval/user-guide/transceiver/adrv9026/quickstart/index.html">Quickstart</a><label for="toctree-collapse-9-3-1"><div class="icon"></div></label></div><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../eval/user-guide/transceiver/adrv9026/quickstart/zynqmp.html">ZCU102</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../eval/user-guide/transceiver/adrv9026/quickstart/versal.html">VCK190</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Products &amp; Tools</span></p>
<ul>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-10" id="toctree-collapse-10"/><div class="collapse"><a class="reference internal" href="../../../tools/m2k/index.html">ADALM2000</a><label for="toctree-collapse-10"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../tools/m2k/devs/index.html">For Developers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../tools/m2k/users/index.html">For End Users</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../tools/m2k/help_support.html">Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../tools/m2k/labview.html">Using With LabVIEW</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../tools/m2k/matlab.html">Using with MATLAB</a></li>
</ul>
</li>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-11" id="toctree-collapse-11"/><div class="collapse"><a class="reference internal" href="../../../tools/pluto-m2k/index.html">Common PLUTO&amp;M2K</a><label for="toctree-collapse-11"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../tools/pluto-m2k/building_the_image.html">Building the Firmware Image</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../tools/pluto-m2k/drivers.html">Installing Drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../tools/pluto-m2k/firmware.html">Firmware Updates</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../tools/pluto-m2k/obtaining_the_sources.html">Obtaining the Build Sources</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../tools/pluto-m2k/reboot.html">Rebooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../tools/pluto-m2k/usb_otg_host.html">USB OTG – HOST function Support</a></li>
</ul>
</li>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-12" id="toctree-collapse-12"/><div class="collapse"><a class="reference internal" href="../../../tools/pluto/index.html">ADALM-PLUTO</a><label for="toctree-collapse-12"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-12-1" id="toctree-collapse-12-1"/><div class="collapse"><a class="reference internal" href="../../../tools/pluto/devs/index.html">For Developers</a><label for="toctree-collapse-12-1"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../tools/pluto/devs/usb_otg.html">USB OTG</a></li>
</ul>
</li>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-12-2" id="toctree-collapse-12-2"/><div class="collapse"><a class="reference internal" href="../../../tools/pluto/hacking/index.html">For Hackers</a><label for="toctree-collapse-12-2"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../tools/pluto/hacking/hardware.html">ADALM-PLUTO Hardware</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../tools/pluto/hacking/listening_to_yourself.html">Self Reception</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../tools/pluto/hacking/power_amp.html">Controlling External Devices</a></li>
</ul>
</li>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-12-3" id="toctree-collapse-12-3"/><div class="collapse"><a class="reference internal" href="../../../tools/pluto/users/index.html">For End Users</a><label for="toctree-collapse-12-3"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../tools/pluto/users/antennas.html">Antennas</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../tools/pluto/help_support.html">Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../tools/pluto/prerequisites.html">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../tools/pluto/transceiver_transferring_data.html">Controlling the transceiver and transferring data</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../tools/uartjtag/index.html">ADALM-UARTJTAG</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Apps &amp; Solutions</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../solutions/application-software/index.html">Application Software</a></li>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-13" id="toctree-collapse-13"/><div class="collapse"><a class="reference internal" href="../../../solutions/reference-designs/index.html">Reference Designs</a><label for="toctree-collapse-13"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-13-1" id="toctree-collapse-13-1"/><div class="collapse"><a class="reference internal" href="../../../solutions/reference-designs/ad-amr-bms-sl/index.html">AD-AMR-BMS-SL (partno TBD)</a><label for="toctree-collapse-13-1"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../solutions/reference-designs/ad-amr-bms-sl/od.html">AD-AMR-BMS-SL CANopen Object Dictionary</a></li>
</ul>
</li>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-13-2" id="toctree-collapse-13-2"/><div class="collapse"><a class="reference internal" href="../../../solutions/reference-designs/ad-amr-drv-sl/index.html">AD-AMR-DRV-SL (partno TBD)</a><label for="toctree-collapse-13-2"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../solutions/reference-designs/ad-amr-drv-sl/od.html">AD-AMR-DRV-SL CANopen Object Dictionary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../solutions/reference-designs/ad-amr-loc-rpiz/index.html">AD-AMR-LOC-RPIZ</a></li>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-13-3" id="toctree-collapse-13-3"/><div class="collapse"><a class="reference internal" href="../../../solutions/reference-designs/ad-apard32690-sl/index.html">AD-APARD32690-SL</a><label for="toctree-collapse-13-3"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../solutions/reference-designs/ad-apard32690-sl/ad-t1lusb-ebz/index.html">AD-T1LUSB2.0-EBZ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../solutions/reference-designs/ad-apard32690-sl/nina-w102/index.html">NINA-W102 Networking Support</a></li>
</ul>
</li>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-13-4" id="toctree-collapse-13-4"/><div class="collapse"><a class="reference internal" href="../../../solutions/reference-designs/ad-bmse2e3w-sl/index.html">AD-BMSE2E3W-SL</a><label for="toctree-collapse-13-4"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../solutions/reference-designs/ad-bmse2e3w-sl/sample_application/index.html">Sample Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../solutions/reference-designs/ad-bmse2e3w-sl/software_guide/index.html">Software User Guide</a></li>
</ul>
</li>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-13-5" id="toctree-collapse-13-5"/><div class="collapse"><a class="reference internal" href="../../../solutions/reference-designs/ad-cellpackbm-sl/index.html">AD-CELLPACKBM-SL</a><label for="toctree-collapse-13-5"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../solutions/reference-designs/ad-cellpackbm-sl/hardware_guide/index.html">Hardware User Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../solutions/reference-designs/ad-cellpackbm-sl/software_guide/index.html">Software User Guide</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../solutions/reference-designs/ad-gmsl-d-e-adp/index.html">AD-GMSL-D-E-ADP#</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../solutions/reference-designs/ad-gmsl2eth-sl/index.html">AD-GMSL2ETH-SL</a></li>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-13-6" id="toctree-collapse-13-6"/><div class="collapse"><a class="reference internal" href="../../../solutions/reference-designs/ad-gmsl522-sl/index.html">AD-GMSL522-SL</a><label for="toctree-collapse-13-6"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../solutions/reference-designs/ad-gmsl522-sl/hardware-guide/index.html">Hardware Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../solutions/reference-designs/ad-gmsl522-sl/software-guide/index.html">Software Guide</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../solutions/reference-designs/ad-gmsl717mipi-evk/index.html">AD-GMSL717MIPI-EVK</a></li>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-13-7" id="toctree-collapse-13-7"/><div class="collapse"><a class="reference internal" href="../../../solutions/reference-designs/ad-gmslcamrpi-adp/index.html">AD-GMSLCAMRPI-ADP#</a><label for="toctree-collapse-13-7"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../solutions/reference-designs/ad-gmslcamrpi-adp/amd-kria/index.html">Using with AMD Kria</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../solutions/reference-designs/ad-gmslcamrpi-adp/nvidia-jetson/index.html">Using with Nvidia Jetson Orin Nano</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../solutions/reference-designs/ad-gmslcamrpi-adp/raspberry-pi-user-guide/index.html">Using with Raspberry Pi</a></li>
</ul>
</li>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-13-8" id="toctree-collapse-13-8"/><div class="collapse"><a class="reference internal" href="../../../solutions/reference-designs/ad-swiot1l-sl/index.html">AD-SWIOT1L-SL</a><label for="toctree-collapse-13-8"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../solutions/reference-designs/ad-swiot1l-sl/hardware-guide/index.html">Hardware User Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../solutions/reference-designs/ad-swiot1l-sl/software-guide/index.html">Software User Guide</a></li>
</ul>
</li>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-13-9" id="toctree-collapse-13-9"/><div class="collapse"><a class="reference internal" href="../../../solutions/reference-designs/eval-ad-amr/index.html">EVAL-AD-AMR</a><label for="toctree-collapse-13-9"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../solutions/reference-designs/eval-ad-amr/diy-setup.html">EVAL-AD-AMR Hardware Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../solutions/reference-designs/eval-ad-amr/ros2-architecture.html">EVAL-AD-AMR ROS2 architecture</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../solutions/reference-designs/eval-ad-amr/ros2-examples.html">EVAL-AD-AMR ROS2 examples</a></li>
</ul>
</li>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-13-10" id="toctree-collapse-13-10"/><div class="collapse"><a class="reference internal" href="../../../solutions/reference-designs/eval-cn0503-ardz/index.html">EVAL-CN0503-ARDZ</a><label for="toctree-collapse-13-10"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../solutions/reference-designs/eval-cn0503-ardz/cn0503-software/index.html">Software User Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../solutions/reference-designs/eval-cn0503-ardz/fluorescence-measurement/index.html">Fluorescence Measurement Demo</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../solutions/reference-designs/eval-cn0503-ardz/nitrate-measurement/index.html">Nitrate Measurement Demo</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../solutions/reference-designs/eval-cn0503-ardz/pH-measurement/index.html">pH Measurement Demo</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../solutions/reference-designs/eval-cn0503-ardz/turbidity/index.html">Turbidity Measurement Demo</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../solutions/reference-designs/eval-cn0565-ardz/index.html">EVAL-CN0565-ARDZ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../solutions/reference-designs/eval-cn0575-rpiz/index.html">EVAL-CN0575-RPIZ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../solutions/reference-designs/eval-cn0577-fmcz/index.html">EVAL-CN0577-FMCZ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../solutions/reference-designs/eval-ess1-sys/index.html">EVAL-ESS1-SYS</a></li>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-13-11" id="toctree-collapse-13-11"/><div class="collapse"><a class="reference internal" href="../../../solutions/reference-designs/eval-isomax/index.html">EVAL-ISOMAX</a><label for="toctree-collapse-13-11"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../solutions/reference-designs/eval-isomax/hardware_guide/index.html">Hardware User Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../solutions/reference-designs/eval-isomax/software_guide/index.html">Software User Guide</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">University Program</span></p>
<ul>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-14" id="toctree-collapse-14"/><div class="collapse"><a class="reference internal" href="../../../university/index.html">Engineering University Program</a><label for="toctree-collapse-14"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-14-1" id="toctree-collapse-14-1"/><div class="collapse"><a class="reference internal" href="../../../university/active_learning/index.html">Active Learning: Student-oriented Lab Exercises</a><label for="toctree-collapse-14-1"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../university/active_learning/wien_bridge_oscillator/index.html">Activity: The Wien Bridge Oscillator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../university/active_learning/efficiency_power_loss/index.html">Activity: Efficiency, Power Loss, and Thermal Management</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Learning</span></p>
<ul>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-15" id="toctree-collapse-15"/><div class="collapse"><a class="reference internal" href="../../../learning/index.html">Learning! Tutorials, Workshops, Etc</a><label for="toctree-collapse-15"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../learning/tutorial_prec_adc/index.html">Precision ADC Tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../learning/converter_connectivity_tutorial/index.html">Converter Connectivity Tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../learning/sw_infrastructure/index.html">Software Infrastructure for designing with ADCs, DACs, and Sensors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../learning/tools_for_ls/index.html">Tools for Low Speed Mixed Signal System Design</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../learning/tools_for_prec_wb/index.html">Tools for Precision Wideband Mixed Signal System Design</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../learning/tools_for_hs/index.html">Tools for High-Speed Mixed Signal System Design</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../learning/workshop_what_sw_for_sdr/index.html">What software do I need for my SDR?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../learning/workshops_software_defined_instrumentation/index.html">Software Defined Instrumentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../learning/workshops_introduction_to_electronics/index.html">Introduction to Electronics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../learning/workshops_embedded_baremetal/index.html">Embedded Baremetal</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../learning/workshops_embedded_linux/index.html">Embedded Linux</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Contributing and Guidelines</span></p>
<ul>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-16" id="toctree-collapse-16"/><div class="collapse"><a class="reference internal" href="../../../contributing/creating_new_pages.html">Creating new pages</a><label for="toctree-collapse-16"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../contributing/template/eval.html">Evaluation Boards</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../contributing/docs_guidelines.html">Documentation guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../contributing/forking_publishing.html">Forking and publishing</a></li>
</ul>
</body>
</html>

</div>
        </div>
      </div>

  <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper" id="top-anchor">
          <div class="body-header">
    <nav class="breadcrumb">
        <ol>
          <li><a href="../index.html">Kernel and devicetrees</a></li>
          <li><a href="../petalinux.html">Build with Petalinux</a></li>
          <li><a href="index.html">Petalinux Device Trees</a></li>
          </ol>
    </nav>
  </div>

          <div class="body" role="main">
            
  <section id="custom-device-trees-with-dtg-meta-adi-bypass">
<span id="petalinux-meta-adi-bypass"></span><h1>Custom Device Trees with DTG (meta-adi Bypass)<a class="headerlink" href="#custom-device-trees-with-dtg-meta-adi-bypass" title="Link to this heading"></a></h1>
<p>For certain applications, it may be necessary to leverage the Kernel, libraries
and other tools provided by <em>meta-adi</em>, but bypass the device tree process it
generates.  For this type of application, the device tree will be based on the
Petalinux Device Tree Generator (DTG).    The most practical use case for this
is working with custom hardware, however Petalinux does provide out of the box
support for Xilinx development kits.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>This procedure acts as a “Quick start” guide for getting up and running with
a custom device tree and Petalinux’s DTG.  There are several features of the
DTG not covered in this, which may be helpful for your project.  Refer to
Xilinx/AMD UG1144 - Petalinux Tools Reference Guide, DTG Settings sections
for more detailed information.</p>
<p><a class="reference external" href="https://docs.amd.com/r/2023.2-English/ug1144-petalinux-tools-reference-guide/Overview/">UG1144 (docs.amd.com)</a></p>
</div>
<section id="bypass-meta-adi-s-device-trees">
<h2>1. Bypass meta-adi’s Device trees<a class="headerlink" href="#bypass-meta-adi-s-device-trees" title="Link to this heading"></a></h2>
<p>In order to strictly use the Petalinux device tree support, and bypass <em>meta-adi’s</em>
man-in-the-middle approach to device trees, add the following highlighted line
to <code class="docutils literal notranslate"><span class="pre">&lt;project&gt;/project-spec/meta-user/conf/layer.conf</span></code>. This addition will
still allow meta-adi recipes to run  (for kernel, IIO, etc), but exclude the
device tree support.</p>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-number">Listing 1 </span><span class="caption-text">conf/layer.conf</span><a class="headerlink" href="#id2" title="Link to this code"></a></div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># We have a conf and classes directory, add to BBPATH</span>
<span class="n">BBPATH</span> <span class="o">.=</span> <span class="s2">&quot;:$</span><span class="si">{LAYERDIR}</span><span class="s2">&quot;</span>

<span class="c1"># We have recipes-* directories, add to BBFILES</span>
<span class="n">BBFILES</span> <span class="o">+=</span> <span class="s2">&quot;$</span><span class="si">{LAYERDIR}</span><span class="s2">/recipes-*/*/*.bb </span><span class="se">\</span>
<span class="s2">    $</span><span class="si">{LAYERDIR}</span><span class="s2">/recipes-*/*/*.bbappend&quot;</span>

<span class="c1"># Define dynamic layers</span>
<span class="n">BBFILES_DYNAMIC</span> <span class="o">+=</span> <span class="s2">&quot; </span><span class="se">\</span>
<span class="s2">xilinx-tools:$</span><span class="si">{LAYERDIR}</span><span class="s2">/meta-xilinx-tools/recipes-*/*/*.bbappend </span><span class="se">\</span>
<span class="s2">&quot;</span>

<span class="n">BBFILE_COLLECTIONS</span> <span class="o">+=</span> <span class="s2">&quot;meta-user&quot;</span>
<span class="n">BBFILE_PATTERN_meta</span><span class="o">-</span><span class="n">user</span> <span class="o">=</span> <span class="s2">&quot;^$</span><span class="si">{LAYERDIR}</span><span class="s2">/&quot;</span>
<span class="n">BBFILE_PRIORITY_meta</span><span class="o">-</span><span class="n">user</span> <span class="o">=</span> <span class="s2">&quot;7&quot;</span>
<span class="n">LAYERSERIES_COMPAT_meta</span><span class="o">-</span><span class="n">user</span> <span class="o">=</span> <span class="s2">&quot;langdale&quot;</span>

<span class="hll"><span class="n">BBMASK</span> <span class="o">+=</span> <span class="s2">&quot;meta-adi-xilinx/recipes-bsp/device-tree/&quot;</span>
</span></pre></div>
</div>
</div>
</section>
<section id="select-petalinux-template">
<h2>2. Select Petalinux Template<a class="headerlink" href="#select-petalinux-template" title="Link to this heading"></a></h2>
<p>Petalinux’s DTG generates a basic device tree based on the exported XSA file from
your HDL project. This will configure the minimal parameters for the SoC.  In
addition to this basic generation, an optional EvKit may be selected.  When
selecting an EvKit template, in addition to the SoC parameters, all of the fixed
devices on the kit (such as power control ICs, PHYs, etc) are also automatically
included into the device tree stack. This is recommended when using an EvKit for
prototyping, to reduce the additional work needed to bring the boards up.</p>
<p>If using custom hardware, or hardware not provided by Xilinx, the additional
board devices will need to be included by you in your custom device tree.
The following table (extracted from the UG1144 Reference Guide) shows the
available EvKits in the Petalinux 2023.2 distribution.  Always refer to
<a class="reference external" href="https://docs.amd.com/r/2023.2-English/ug1144-petalinux-tools-reference-guide/Overview/">UG1144 (docs.amd.com)</a>
for the most up to date information.</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>BSP</p></th>
<th class="head"><p>Machine</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>ZCU102</p></td>
<td><p>zcu102-rev1.0</p></td>
</tr>
<tr class="row-odd"><td><p>ZCU104</p></td>
<td><p>zcu104-revc</p></td>
</tr>
<tr class="row-even"><td><p>ZCU106</p></td>
<td><p>zcu106-reva</p></td>
</tr>
<tr class="row-odd"><td><p>ZCU111</p></td>
<td><p>zcu111-reva</p></td>
</tr>
<tr class="row-even"><td><p>ZCU1275</p></td>
<td><p>zcu1275-revb</p></td>
</tr>
<tr class="row-odd"><td><p>ZCU1285</p></td>
<td><p>zcu1285-reva</p></td>
</tr>
<tr class="row-even"><td><p>ZCU216</p></td>
<td><p>zcu216-reva</p></td>
</tr>
<tr class="row-odd"><td><p>ZCU208</p></td>
<td><p>zcu208-reva</p></td>
</tr>
<tr class="row-even"><td><p>ZCU670</p></td>
<td><p>zcu670-revb</p></td>
</tr>
<tr class="row-odd"><td><p>ZCU208-SDFEC</p></td>
<td><p>zcu208-reva</p></td>
</tr>
<tr class="row-even"><td><p>ZCU100</p></td>
<td><p>zcu100-revc</p></td>
</tr>
<tr class="row-odd"><td><p>ZC702</p></td>
<td><p>zc702</p></td>
</tr>
<tr class="row-even"><td><p>ZC706</p></td>
<td><p>zc706</p></td>
</tr>
<tr class="row-odd"><td><p>ZEDBOARD</p></td>
<td><p>zedboard</p></td>
</tr>
<tr class="row-even"><td><p>AC701</p></td>
<td><p>ac701-full</p></td>
</tr>
<tr class="row-odd"><td><p>KC705</p></td>
<td><p>kc705-full</p></td>
</tr>
<tr class="row-even"><td><p>KCU105</p></td>
<td><p>kcu105</p></td>
</tr>
<tr class="row-odd"><td><p>VCU118</p></td>
<td><p>vcu118-rev2.0</p></td>
</tr>
<tr class="row-even"><td><p>SP701</p></td>
<td><p>sp701-rev1.0</p></td>
</tr>
<tr class="row-odd"><td><p>VCK190</p></td>
<td><p>versal-vck190-reva-x-ebm-01-reva</p></td>
</tr>
<tr class="row-even"><td><p>VPK120</p></td>
<td><p>versal-vpk120-reva</p></td>
</tr>
<tr class="row-odd"><td><p>VMK180</p></td>
<td><p>versal-vmk180-reva-x-ebm-01-reva</p></td>
</tr>
<tr class="row-even"><td><p>VPK180</p></td>
<td><p>versal-vpk180-reva</p></td>
</tr>
</tbody>
</table>
</div>
<p>To set the template, run <code class="docutils literal notranslate"><span class="pre">petalinux-config</span></code> for your project. Navigate to
<strong>DTG Settings</strong>, then select <strong>MACHINE_NAME</strong> to choose the board.
Enter the appropriate machine from the list above.  In this example,
the ZCU102 is used, so the machine is set to <code class="docutils literal notranslate"><span class="pre">zcu102-rev1.0</span></code>.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>For custom hardware, or to not utilize a provided board, the <code class="docutils literal notranslate"><span class="pre">MACHINE_NAME</span></code>
should be set to <em>template</em>.</p>
</div>
<img alt="../../../_images/petalinux-config-machinename.png" src="../../../_images/petalinux-config-machinename.png" />
<img alt="../../../_images/petalinux-config-machine-zcu102.png" src="../../../_images/petalinux-config-machine-zcu102.png" />
</section>
<section id="disabling-pl-node-generation">
<h2>3. Disabling PL Node Generation<a class="headerlink" href="#disabling-pl-node-generation" title="Link to this heading"></a></h2>
<p>By default, Petalinux’s DTG generates device tree nodes for any IP blocks
included in the PL.  This may be applicable for some scenarios, however when
attempting to use device specific Linux drivers (such as IIO drivers ), this
will cause device tree conflicts and require deleting nodes similar to what
<em>meta-adi</em> does.  To disable the automatic generation of PL nodes and avoid the
conflicts, run <code class="docutils literal notranslate"><span class="pre">petalinux-config</span></code>, navigate to <strong>DTG Settings</strong>, and enable
<strong>Remove PL From Devicetree</strong>.</p>
<img alt="../../../_images/petalinux-config-remove-pl.png" src="../../../_images/petalinux-config-remove-pl.png" />
</section>
<section id="adding-custom-device-trees">
<h2>4. Adding Custom Device Trees<a class="headerlink" href="#adding-custom-device-trees" title="Link to this heading"></a></h2>
<p>At this point, Petalinux &amp; DTG will generate a barebones device tree of either
the SoC only (if <em>template</em> was selected for <code class="docutils literal notranslate"><span class="pre">MACHINE_NAME</span></code>), or the core
components for the EvKit selected for <code class="docutils literal notranslate"><span class="pre">MACHINE_NAME</span></code>.  To add custom nodes,
the <code class="docutils literal notranslate"><span class="pre">project-spec/meta-user/recipes-bsp/device-tree</span></code> configuration will be used.</p>
<p>All of the device tree information can be placed in <code class="docutils literal notranslate"><span class="pre">system-user.dtsi</span></code>, or it
may be included via separate file(s) for modularity and maintainability.
In this example, we’ll assume we have a device tree file <code class="docutils literal notranslate"><span class="pre">ad9081_fmc_support.dtsi</span></code>,
which includes all of the nodes needed to talk to the AD9081 FMC card.
By leveraging a modular device tree like this, it is possible to include it in
multiple different projects for common function through different boards.</p>
<p><strong>1. Add files to the correct folder location</strong></p>
<p>First, copy all device tree files you’d like to use to
<code class="docutils literal notranslate"><span class="pre">project-spec/meta-user/recipes-bsp/device-tree/files</span></code>. There should already
be a <code class="docutils literal notranslate"><span class="pre">system-user.dtsi</span></code> file in there. Keep that file.</p>
<p><strong>2. Add your files to device-tree.bbappend</strong></p>
<p>Next, any provided files above must be added to <code class="docutils literal notranslate"><span class="pre">device-tree.bbappend</span></code>.
Open <code class="docutils literal notranslate"><span class="pre">project-spec/meta-user/recipes-bsp/device-tree/device-tree.bbappend</span></code>
and edit as shown below.  You may have more files, or files with different names.</p>
<p>In addition, the <code class="docutils literal notranslate"><span class="pre">KERNEL_INCLUDE:append</span></code> line must be specified to allow
inclusion of various device tree bindings files.  By default, Petalinux DTG only
references a small subset of available bindings. The inclusion of this line
allows access to all binding files within the kernel sources.</p>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-number">Listing 2 </span><span class="caption-text">device-tree.bbappend</span><a class="headerlink" href="#id3" title="Link to this code"></a></div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>FILESEXTRAPATHS:prepend := &quot;${THISDIR}/files:&quot;

SRC_URI:append = &quot; file://system-user.dtsi \
<span class="hll">                   file://ad9081_fmc_support.dtsi&quot;
</span>
<span class="hll">KERNEL_INCLUDE:append = &quot; \
</span><span class="hll">    ${STAGING_KERNEL_DIR}/include&quot;
</span>
KERNEL_DTB_PATH = &quot;${WORKDIR}&quot;
require ${@&#39;device-tree-sdt.inc&#39; if d.getVar(&#39;SYSTEM_DTFILE&#39;) != &#39;&#39; else &#39;&#39;}
</pre></div>
</div>
</div>
<p><strong>3. Edit system-user.dtsi</strong></p>
<p><code class="docutils literal notranslate"><span class="pre">System-user.dtsi</span></code> is automatically included at the tail end of the
Petalinux/DTG device tree hierarchy.  Modifications may be performed directly in
here, or this may include additional files, or both.  In this case, we’ll just
include the new FMC support file. Edit
<code class="docutils literal notranslate"><span class="pre">project-spec/meta-user/recipes-bsp/device-tree/files/system-user.dtsi</span></code>:</p>
<div class="literal-block-wrapper docutils container" id="id4">
<div class="code-block-caption"><span class="caption-number">Listing 3 </span><span class="caption-text">system-user.dtsi</span><a class="headerlink" href="#id4" title="Link to this code"></a></div>
<div class="highlight-dts notranslate"><div class="highlight"><pre><span></span><span class="cp">/include/</span><span class="cm"> </span><span class="cpf">&quot;system-conf.dtsi&quot;</span>

<span class="hll"><span class="cp">#include</span><span class="cm"> </span><span class="cpf">&quot;ad9081_fmc_support.dtsi&quot;</span>
</span></pre></div>
</div>
</div>
<p>Petalinux can now be built and deployed as normal, incorporating your new device
trees and updates. The resulting dts hierarchy can be found in
<code class="docutils literal notranslate"><span class="pre">&lt;project&gt;/components/plnx_workspace/device-tree/device-tree</span></code> for reference
purposes.</p>
</section>
</section>


          </div>
              <div class="related">
                &nbsp;
    <a href="petalinux-custom-dts.html" title="Previous document (Alt+Shift+LeftArrow)" class="prev">Custom Device Trees with meta-adi</a>
    <a href="petalinux-system-user.html" title="Next document (Alt+Shift+RightArrow)" class="next">Device Tree Modifications with system-user.dtsi</a>
              </div>
          
        </div>
      </div>
  </div>

  <label id="cancel-area-show-toc" for="input-show-toc"></label>
  <label id="cancel-area-show-localtoc" for="input-show-localtoc"></label>
    <footer>
      &#169;2024, Analog Devices, Inc.
      
      |
      Made with <a href="https://www.sphinx-doc.org/">Sphinx</a>
      &amp; <a href="https://github.com/analogdevicesinc/doctools">Doctools</a>
      
    </footer>
  </body>
</html>