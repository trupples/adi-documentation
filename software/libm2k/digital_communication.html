<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Digital communication &#8212; System Level Documentation  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=8e8a900e" />
    <link rel="stylesheet" type="text/css" href="../../_static/app.min.css?v=c218d0f6" />
    <script defer="" src="../../_static/app.umd.js?v=5e042acc"></script>
    <link rel="icon" href="../../_static/icon.svg"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Command line utility" href="m2kcli.html" />
    <link rel="prev" title="Calibration" href="calibration.html" />
   
  
  <meta name="repository" content="documentation">
  <meta name="version" content="">
  
    <meta name="page_source_suffix" content=".rst">
  
  


<style>
  body {
    
  }

  body.dark {
    
  }

  @media (prefers-color-scheme: dark) {
    body:not(.light) {
      
    }
  }
</style>
  </head><body>
  <input type="checkbox" id="input-show-toc">
  <input type="checkbox" id="input-show-localtoc">
  <input type="checkbox" id="input-show-repotoc">

  
  <div class="search-area">
    <form action="" method="get">
      <input type="text" name="q" aria-labelledby="search-documentation" value="" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="search" placeholder="Search"/>
      <button class="icon"></button>
    </form>
  </div>
  

  <header>
    <div id="left">
      <label id="show-sidebar" class="icon" for="input-show-toc" title="Show/hide index"></label>
    </div>
    <div id="right">
      <span>
        <a id="logo-org" href="https://analog.com"></a>
        <div class="vertical-divider"></div>
        <label id="show-repotoc" for="input-show-repotoc" title="Show/hide docs" tabindex="0">Docs</label>
        <a id="logo" href="../../index.html">
          <div>System Level</div>
        </a>
      </span>
      <span class="reverse">
        <label id="show-localtoc" class="icon" for="input-show-localtoc" title="Show/hide contents"></label>
      </span>
    </div>
  </header>


  <div class="repotoc-tree overlay">
    <root>
  <a href="../../index.html" class="current">System Level</a>
</root>

  </div>
    <div class="localtoc">
      <div class="tocwrapper">
        <div>
          <div class="localtoc-header"></div>
          <a id="scroll-up" href="#top-anchor" title="Back to top"></a>
        </div>
        <nav>
          <ul>
<li><a class="reference internal" href="#">Digital communication</a><ul>
<li><a class="reference internal" href="#how-to-install-it">How to install it?</a><ul>
<li><a class="reference internal" href="#windows">Windows</a></li>
</ul>
</li>
<li><a class="reference internal" href="#how-to-build-it">How to build it?</a><ul>
<li><a class="reference internal" href="#enable-tools-on-linux-or-osx">Enable tools on Linux or OSX</a></li>
<li><a class="reference internal" href="#enable-tools-on-windows">Enable tools on Windows</a></li>
</ul>
</li>
<li><a class="reference internal" href="#protocols">Protocols</a><ul>
<li><a class="reference internal" href="#spi">SPI</a></li>
<li><a class="reference internal" href="#i2c">IÂ²C</a></li>
<li><a class="reference internal" href="#uart">UART</a></li>
</ul>
</li>
<li><a class="reference internal" href="#libm2k-and-no-os-drivers">Libm2k and no-OS drivers</a></li>
</ul>
</li>
</ul>

        </nav>
      </div>
    </div>

  
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
    <a id="no-logo" href="../../index.html">
      System Level Documentation
    </a><input id="input-switch-toc" type="checkbox">
<label id="show-repotoc" for="input-switch-toc">
All content
</label>
<label id="show-toc" for="input-switch-toc">
Content on this topic
</label>
<div class="repotoc-tree">
  <root>
  <a href="../../index.html" class="current">System Level</a>
</root>

</div>
<div class="toc-tree">
  <html>
  <body><p class="caption" role="heading"><span class="caption-text">Kuiper &amp; Linux Kernel</span></p>
<ul>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-1" id="toctree-collapse-1"/><div class="collapse"><a class="reference internal" href="../../linux/drivers/index.html">Linux drivers</a><label for="toctree-collapse-1"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-1-1" id="toctree-collapse-1-1"/><div class="collapse"><a class="reference internal" href="../../linux/drivers/iio-adc/index.html">IIO ADC</a><label for="toctree-collapse-1-1"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../linux/drivers/iio-adc/ad4052/index.html">AD4052</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../linux/drivers/iio-adc/ad9084/index.html">AD9084/AD9088</a></li>
</ul>
</li>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-1-2" id="toctree-collapse-1-2"/><div class="collapse"><a class="reference internal" href="../../linux/drivers/iio-transceiver/index.html">IIO Transceivers</a><label for="toctree-collapse-1-2"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-1-2-1" id="toctree-collapse-1-2-1"/><div class="collapse"><a class="reference internal" href="../../linux/drivers/iio-transceiver/adrv9009/index.html">ADRV9009, ADRV9008-1, ADRV9008-2</a><label for="toctree-collapse-1-2-1"><div class="icon"></div></label></div><ul>
<li class="toctree-l4"><a class="reference internal" href="../../linux/drivers/iio-transceiver/adrv9009/customization.html">Customization</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-1-3" id="toctree-collapse-1-3"/><div class="collapse"><a class="reference internal" href="../../linux/drivers/iio/index.html">Linux Industrial I/O Subsystem</a><label for="toctree-collapse-1-3"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../linux/drivers/iio/iio-trig-sysfs.html">iio-trig-sysfs driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../linux/drivers/iio/iio-trig-bfin-timer.html">iio-trig-bfin-timer driver</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-2" id="toctree-collapse-2"/><div class="collapse"><a class="reference internal" href="../../linux/kernel/index.html">Kernel and devicetrees</a><label for="toctree-collapse-2"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../../linux/kernel/zynq.html">Build Zynq</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../linux/kernel/zynqmp.html">Build ZynqMP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../linux/kernel/microblaze.html">Build MicroBlaze</a></li>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-2-1" id="toctree-collapse-2-1"/><div class="collapse"><a class="reference internal" href="../../linux/kernel/petalinux.html">Build with Petalinux</a><label for="toctree-collapse-2-1"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-2-1-1" id="toctree-collapse-2-1-1"/><div class="collapse"><a class="reference internal" href="../../linux/kernel/petalinux-dts/index.html">Petalinux Device Trees</a><label for="toctree-collapse-2-1-1"><div class="icon"></div></label></div><ul>
<li class="toctree-l4"><a class="reference internal" href="../../linux/kernel/petalinux-dts/petalinux-custom-dts.html">Custom Device Trees with meta-adi</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../linux/kernel/petalinux-dts/petalinux-meta-adi-bypass.html">Custom Device Trees with DTG (meta-adi Bypass)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../linux/kernel/petalinux-dts/petalinux-system-user.html">Device Tree Modifications with system-user.dtsi</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-3" id="toctree-collapse-3"/><div class="collapse"><a class="reference internal" href="../../linux/kuiper/index.html">Kuiper Linux</a><label for="toctree-collapse-3"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../../linux/kuiper/release-notes.html">Release notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../linux/kuiper/sdcard/index.html">SD Card flashing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../linux/kuiper/project-list.html">Project list</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../linux/kuiper/update.html">Updating</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Software</span></p>
<ul class="current">
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-4" id="toctree-collapse-4"/><div class="collapse"><a class="reference internal" href="../iio-oscilloscope/index.html">IIO Oscilloscope</a><label for="toctree-collapse-4"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-4-1" id="toctree-collapse-4-1"/><div class="collapse"><a class="reference internal" href="../iio-oscilloscope/adrv9009/index.html">ADRV9009</a><label for="toctree-collapse-4-1"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../iio-oscilloscope/adrv9009/plugin.html">Standard Plugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../iio-oscilloscope/adrv9009/advanced-plugin.html">Advanced plugin</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-5" id="toctree-collapse-5"/><div class="collapse"><a class="reference internal" href="../libiio/index.html">Libiio</a><label for="toctree-collapse-5"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../libiio/internals.html">About libiio</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libiio/cli.html">Command line utility</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libiio/tips-tricks.html">Tips &amp; Tricks</a></li>
</ul>
</li>
<li class="toctree-l1 current"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-6" id="toctree-collapse-6" checked=""/><div class="collapse"><a class="reference internal" href="index.html">Libm2k</a><label for="toctree-collapse-6"><div class="icon"></div></label></div><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="calibration.html">Calibration</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Digital communication</a></li>
<li class="toctree-l2"><a class="reference internal" href="m2kcli.html">Command line utility</a></li>
</ul>
</li>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-7" id="toctree-collapse-7"/><div class="collapse"><a class="reference internal" href="../matlab/index.html">MATLAB &amp; Simulink Toolboxes</a><label for="toctree-collapse-7"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../matlab/hsx-toolbox/index.html">High Speed Converter Toolbox</a></li>
<li class="toctree-l2"><a class="reference internal" href="../matlab/transceiver-toolbox/index.html">Transceiver Toolbox</a></li>
<li class="toctree-l2"><a class="reference internal" href="../matlab/bsp-extend.html">Extending Device Interfaces</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../pyadi-iio/index.html">PyADI-IIO</a></li>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-8" id="toctree-collapse-8"/><div class="collapse"><a class="reference internal" href="../zephyr/index.html">Zephyr RTOS</a><label for="toctree-collapse-8"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../zephyr/zephyr-devicetree.html">Intro to Devicetree</a></li>
<li class="toctree-l2"><a class="reference internal" href="../zephyr/kconfig/zephyr-kconfig.html">Introduction to Kconfig</a></li>
<li class="toctree-l2"><a class="reference internal" href="../zephyr/using-zephyr-codefusion-fs/zephyr_codefusion_fs.html">Using Zephyr &amp; Codefusion Studio to Partition a Flash Filesystem</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Evaluation Boards</span></p>
<ul>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-9" id="toctree-collapse-9"/><div class="collapse"><a class="reference internal" href="../../eval/user-guide/index.html">User guides</a><label for="toctree-collapse-9"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-9-1" id="toctree-collapse-9-1"/><div class="collapse"><a class="reference internal" href="../../eval/user-guide/adc/ad4052-ardz/index.html">EVAL-AD4050/AD4052-ARDZ</a><label for="toctree-collapse-9-1"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../eval/user-guide/adc/ad4052-ardz/user-guide.html">Evaluating the device</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../eval/user-guide/adc/ad9084-ebz/index.html">EVAL-AD9084-EBZ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../eval/user-guide/mem/adxl355-pmdz/index.html">EVAL-ADXL355-PMDZ</a></li>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-9-2" id="toctree-collapse-9-2"/><div class="collapse"><a class="reference internal" href="../../eval/user-guide/transceiver/adrv9009/index.html">ADRV9009 &amp; ADRV9008</a><label for="toctree-collapse-9-2"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../eval/user-guide/transceiver/adrv9009/prerequisites.html">Prerequisites</a></li>
<li class="toctree-l3"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-9-2-1" id="toctree-collapse-9-2-1"/><div class="collapse"><a class="reference internal" href="../../eval/user-guide/transceiver/adrv9009/quickstart/index.html">Quickstart</a><label for="toctree-collapse-9-2-1"><div class="icon"></div></label></div><ul>
<li class="toctree-l4"><a class="reference internal" href="../../eval/user-guide/transceiver/adrv9009/quickstart/zynqmp.html">ZCU102</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../eval/user-guide/transceiver/adrv9009/basic-iq-datafiles.html">Basic IQ Datafiles</a></li>
</ul>
</li>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-9-3" id="toctree-collapse-9-3"/><div class="collapse"><a class="reference internal" href="../../eval/user-guide/transceiver/adrv9026/index.html">ADRV9026 &amp; ADRV9029</a><label for="toctree-collapse-9-3"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../eval/user-guide/transceiver/adrv9026/prerequisites.html">Prerequisites</a></li>
<li class="toctree-l3"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-9-3-1" id="toctree-collapse-9-3-1"/><div class="collapse"><a class="reference internal" href="../../eval/user-guide/transceiver/adrv9026/quickstart/index.html">Quickstart</a><label for="toctree-collapse-9-3-1"><div class="icon"></div></label></div><ul>
<li class="toctree-l4"><a class="reference internal" href="../../eval/user-guide/transceiver/adrv9026/quickstart/zynqmp.html">ZCU102</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../eval/user-guide/transceiver/adrv9026/quickstart/versal.html">VCK190</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Products &amp; Tools</span></p>
<ul>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-10" id="toctree-collapse-10"/><div class="collapse"><a class="reference internal" href="../../tools/m2k/index.html">ADALM2000</a><label for="toctree-collapse-10"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../../tools/m2k/devs/index.html">For Developers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tools/m2k/users/index.html">For End Users</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tools/m2k/help_support.html">Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tools/m2k/labview.html">Using With LabVIEW</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tools/m2k/matlab.html">Using with MATLAB</a></li>
</ul>
</li>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-11" id="toctree-collapse-11"/><div class="collapse"><a class="reference internal" href="../../tools/pluto-m2k/index.html">Common PLUTO&amp;M2K</a><label for="toctree-collapse-11"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../../tools/pluto-m2k/building_the_image.html">Building the Firmware Image</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tools/pluto-m2k/drivers.html">Installing Drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tools/pluto-m2k/firmware.html">Firmware Updates</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tools/pluto-m2k/obtaining_the_sources.html">Obtaining the Build Sources</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tools/pluto-m2k/reboot.html">Rebooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tools/pluto-m2k/usb_otg_host.html">USB OTG â HOST function Support</a></li>
</ul>
</li>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-12" id="toctree-collapse-12"/><div class="collapse"><a class="reference internal" href="../../tools/pluto/index.html">ADALM-PLUTO</a><label for="toctree-collapse-12"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-12-1" id="toctree-collapse-12-1"/><div class="collapse"><a class="reference internal" href="../../tools/pluto/devs/index.html">For Developers</a><label for="toctree-collapse-12-1"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../tools/pluto/devs/usb_otg.html">USB OTG</a></li>
</ul>
</li>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-12-2" id="toctree-collapse-12-2"/><div class="collapse"><a class="reference internal" href="../../tools/pluto/hacking/index.html">For Hackers</a><label for="toctree-collapse-12-2"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../tools/pluto/hacking/hardware.html">ADALM-PLUTO Hardware</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tools/pluto/hacking/listening_to_yourself.html">Self Reception</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tools/pluto/hacking/power_amp.html">Controlling External Devices</a></li>
</ul>
</li>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-12-3" id="toctree-collapse-12-3"/><div class="collapse"><a class="reference internal" href="../../tools/pluto/users/index.html">For End Users</a><label for="toctree-collapse-12-3"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../tools/pluto/users/antennas.html">Antennas</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../tools/pluto/help_support.html">Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tools/pluto/prerequisites.html">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tools/pluto/transceiver_transferring_data.html">Controlling the transceiver and transferring data</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/uartjtag/index.html">ADALM-UARTJTAG</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Apps &amp; Solutions</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../solutions/application-software/index.html">Application Software</a></li>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-13" id="toctree-collapse-13"/><div class="collapse"><a class="reference internal" href="../../solutions/reference-designs/index.html">Reference Designs</a><label for="toctree-collapse-13"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-13-1" id="toctree-collapse-13-1"/><div class="collapse"><a class="reference internal" href="../../solutions/reference-designs/ad-amr-bms-sl/index.html">AD-AMR-BMS-SL (partno TBD)</a><label for="toctree-collapse-13-1"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../solutions/reference-designs/ad-amr-bms-sl/od.html">AD-AMR-BMS-SL CANopen Object Dictionary</a></li>
</ul>
</li>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-13-2" id="toctree-collapse-13-2"/><div class="collapse"><a class="reference internal" href="../../solutions/reference-designs/ad-amr-drv-sl/index.html">AD-AMR-DRV-SL (partno TBD)</a><label for="toctree-collapse-13-2"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../solutions/reference-designs/ad-amr-drv-sl/od.html">AD-AMR-DRV-SL CANopen Object Dictionary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../solutions/reference-designs/ad-amr-loc-rpiz/index.html">AD-AMR-LOC-RPIZ</a></li>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-13-3" id="toctree-collapse-13-3"/><div class="collapse"><a class="reference internal" href="../../solutions/reference-designs/ad-apard32690-sl/index.html">AD-APARD32690-SL</a><label for="toctree-collapse-13-3"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../solutions/reference-designs/ad-apard32690-sl/ad-t1lusb-ebz/index.html">AD-T1LUSB2.0-EBZ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../solutions/reference-designs/ad-apard32690-sl/nina-w102/index.html">NINA-W102 Networking Support</a></li>
</ul>
</li>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-13-4" id="toctree-collapse-13-4"/><div class="collapse"><a class="reference internal" href="../../solutions/reference-designs/ad-bmse2e3w-sl/index.html">AD-BMSE2E3W-SL</a><label for="toctree-collapse-13-4"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../solutions/reference-designs/ad-bmse2e3w-sl/sample_application/index.html">Sample Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../solutions/reference-designs/ad-bmse2e3w-sl/software_guide/index.html">Software User Guide</a></li>
</ul>
</li>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-13-5" id="toctree-collapse-13-5"/><div class="collapse"><a class="reference internal" href="../../solutions/reference-designs/ad-cellpackbm-sl/index.html">AD-CELLPACKBM-SL</a><label for="toctree-collapse-13-5"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../solutions/reference-designs/ad-cellpackbm-sl/hardware_guide/index.html">Hardware User Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../solutions/reference-designs/ad-cellpackbm-sl/software_guide/index.html">Software User Guide</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../solutions/reference-designs/ad-gmsl-d-e-adp/index.html">AD-GMSL-D-E-ADP#</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../solutions/reference-designs/ad-gmsl2eth-sl/index.html">AD-GMSL2ETH-SL</a></li>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-13-6" id="toctree-collapse-13-6"/><div class="collapse"><a class="reference internal" href="../../solutions/reference-designs/ad-gmsl522-sl/index.html">AD-GMSL522-SL</a><label for="toctree-collapse-13-6"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../solutions/reference-designs/ad-gmsl522-sl/hardware-guide/index.html">Hardware Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../solutions/reference-designs/ad-gmsl522-sl/software-guide/index.html">Software Guide</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../solutions/reference-designs/ad-gmsl717mipi-evk/index.html">AD-GMSL717MIPI-EVK</a></li>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-13-7" id="toctree-collapse-13-7"/><div class="collapse"><a class="reference internal" href="../../solutions/reference-designs/ad-gmslcamrpi-adp/index.html">AD-GMSLCAMRPI-ADP#</a><label for="toctree-collapse-13-7"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../solutions/reference-designs/ad-gmslcamrpi-adp/amd-kria/index.html">Using with AMD Kria</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../solutions/reference-designs/ad-gmslcamrpi-adp/nvidia-jetson/index.html">Using with Nvidia Jetson Orin Nano</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../solutions/reference-designs/ad-gmslcamrpi-adp/raspberry-pi-user-guide/index.html">Using with Raspberry Pi</a></li>
</ul>
</li>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-13-8" id="toctree-collapse-13-8"/><div class="collapse"><a class="reference internal" href="../../solutions/reference-designs/ad-swiot1l-sl/index.html">AD-SWIOT1L-SL</a><label for="toctree-collapse-13-8"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../solutions/reference-designs/ad-swiot1l-sl/hardware-guide/index.html">Hardware User Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../solutions/reference-designs/ad-swiot1l-sl/software-guide/index.html">Software User Guide</a></li>
</ul>
</li>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-13-9" id="toctree-collapse-13-9"/><div class="collapse"><a class="reference internal" href="../../solutions/reference-designs/eval-ad-amr/index.html">EVAL-AD-AMR</a><label for="toctree-collapse-13-9"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../solutions/reference-designs/eval-ad-amr/diy-setup.html">EVAL-AD-AMR Hardware Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../solutions/reference-designs/eval-ad-amr/ros2-architecture.html">EVAL-AD-AMR ROS2 architecture</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../solutions/reference-designs/eval-ad-amr/ros2-examples.html">EVAL-AD-AMR ROS2 examples</a></li>
</ul>
</li>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-13-10" id="toctree-collapse-13-10"/><div class="collapse"><a class="reference internal" href="../../solutions/reference-designs/eval-cn0503-ardz/index.html">EVAL-CN0503-ARDZ</a><label for="toctree-collapse-13-10"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../solutions/reference-designs/eval-cn0503-ardz/cn0503-software/index.html">Software User Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../solutions/reference-designs/eval-cn0503-ardz/fluorescence-measurement/index.html">Fluorescence Measurement Demo</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../solutions/reference-designs/eval-cn0503-ardz/nitrate-measurement/index.html">Nitrate Measurement Demo</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../solutions/reference-designs/eval-cn0503-ardz/pH-measurement/index.html">pH Measurement Demo</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../solutions/reference-designs/eval-cn0503-ardz/turbidity/index.html">Turbidity Measurement Demo</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../solutions/reference-designs/eval-cn0565-ardz/index.html">EVAL-CN0565-ARDZ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../solutions/reference-designs/eval-cn0575-rpiz/index.html">EVAL-CN0575-RPIZ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../solutions/reference-designs/eval-cn0577-fmcz/index.html">EVAL-CN0577-FMCZ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../solutions/reference-designs/eval-ess1-sys/index.html">EVAL-ESS1-SYS</a></li>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-13-11" id="toctree-collapse-13-11"/><div class="collapse"><a class="reference internal" href="../../solutions/reference-designs/eval-isomax/index.html">EVAL-ISOMAX</a><label for="toctree-collapse-13-11"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../solutions/reference-designs/eval-isomax/hardware_guide/index.html">Hardware User Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../solutions/reference-designs/eval-isomax/software_guide/index.html">Software User Guide</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">University Program</span></p>
<ul>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-14" id="toctree-collapse-14"/><div class="collapse"><a class="reference internal" href="../../university/index.html">Engineering University Program</a><label for="toctree-collapse-14"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-14-1" id="toctree-collapse-14-1"/><div class="collapse"><a class="reference internal" href="../../university/active_learning/index.html">Active Learning: Student-oriented Lab Exercises</a><label for="toctree-collapse-14-1"><div class="icon"></div></label></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../university/active_learning/wien_bridge_oscillator/index.html">Activity: The Wien Bridge Oscillator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../university/active_learning/efficiency_power_loss/index.html">Activity: Efficiency, Power Loss, and Thermal Management</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Learning</span></p>
<ul>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-15" id="toctree-collapse-15"/><div class="collapse"><a class="reference internal" href="../../learning/index.html">Learning! Tutorials, Workshops, Etc</a><label for="toctree-collapse-15"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../../learning/tutorial_prec_adc/index.html">Precision ADC Tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../learning/converter_connectivity_tutorial/index.html">Converter Connectivity Tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../learning/sw_infrastructure/index.html">Software Infrastructure for designing with ADCs, DACs, and Sensors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../learning/tools_for_ls/index.html">Tools for Low Speed Mixed Signal System Design</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../learning/tools_for_prec_wb/index.html">Tools for Precision Wideband Mixed Signal System Design</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../learning/tools_for_hs/index.html">Tools for High-Speed Mixed Signal System Design</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../learning/workshop_what_sw_for_sdr/index.html">What software do I need for my SDR?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../learning/workshops_software_defined_instrumentation/index.html">Software Defined Instrumentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../learning/workshops_introduction_to_electronics/index.html">Introduction to Electronics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../learning/workshops_embedded_baremetal/index.html">Embedded Baremetal</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../learning/workshops_embedded_linux/index.html">Embedded Linux</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Contributing and Guidelines</span></p>
<ul>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-16" id="toctree-collapse-16"/><div class="collapse"><a class="reference internal" href="../../contributing/creating_new_pages.html">Creating new pages</a><label for="toctree-collapse-16"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../../contributing/template/eval.html">Evaluation Boards</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/docs_guidelines.html">Documentation guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/forking_publishing.html">Forking and publishing</a></li>
</ul>
</body>
</html>

</div>
        </div>
      </div>

  <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper" id="top-anchor">
          <div class="body-header">
    <nav class="breadcrumb">
        <ol>
          <li><a href="index.html">Libm2k</a></li>
          </ol>
    </nav>
  </div>

          <div class="body" role="main">
            
  <section id="digital-communication">
<span id="libm2k-digital-communication"></span><h1>Digital communication<a class="headerlink" href="#digital-communication" title="Link to this heading"></a></h1>
<p>Libm2k includes bitbang implementations on a variety of protocols.</p>
<section id="how-to-install-it">
<h2>How to install it?<a class="headerlink" href="#how-to-install-it" title="Link to this heading"></a></h2>
<section id="windows">
<h3>Windows<a class="headerlink" href="#windows" title="Link to this heading"></a></h3>
<p>In the <em>Select Additional Tasks</em> window, select <em>Install libm2k tools</em> option.</p>
</section>
</section>
<section id="how-to-build-it">
<h2>How to build it?<a class="headerlink" href="#how-to-build-it" title="Link to this heading"></a></h2>
<p>Build and install libm2k. Instruction can be found
<a class="reference internal" href="index.html#libm2k"><span class="std std-ref">here</span></a>. Make sure to enable tools option.</p>
<section id="enable-tools-on-linux-or-osx">
<h3>Enable tools on Linux or OSX<a class="headerlink" href="#enable-tools-on-linux-or-osx" title="Link to this heading"></a></h3>
<div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>~/libm2k/build$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cmake<span class="w"> </span>-DENABLE_TOOLS<span class="o">=</span>ON<span class="w"> </span>../
</pre></div>
</div>
<div class="clear-left"></div></div></div></section>
<section id="enable-tools-on-windows">
<h3>Enable tools on Windows<a class="headerlink" href="#enable-tools-on-windows" title="Link to this heading"></a></h3>
<p>Check the <em>ENABLE_TOOLS</em> box in CMake GUI.</p>
</section>
</section>
<section id="protocols">
<h2>Protocols<a class="headerlink" href="#protocols" title="Link to this heading"></a></h2>
<p>There is a common structure to use for all the protocols when trying to
communicate with other device using libm2k:</p>
<ul class="simple">
<li><p>initialize the protocol</p></li>
<li><p>read/write packets</p></li>
<li><p>free the resources allocated  by initialization</p></li>
</ul>
<p>Initialization of any protocol can be split into:</p>
<ul class="simple">
<li><p>specific attributes initialization</p></li>
<li><p>generic attributes initialization</p></li>
<li><p>protocol descriptor initialization</p></li>
</ul>
<p>The structure that stores all ADALM-2000 specific attributes can be found in the
extra header, while all generic attributes are found in the standard header. For
example SPI generic attributes are found in <em>libm2k/tools/spi.hpp</em>, while SPI
specific attributes of ADALM-2000 are found in <em>libm2k/tools/spi_extra.hpp</em>.</p>
<ol class="arabic simple">
<li><p>Instantiate and set all parameters of the init structure from the extra
header (m2k_protocol_init).</p></li>
<li><p>Instantiate and set all parameters of the init structure from the standard
header (protocol_init_param). This structure contains a parameter called
extra. The value of this parameter is supposed to be a reference to the
structure from the extra header.</p></li>
<li><p>Instantiate a protocol descriptor and then call the init function that will
populate the descriptor with the information found in initial structures. Use
this descriptor every time when a writing/reading operation is performed.</p></li>
</ol>
<section id="spi">
<h3>SPI<a class="headerlink" href="#spi" title="Link to this heading"></a></h3>
<p>Initialization parameters:</p>
<ul class="simple">
<li><p>max_speed_hz - write/read frequency</p></li>
<li><p>chip_select - index of any digital pin</p></li>
<li><p>mode - spi mode</p></li>
<li><p>extra:</p>
<ul>
<li><p>clock - index of any digital pin</p></li>
<li><p>mosi - index of any digital pin</p></li>
<li><p>miso - index of any digital pin</p></li>
<li><p>bit_numbering - {LSB | MSB}</p></li>
<li><p>cs_polarity - {ACTIVE_LOW | ACTIVE_HIGH}</p></li>
</ul>
</li>
</ul>
<p>Functions:</p>
<ul class="simple">
<li><p>spi_init - initialize the SPI communication peripheral</p>
<ul>
<li><p>desc - SPI descriptor</p></li>
<li><p>param - structure that contains the SPI parameters</p></li>
</ul>
</li>
<li><p>spi_write_and_read - write and read data to/from SPI</p>
<ul>
<li><p>desc - SPI descriptor</p></li>
<li><p>data - buffer with the transmitted/received data</p></li>
<li><p>bytes_number - number of bytes to write/read</p></li>
</ul>
</li>
<li><p>spi_remove - free the resources allocated by spi_init</p>
<ul>
<li><p>desc - SPI descriptor</p></li>
</ul>
</li>
</ul>
<p>Examples:</p>
<p>Include headers</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;libm2k/m2k.hpp&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;libm2k/contextbuilder.hpp&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;libm2k/tools/spi.hpp&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;libm2k/tools/spi_extra.hpp&gt;</span>
</pre></div>
</div>
<p>Setup SPI</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">libm2k</span><span class="o">::</span><span class="n">contexts</span><span class="o">::</span><span class="n">M2k</span><span class="w"> </span><span class="n">context</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">libm2k</span><span class="o">::</span><span class="n">contexts</span><span class="o">::</span><span class="n">m2kOpen</span><span class="p">(</span><span class="s">&quot;ip:192.168.2.1&quot;</span><span class="p">);</span>

<span class="c1">// first step of initialization</span>
<span class="n">m2k_spi_init</span><span class="w"> </span><span class="n">m2KSpiInit</span><span class="p">;</span>
<span class="n">m2KSpiInit</span><span class="p">.</span><span class="n">clock</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="n">m2KSpiInit</span><span class="p">.</span><span class="n">mosi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<span class="n">m2KSpiInit</span><span class="p">.</span><span class="n">miso</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">7</span><span class="p">;</span>
<span class="n">m2KSpiInit</span><span class="p">.</span><span class="n">bit_numbering</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MSB</span><span class="p">;</span>
<span class="n">m2KSpiInit</span><span class="p">.</span><span class="n">context</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">context</span><span class="p">;</span>

<span class="c1">// second step of initialization</span>
<span class="n">spi_init_param</span><span class="w"> </span><span class="n">spiInitParam</span><span class="p">;</span>
<span class="n">spi_init_param</span><span class="p">.</span><span class="n">max_speed_hz</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1000000</span><span class="p">;</span>
<span class="n">spi_init_param</span><span class="p">.</span><span class="n">mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SPI_MODE_3</span><span class="p">;</span>
<span class="n">spi_init_param</span><span class="p">.</span><span class="n">chip_select</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="n">spi_init_param</span><span class="p">.</span><span class="n">extra</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="o">&amp;</span><span class="n">m2KSpiInit</span><span class="p">;</span>

<span class="c1">// third step of initialization</span>
<span class="n">spi_desc</span><span class="w"> </span><span class="n">desc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">nullptr</span><span class="p">;</span>
<span class="n">spi_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">spiInitParam</span><span class="p">);</span>
</pre></div>
</div>
<p>Write data</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">data</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mh">0xAB</span><span class="p">,</span><span class="w"> </span><span class="mh">0xFF</span><span class="p">};</span>
<span class="n">spi_write_and_read</span><span class="p">(</span><span class="n">desc</span><span class="p">,</span><span class="w"> </span><span class="n">data</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">);</span>
</pre></div>
</div>
<p>Remove the descriptor</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">spi_remove</span><span class="p">(</span><span class="n">desc</span><span class="p">);</span>
<span class="n">libm2k</span><span class="o">::</span><span class="n">contexts</span><span class="o">::</span><span class="n">contextClose</span><span class="p">(</span><span class="n">context</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="i2c">
<h3>IÂ²C<a class="headerlink" href="#i2c" title="Link to this heading"></a></h3>
<p>Initialization parameters:</p>
<ul class="simple">
<li><p>max_speed_hz - write/read frequency</p></li>
<li><p>slave_address - 7/10 bit address</p></li>
<li><p>extra:</p>
<ul>
<li><p>scl - index of any digital pin</p></li>
<li><p>sda - index of any digital pin</p></li>
</ul>
</li>
</ul>
<p>Functions:</p>
<ul class="simple">
<li><p>i2c_init - initialize the IÂ²C communication peripheral</p>
<ul>
<li><p>desc - IÂ²C descriptor</p></li>
<li><p>param - structure that contains the IÂ²C parameters</p></li>
</ul>
</li>
<li><p>i2c_write - write data to a slave device</p>
<ul>
<li><p>desc - IÂ²C descriptor</p></li>
<li><p>data - buffer with the transmitted data</p></li>
<li><p>bytes_number - number of bytes to write</p></li>
<li><p>option - IÂ²C transfer mode</p>
<ul>
<li><p>1 = 7 bit addressing</p></li>
<li><p>3 = 7 bit addressing with repeated start</p></li>
<li><p>4 = 10 bit addressing</p></li>
<li><p>6 = 10 bit addressing with repeated start</p></li>
</ul>
</li>
</ul>
</li>
<li><p>i2c_read - read data from a slave device</p>
<ul>
<li><p>desc - IÂ²C descriptor</p></li>
<li><p>data - buffer with the received data</p></li>
<li><p>bytes_number - number of bytes to read</p></li>
<li><p>option - IÂ²C transfer mode</p></li>
</ul>
</li>
<li><p>i2c_remove - free the resources allocated by i2c_init</p>
<ul>
<li><p>desc - IÂ²C descriptor</p></li>
</ul>
</li>
</ul>
<p>Examples:</p>
<p>Include headers</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;libm2k/m2k.hpp&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;libm2k/contextbuilder.hpp&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;libm2k/tools/i2c.hpp&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;libm2k/tools/i2c_extra.hpp&gt;</span>
</pre></div>
</div>
<p>Setup IÂ²C</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">libm2k</span><span class="o">::</span><span class="n">contexts</span><span class="o">::</span><span class="n">M2k</span><span class="w"> </span><span class="n">context</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">libm2k</span><span class="o">::</span><span class="n">contexts</span><span class="o">::</span><span class="n">m2kOpen</span><span class="p">(</span><span class="s">&quot;ip:192.168.2.1&quot;</span><span class="p">);</span>

<span class="c1">// first step of initialization</span>
<span class="n">m2k_i2c_init</span><span class="w"> </span><span class="n">m2KI2CInit</span><span class="p">;</span>
<span class="n">m2KI2CInit</span><span class="p">.</span><span class="n">scl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="n">m2KI2CInit</span><span class="p">.</span><span class="n">sda</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="n">m2KI2CInit</span><span class="p">.</span><span class="n">context</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">context</span><span class="p">;</span>

<span class="c1">// second step of initialization</span>
<span class="n">i2c_init_param</span><span class="w"> </span><span class="n">i2CInitParam</span><span class="p">;</span>
<span class="n">i2CInitParam</span><span class="p">.</span><span class="n">max_speed_hz</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">100000</span><span class="p">;</span>
<span class="n">i2CInitParam</span><span class="p">.</span><span class="n">slave_address</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x48</span><span class="p">;</span>
<span class="n">i2CInitParam</span><span class="p">.</span><span class="n">extra</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="o">&amp;</span><span class="n">m2KI2CInit</span><span class="p">;</span>

<span class="c1">// third step of initialization</span>
<span class="n">i2c_desc</span><span class="w"> </span><span class="n">desc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">nullptr</span><span class="p">;</span>
<span class="n">i2c_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">i2CInitParam</span><span class="p">);</span>
</pre></div>
</div>
<p>Write and read the data</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">uint8_t</span><span class="w">  </span><span class="n">data_write</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mh">0x0B</span><span class="p">};</span>
<span class="kt">uint8_t</span><span class="w">  </span><span class="n">data_read</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">0</span><span class="p">};</span>
<span class="n">i2c_write</span><span class="p">(</span><span class="n">desc</span><span class="p">,</span><span class="w"> </span><span class="n">data_write</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">data_write</span><span class="p">),</span><span class="w"> </span><span class="n">i2c_general_call</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">i2c_repeated_start</span><span class="p">);</span>
<span class="n">i2c_read</span><span class="p">(</span><span class="n">desc</span><span class="p">,</span><span class="w"> </span><span class="n">data_read</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">data_read</span><span class="p">),</span><span class="w"> </span><span class="n">i2c_general_call</span><span class="p">);</span>
</pre></div>
</div>
<p>Remove the descriptor</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">i2c_remove</span><span class="p">(</span><span class="n">desc</span><span class="p">);</span>
<span class="n">libm2k</span><span class="o">::</span><span class="n">contexts</span><span class="o">::</span><span class="n">contextClose</span><span class="p">(</span><span class="n">context</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="uart">
<h3>UART<a class="headerlink" href="#uart" title="Link to this heading"></a></h3>
<p>Initialization parameters:</p>
<ul class="simple">
<li><p>baud_rate - write/read frequency</p></li>
<li><p>device_id - index of any digital pin</p></li>
<li><p>extra:</p>
<ul>
<li><p>parity - {NO_PARITY | ODD | EVEN | MARK | SPACE}</p></li>
<li><p>bits_number - {5 | 6 | 7 | 8}</p></li>
<li><p>stop_bits - {ONE | ONE_AND_A_HALF | TWO}</p></li>
</ul>
</li>
</ul>
<p>Functions:</p>
<ul class="simple">
<li><p>uart_init - initialize the UART communication peripheral</p>
<ul>
<li><p>desc - UART descriptor</p></li>
<li><p>param - structure that contains the UART parameters</p></li>
</ul>
</li>
<li><p>uart_write - write data to UART</p>
<ul>
<li><p>desc - UART descriptor</p></li>
<li><p>data - buffer with the transmitted data</p></li>
<li><p>bytes_number - number of bytes to write</p></li>
</ul>
</li>
<li><p>uart_read - read data to UART</p>
<ul>
<li><p>desc - UART descriptor</p></li>
<li><p>data - buffer with the received data</p></li>
<li><p>bytes_number - number of bytes to read</p></li>
</ul>
</li>
<li><p>uart_get_errors - check if UART errors occurred</p>
<ul>
<li><p>desc - UART descriptor</p></li>
</ul>
</li>
<li><p>uart_remove - free the resources allocated by uart_init</p>
<ul>
<li><p>desc - UART descriptor</p></li>
</ul>
</li>
</ul>
<p>Examples:</p>
<p>Include headers</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;libm2k/m2k.hpp&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;libm2k/contextbuilder.hpp&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;libm2k/tools/uart.hpp&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;libm2k/tools/uart_extra.hpp&gt;</span>
</pre></div>
</div>
<p>Setup UART</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">libm2k</span><span class="o">::</span><span class="n">contexts</span><span class="o">::</span><span class="n">M2k</span><span class="w"> </span><span class="n">context</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">libm2k</span><span class="o">::</span><span class="n">contexts</span><span class="o">::</span><span class="n">m2kOpen</span><span class="p">(</span><span class="s">&quot;ip:192.168.2.1&quot;</span><span class="p">);</span>

<span class="c1">// first step of initialization</span>
<span class="n">m2k_uart_init</span><span class="w"> </span><span class="n">m2KUartInit</span><span class="p">;</span>
<span class="n">m2KUartInit</span><span class="p">.</span><span class="n">bits_number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">8</span><span class="p">;</span>
<span class="n">m2KUartInit</span><span class="p">.</span><span class="n">parity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NO_PARITY</span><span class="p">;</span>
<span class="n">m2KUartInit</span><span class="p">.</span><span class="n">stop_bits</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ONE</span><span class="p">;</span>
<span class="n">m2KUartInit</span><span class="p">.</span><span class="n">context</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">context</span><span class="p">;</span>

<span class="c1">// second step of initialization</span>
<span class="n">uart_init_param</span><span class="w"> </span><span class="n">uartInitParam</span><span class="p">;</span>
<span class="n">uartInitParam</span><span class="p">.</span><span class="n">device_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="n">uartInitParam</span><span class="p">.</span><span class="n">baud_rate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">9600</span><span class="p">;</span>
<span class="n">uartInitParam</span><span class="p">.</span><span class="n">extra</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="o">&amp;</span><span class="n">m2KUartInit</span><span class="p">;</span>

<span class="c1">// third step of initialization</span>
<span class="n">uart_desc</span><span class="w"> </span><span class="n">desc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">nullptr</span><span class="p">;</span>
<span class="n">uart_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">desc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">uartInitParam</span><span class="p">);</span>
</pre></div>
</div>
<p>Write data</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">dataWrite</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="sc">&#39;A&#39;</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;D&#39;</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;I&#39;</span><span class="p">};</span>
<span class="n">uart_write</span><span class="p">(</span><span class="n">desc</span><span class="p">,</span><span class="w"> </span><span class="n">dataWrite</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">dataWrite</span><span class="p">));</span>
</pre></div>
</div>
<p>Remove the descriptor</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">uart_remove</span><span class="p">(</span><span class="n">desc</span><span class="p">);</span>
<span class="n">libm2k</span><span class="o">::</span><span class="n">contexts</span><span class="o">::</span><span class="n">contextClose</span><span class="p">(</span><span class="n">context</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">);</span>
</pre></div>
</div>
</section>
</section>
<section id="libm2k-and-no-os-drivers">
<h2>Libm2k and no-OS drivers<a class="headerlink" href="#libm2k-and-no-os-drivers" title="Link to this heading"></a></h2>
<p>Analog Devices offers a variety of <a class="icon git reference external" href="https://github.com/analogdevicesinc/no-OS/tree/main/drivers">No-OS drivers</a>
for a variety peripherals in a hardware agnostic format.
These drivers can be interfaced with the libm2k
in order to use the M2K as a master to configure/use the peripheral.
Documentation for the drivers available at <a class="reference external" href="https://analogdevicesinc.github.io/no-OS/drivers_doc.html" title="(in no-OS)"><span>no-OS drivers list</span></a>.</p>
<p>In order to integrate libm2k with no-OS drivers some standard steps must be
followed:</p>
<ul class="simple">
<li><p>drivers inclusion</p></li>
<li><p>libm2k headers inclusion</p></li>
<li><p>writing the logic</p>
<ul>
<li><p>C++ file</p></li>
<li><p>drivers included as external C</p></li>
</ul>
</li>
</ul>
<p>Including all required driver files in the project is the first step in
integrating libm2k with no-OS drivers.</p>
<p>The drivers will include some protocols, for example <em>âi2c.hâ</em>. The afferent
header of libm2k, <em>libm2k/tool/i2c.hpp</em>, does not match with the header
included by the drivers (<em>âi2c.hâ</em>). In order not to modify the drivers we are
going to create a header named after the protocol (<em>âi2c.hâ</em>) in which the
libm2k header will be included. For example create the <em>âi2c.hâ</em> header in which
you will include <em>libm2k/tools/i2c.hpp</em>.</p>
<p>Each file that will call libm2k methods should be a C++ file. The inclusion of
any driver in a C++ file has to be marked as an external C file inclusion.</p>
<p>Example:</p>
<p>AD5592r can be independently configured as DAC outputs, ADC inputs, digital
outputs, or digital inputs. In this example we are going to generate ascending
voltage values, communicating with the chip using SPI.</p>
<ul class="simple">
<li><p>Hardware configuration (ADALM-2000 &lt;- -&gt; AD5592r):</p>
<ul>
<li><p>SCK: DIO_0 &lt;- -&gt; P4</p></li>
<li><p>MOSI: DIO_1 &lt;- -&gt; P2</p></li>
<li><p>MISO: DIO_2 &lt;- -&gt; P3</p></li>
<li><p>SS: DIO_3 &lt;- -&gt; P1</p></li>
<li><p>GND: GND &lt;- -&gt; P5</p></li>
<li><p>VLOGIC: V+ -&gt; P6</p></li>
<li><p>Oscilloscope: 1+ &lt;- I/O0</p></li>
</ul>
</li>
<li><p>Project structure:</p>
<ul>
<li><p>ad5592r-base.h</p></li>
<li><p>ad5592r-base.c</p></li>
<li><p>ad5592r.h</p></li>
<li><p>ad5592r.c</p></li>
<li><p>delay.h</p></li>
<li><p>delay.c</p></li>
<li><p>spi.h</p></li>
<li><p>i2c.h</p></li>
<li><p>main.cpp</p></li>
</ul>
</li>
<li><p>Get all AD5592r drivers from
<a class="icon git reference external" href="https://github.com/analogdevicesinc/no-OS/tree/main/drivers/adc-dac/ad5592r">drivers/adc-dac/ad5592r</a></p></li>
<li><p>Get delay header from
<a class="icon git reference external" href="https://github.com/analogdevicesinc/no-OS/tree/main/include/delay.h">include/delay.h</a></p></li>
<li><p>Implement mdelay function from delay.h</p></li>
</ul>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;delay.h&quot;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;unistd.h&gt;</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">mdelay</span><span class="p">(</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">msecs</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">usleep</span><span class="p">(</span><span class="n">msecs</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">1000</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Create spi.h and i2c.h headers (we are not going to use IÂ²C in this example,
but AD5592r drivers include IÂ²C header). In each file include the afferent
header of libm2k.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">//spi.h</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;libm2k/tools/spi.hpp&gt;</span>
</pre></div>
</div>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">//i2c.h</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;libm2k/tools/i2c.hpp&gt;</span>
</pre></div>
</div>
<p>Create main.cpp file:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;libm2k/m2k.hpp&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;libm2k/contextbuilder.hpp&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;libm2k/analog/m2kpowersupply.hpp&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;libm2k/analog/m2kanalogin.hpp&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;libm2k/tools/spi_extra.hpp&gt;</span>

<span class="k">extern</span><span class="w"> </span><span class="s">&quot;C&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;ad5592r.h&quot;</span>
<span class="p">}</span>
<span class="k">extern</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">ad5592r_rw_ops</span><span class="w"> </span><span class="n">ad5592r_rw_ops</span><span class="p">;</span><span class="w"> </span><span class="c1">//default operations</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">ad5592r_init_param</span><span class="w"> </span><span class="n">init_param</span><span class="p">;</span>
<span class="w">    </span><span class="n">init_param</span><span class="p">.</span><span class="n">int_ref</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span><span class="w"> </span><span class="c1">// use the internal reference</span>

<span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">ad5592r_dev</span><span class="w"> </span><span class="n">device</span><span class="p">;</span>
<span class="w">    </span><span class="n">device</span><span class="p">.</span><span class="n">ops</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">ad5592r_rw_ops</span><span class="p">;</span><span class="w"> </span><span class="c1">//initialize the operations</span>

<span class="w">    </span><span class="n">libm2k</span><span class="o">::</span><span class="n">contexts</span><span class="o">::</span><span class="n">M2k</span><span class="w"> </span><span class="o">*</span><span class="n">context</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">libm2k</span><span class="o">::</span><span class="n">contexts</span><span class="o">::</span><span class="n">m2kOpen</span><span class="p">(</span><span class="s">&quot;ip:192.168.2.1&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">libm2k</span><span class="o">::</span><span class="n">analog</span><span class="o">::</span><span class="n">M2kPowerSupply</span><span class="w"> </span><span class="o">*</span><span class="n">powerSupply</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">context</span><span class="o">-&gt;</span><span class="n">getPowerSupply</span><span class="p">();</span>
<span class="w">    </span><span class="n">libm2k</span><span class="o">::</span><span class="n">analog</span><span class="o">::</span><span class="n">M2kAnalogIn</span><span class="w"> </span><span class="o">*</span><span class="n">analogIn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">context</span><span class="o">-&gt;</span><span class="n">getAnalogIn</span><span class="p">();</span>

<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Calibrating . . .&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="w">    </span><span class="n">context</span><span class="o">-&gt;</span><span class="n">calibrateADC</span><span class="p">();</span>

<span class="w">    </span><span class="n">powerSupply</span><span class="o">-&gt;</span><span class="n">enableChannel</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">);</span>
<span class="w">    </span><span class="n">powerSupply</span><span class="o">-&gt;</span><span class="n">pushChannel</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">);</span><span class="w"> </span><span class="c1">// power up the chip</span>

<span class="w">    </span><span class="c1">// first step of initialization</span>
<span class="w">    </span><span class="n">m2k_spi_init</span><span class="w"> </span><span class="n">m2KSpiInit</span><span class="p">;</span><span class="w"> </span><span class="c1">// m2k specific attributes of SPI</span>
<span class="w">    </span><span class="n">m2KSpiInit</span><span class="p">.</span><span class="n">clock</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">m2KSpiInit</span><span class="p">.</span><span class="n">mosi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="n">m2KSpiInit</span><span class="p">.</span><span class="n">miso</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<span class="w">    </span><span class="n">m2KSpiInit</span><span class="p">.</span><span class="n">bit_numbering</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MSB</span><span class="p">;</span>
<span class="w">    </span><span class="n">m2KSpiInit</span><span class="p">.</span><span class="n">context</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">context</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// second step of initialization</span>
<span class="w">    </span><span class="n">spi_init_param</span><span class="w"> </span><span class="n">spiInitParam</span><span class="p">;</span><span class="w"> </span><span class="c1">// generic attributes of SPI</span>
<span class="w">    </span><span class="n">spiInitParam</span><span class="p">.</span><span class="n">max_speed_hz</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2500000</span><span class="p">;</span>
<span class="w">    </span><span class="n">spiInitParam</span><span class="p">.</span><span class="n">mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SPI_MODE_2</span><span class="p">;</span>
<span class="w">    </span><span class="n">spiInitParam</span><span class="p">.</span><span class="n">chip_select</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
<span class="w">    </span><span class="n">spiInitParam</span><span class="p">.</span><span class="n">extra</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">m2KSpiInit</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// third step of initialization</span>
<span class="w">    </span><span class="n">spi_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">device</span><span class="p">.</span><span class="n">spi</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">spiInitParam</span><span class="p">);</span><span class="w"> </span><span class="c1">// initialize SPI communication</span>

<span class="w">    </span><span class="n">device</span><span class="p">.</span><span class="n">channel_modes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CH_MODE_DAC</span><span class="p">;</span><span class="w"> </span><span class="c1">// set the first channel as a DAC</span>
<span class="w">    </span><span class="n">device</span><span class="p">.</span><span class="n">num_channels</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="c1">// enable just the first channel</span>
<span class="w">    </span><span class="n">ad5592r_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">device</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">init_param</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">//initialize AD5592r</span>

<span class="w">    </span><span class="k">for</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mh">0xfff</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">+=</span><span class="mh">0x0f</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">ad5592r_write_dac</span><span class="p">(</span><span class="o">&amp;</span><span class="n">device</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="p">);</span><span class="w"> </span><span class="c1">// generate voltage</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">analogIn</span><span class="o">-&gt;</span><span class="n">getVoltage</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"> </span><span class="c1">//read voltage</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">libm2k</span><span class="o">::</span><span class="n">contexts</span><span class="o">::</span><span class="n">contextClose</span><span class="p">(</span><span class="n">context</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Compile the project:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">gcc</span><span class="w"> </span><span class="o">-</span><span class="n">c</span><span class="w"> </span><span class="n">delay</span><span class="p">.</span><span class="n">c</span>
<span class="n">gcc</span><span class="w"> </span><span class="o">-</span><span class="n">c</span><span class="w"> </span><span class="n">ad5592r</span><span class="o">-</span><span class="n">base</span><span class="p">.</span><span class="n">c</span>
<span class="n">gcc</span><span class="w"> </span><span class="o">-</span><span class="n">c</span><span class="w"> </span><span class="n">ad5592r</span><span class="p">.</span><span class="n">c</span>
<span class="n">g</span><span class="o">++</span><span class="w"> </span><span class="o">-</span><span class="n">c</span><span class="w"> </span><span class="n">main</span><span class="p">.</span><span class="n">cpp</span>
<span class="n">g</span><span class="o">++</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="w"> </span><span class="n">example</span><span class="w"> </span><span class="n">delay</span><span class="p">.</span><span class="n">o</span><span class="w"> </span><span class="n">ad5592r</span><span class="o">-</span><span class="n">base</span><span class="p">.</span><span class="n">o</span><span class="w"> </span><span class="n">ad5592r</span><span class="p">.</span><span class="n">o</span><span class="w"> </span><span class="n">main</span><span class="p">.</span><span class="n">o</span><span class="w"> </span><span class="o">-</span><span class="n">lm2k</span>
<span class="p">.</span><span class="o">/</span><span class="n">example</span>
</pre></div>
</div>
</section>
</section>


          </div>
              <div class="related">
                &nbsp;
    <a href="calibration.html" title="Previous document (Alt+Shift+LeftArrow)" class="prev">Calibration</a>
    <a href="m2kcli.html" title="Next document (Alt+Shift+RightArrow)" class="next">Command line utility</a>
              </div>
          
        </div>
      </div>
  </div>

  <label id="cancel-area-show-toc" for="input-show-toc"></label>
  <label id="cancel-area-show-localtoc" for="input-show-localtoc"></label>
    <footer>
      &#169;2024, Analog Devices, Inc.
      
      |
      Made with <a href="https://www.sphinx-doc.org/">Sphinx</a>
      &amp; <a href="https://github.com/analogdevicesinc/doctools">Doctools</a>
      
    </footer>
  </body>
</html>